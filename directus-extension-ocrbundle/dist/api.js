"use strict";var e=require("url"),t=require("util"),s=(0).constructor;s.isFinite,s.isInteger,[].constructor.isArray;function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}new(function(){function e(e){this.size=e,this.reset()}return e.prototype.reset=function(){this.oldestIndex=0,this.map={},this.cachedKeys=new Array(this.size)},e.prototype.get=function(e){return this.map[e]},e.prototype.set=function(e,t){this.map[e]=t;var s=this.cachedKeys[this.oldestIndex];void 0!==s&&delete this.map[s],this.cachedKeys[this.oldestIndex]=e,this.oldestIndex++,this.oldestIndex%=this.size},e}())(1e3);var r={exports:{}},n=function(...e){try{return JSON.stringify(...e)}catch(e){return"[Cannot display object: "+e.message+"]"}};!function(e,t){const s=n;r.exports=class extends Error{constructor(e){super(e.filter((e=>""!==e)).map((e=>"string"==typeof e?e:e instanceof Error?e.message:s(e))).join(" ")||"Unknown error"),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t.assert)}}}(0,r.exports);var a,o,l=r.exports;function c(){if(o)return a;o=1;const e=l;return a=function(t,...s){if(!t){if(1===s.length&&s[0]instanceof Error)throw s[0];throw new e(s)}}}const d=c(),u={};var f=function(e,t,s){if(!1===t||null==t)return e;"string"==typeof(s=s||{})&&(s={separator:s});const i=Array.isArray(t);d(!i||!s.separator,"Separator option is not valid for array-based chain");const r=i?t:t.split(s.separator||".");let n=e;for(let e=0;e<r.length;++e){let i=r[e];const a=s.iterables&&u.iterables(n);if(Array.isArray(n)||"set"===a){const e=Number(i);Number.isInteger(e)&&(i=e<0?n.length+e:e)}if(!n||"function"==typeof n&&!1===s.functions||!a&&void 0===n[i]){d(!s.strict||e+1===r.length,"Missing segment",i,"in reach path ",t),d("object"==typeof n||!0===s.functions||"function"!=typeof n,"Invalid segment",i,"in reach path ",t),n=s.default;break}n=a?"set"===a?[...n][i]:n.get(i):n[i]}return n};u.iterables=function(e){return e instanceof Set?"set":e instanceof Map?"map":void 0};var p={exports:{}};!function(e,t){const s={};t=p.exports={array:Array.prototype,buffer:Buffer&&Buffer.prototype,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},s.typeMap=new Map([["[object Error]",t.error],["[object Map]",t.map],["[object Promise]",t.promise],["[object Set]",t.set],["[object WeakMap]",t.weakMap],["[object WeakSet]",t.weakSet]]),t.getInternalProto=function(e){if(Array.isArray(e))return t.array;if(Buffer&&e instanceof Buffer)return t.buffer;if(e instanceof Date)return t.date;if(e instanceof RegExp)return t.regex;if(e instanceof Error)return t.error;const i=Object.prototype.toString.call(e);return s.typeMap.get(i)||t.generic}}(0,p.exports);var h=p.exports,m={keys:function(e,t={}){return!1!==t.symbols?Reflect.ownKeys(e):Object.getOwnPropertyNames(e)}};const _=f,g=h,y=m,v={needsProtoHack:new Set([g.set,g.map,g.weakSet,g.weakMap])};var b=v.clone=function(e,t={},s=null){if("object"!=typeof e||null===e)return e;let i=v.clone,r=s;if(t.shallow){if(!0!==t.shallow)return v.cloneWithShallow(e,t);i=e=>e}else if(r){const t=r.get(e);if(t)return t}else r=new Map;const n=g.getInternalProto(e);if(n===g.buffer)return Buffer&&Buffer.from(e);if(n===g.date)return new Date(e.getTime());if(n===g.regex)return new RegExp(e);const a=v.base(e,n,t);if(a===e)return e;if(r&&r.set(e,a),n===g.set)for(const s of e)a.add(i(s,t,r));else if(n===g.map)for(const[s,n]of e)a.set(s,i(n,t,r));const o=y.keys(e,t);for(const s of o){if("__proto__"===s)continue;if(n===g.array&&"length"===s){a.length=e.length;continue}const o=Object.getOwnPropertyDescriptor(e,s);o?o.get||o.set?Object.defineProperty(a,s,o):o.enumerable?a[s]=i(e[s],t,r):Object.defineProperty(a,s,{enumerable:!1,writable:!0,configurable:!0,value:i(e[s],t,r)}):Object.defineProperty(a,s,{enumerable:!0,writable:!0,configurable:!0,value:i(e[s],t,r)})}return a};v.cloneWithShallow=function(e,t){const s=t.shallow;(t=Object.assign({},t)).shallow=!1;const i=new Map;for(const t of s){const s=_(e,t);"object"!=typeof s&&"function"!=typeof s||i.set(s,s)}return v.clone(e,t,i)},v.base=function(e,t,s){if(!1===s.prototype)return v.needsProtoHack.has(t)?new t.constructor:t===g.array?[]:{};const i=Object.getPrototypeOf(e);if(i&&i.isImmutable)return e;if(t===g.array){const e=[];return i!==t&&Object.setPrototypeOf(e,i),e}if(v.needsProtoHack.has(t)){const e=new i.constructor;return i!==t&&Object.setPrototypeOf(e,i),e}return Object.create(i)};var w,A={},E={},R={name:"joi",description:"Object schema validation",version:"17.13.3",repository:"git://github.com/hapijs/joi",main:"lib/index.js",types:"lib/index.d.ts",browser:"dist/joi-browser.min.js",files:["lib/**/*","dist/*"],keywords:["schema","validation"],dependencies:{"@hapi/hoek":"^9.3.0","@hapi/topo":"^5.1.0","@sideway/address":"^4.1.5","@sideway/formula":"^3.0.1","@sideway/pinpoint":"^2.0.0"},devDependencies:{"@hapi/bourne":"2.x.x","@hapi/code":"8.x.x","@hapi/joi-legacy-test":"npm:@hapi/joi@15.x.x","@hapi/lab":"^25.1.3","@types/node":"^14.18.63",typescript:"4.3.x"},scripts:{prepublishOnly:"cd browser && npm install && npm run build",test:"lab -t 100 -a @hapi/code -L -Y","test-cov-html":"lab -r html -o coverage.html -a @hapi/code"},license:"BSD-3-Clause"},S={};function O(){if(w)return S;w=1;const e=Ft(),t={};return t.wrap=e.string().min(1).max(2).allow(!1),S.preferences=e.object({allowUnknown:e.boolean(),abortEarly:e.boolean(),artifacts:e.boolean(),cache:e.boolean(),context:e.object(),convert:e.boolean(),dateFormat:e.valid("date","iso","string","time","utc"),debug:e.boolean(),errors:{escapeHtml:e.boolean(),label:e.valid("path","key",!1),language:[e.string(),e.object().ref()],render:e.boolean(),stack:e.boolean(),wrap:{label:t.wrap,array:t.wrap,string:t.wrap}},externals:e.boolean(),messages:e.object(),noDefaults:e.boolean(),nonEnumerables:e.boolean(),presence:e.valid("required","optional","forbidden"),skipFunctions:e.boolean(),stripUnknown:e.object({arrays:e.boolean(),objects:e.boolean()}).or("arrays","objects").allow(!0,!1),warnings:e.boolean()}).strict(),t.nameRx=/^[a-zA-Z0-9]\w*$/,t.rule=e.object({alias:e.array().items(e.string().pattern(t.nameRx)).single(),args:e.array().items(e.string(),e.object({name:e.string().pattern(t.nameRx).required(),ref:e.boolean(),assert:e.alternatives([e.function(),e.object().schema()]).conditional("ref",{is:!0,then:e.required()}),normalize:e.function(),message:e.string().when("assert",{is:e.function(),then:e.required()})})),convert:e.boolean(),manifest:e.boolean(),method:e.function().allow(!1),multi:e.boolean(),validate:e.function()}),S.extension=e.object({type:e.alternatives([e.string(),e.object().regex()]).required(),args:e.function(),cast:e.object().pattern(t.nameRx,e.object({from:e.function().maxArity(1).required(),to:e.function().minArity(1).maxArity(2).required()})),base:e.object().schema().when("type",{is:e.object().regex(),then:e.forbidden()}),coerce:[e.function().maxArity(3),e.object({method:e.function().maxArity(3).required(),from:e.array().items(e.string()).single()})],flags:e.object().pattern(t.nameRx,e.object({setter:e.string(),default:e.any()})),manifest:{build:e.function().arity(2)},messages:[e.object(),e.string()],modifiers:e.object().pattern(t.nameRx,e.function().minArity(1).maxArity(2)),overrides:e.object().pattern(t.nameRx,e.function()),prepare:e.function().maxArity(3),rebuild:e.function().arity(1),rules:e.object().pattern(t.nameRx,t.rule),terms:e.object().pattern(t.nameRx,e.object({init:e.array().allow(null).required(),manifest:e.object().pattern(/.+/,[e.valid("schema","single"),e.object({mapped:e.object({from:e.string().required(),to:e.string().required()}).required()})])})),validate:e.function().maxArity(3)}).strict(),S.extensions=e.array().items(e.object(),e.function().arity(1)).strict(),t.desc={buffer:e.object({buffer:e.string()}),func:e.object({function:e.function().required(),options:{literal:!0}}),override:e.object({override:!0}),ref:e.object({ref:e.object({type:e.valid("value","global","local"),path:e.array().required(),separator:e.string().length(1).allow(!1),ancestor:e.number().min(0).integer().allow("root"),map:e.array().items(e.array().length(2)).min(1),adjust:e.function(),iterables:e.boolean(),in:e.boolean(),render:e.boolean()}).required()}),regex:e.object({regex:e.string().min(3)}),special:e.object({special:e.valid("deep").required()}),template:e.object({template:e.string().required(),options:e.object()}),value:e.object({value:e.alternatives([e.object(),e.array()]).required()})},t.desc.entity=e.alternatives([e.array().items(e.link("...")),e.boolean(),e.function(),e.number(),e.string(),t.desc.buffer,t.desc.func,t.desc.ref,t.desc.regex,t.desc.special,t.desc.template,t.desc.value,e.link("/")]),t.desc.values=e.array().items(null,e.boolean(),e.function(),e.number().allow(1/0,-1/0),e.string().allow(""),e.symbol(),t.desc.buffer,t.desc.func,t.desc.override,t.desc.ref,t.desc.regex,t.desc.template,t.desc.value),t.desc.messages=e.object().pattern(/.+/,[e.string(),t.desc.template,e.object().pattern(/.+/,[e.string(),t.desc.template])]),S.description=e.object({type:e.string().required(),flags:e.object({cast:e.string(),default:e.any(),description:e.string(),empty:e.link("/"),failover:t.desc.entity,id:e.string(),label:e.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:e.boolean(),unit:e.string()}).unknown(),preferences:{allowUnknown:e.boolean(),abortEarly:e.boolean(),artifacts:e.boolean(),cache:e.boolean(),convert:e.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:e.boolean(),label:["path","key"],language:[e.string(),t.desc.ref],wrap:{label:t.wrap,array:t.wrap}},externals:e.boolean(),messages:t.desc.messages,noDefaults:e.boolean(),nonEnumerables:e.boolean(),presence:["required","optional","forbidden"],skipFunctions:e.boolean(),stripUnknown:e.object({arrays:e.boolean(),objects:e.boolean()}).or("arrays","objects").allow(!0,!1),warnings:e.boolean()},allow:t.desc.values,invalid:t.desc.values,rules:e.array().min(1).items({name:e.string().required(),args:e.object().min(1),keep:e.boolean(),message:[e.string(),t.desc.messages],warn:e.boolean()}),keys:e.object().pattern(/.*/,e.link("/")),link:t.desc.ref}).pattern(/^[a-z]\w*$/,e.any()),S}var $={},x={exports:{}};const N={};var I=function(e){if(!e)return"";let t="";for(let s=0;s<e.length;++s){const i=e.charCodeAt(s);N.isSafe(i)?t+=e[s]:t+=N.escapeHtmlChar(i)}return t};N.escapeHtmlChar=function(e){const t=N.namedHtml.get(e);if(t)return t;if(e>=256)return"&#"+e+";";return`&#x${e.toString(16).padStart(2,"0")};`},N.isSafe=function(e){return N.safeCharCodes.has(e)},N.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),N.safeCharCodes=function(){const e=new Set;for(let t=32;t<123;++t)(t>=97||t>=65&&t<=90||t>=48&&t<=57||32===t||46===t||44===t||45===t||58===t||95===t)&&e.add(t);return e}();var k={};!function(e){const t={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};e.Parser=class{constructor(e,s={}){if(!s[t.settings]&&s.constants)for(const e in s.constants){const t=s.constants[e];if(null!==t&&!["boolean","number","string"].includes(typeof t))throw new Error(`Formula constant ${e} contains invalid ${typeof t} value type`)}this.settings=s[t.settings]?s:Object.assign({[t.settings]:!0,constants:{},functions:{}},s),this.single=null,this._parts=null,this._parse(e)}_parse(s){let i=[],r="",n=0,a=!1;const o=s=>{if(n)throw new Error("Formula missing closing parenthesis");const o=i.length?i[i.length-1]:null;if(a||r||s){if(o&&"reference"===o.type&&")"===s)return o.type="function",o.value=this._subFormula(r,o.value),void(r="");if(")"===s){const t=new e.Parser(r,this.settings);i.push({type:"segment",value:t})}else if(a){if("]"===a)return i.push({type:"reference",value:r}),void(r="");i.push({type:"literal",value:r})}else if(t.operatorCharacters.includes(r))o&&"operator"===o.type&&t.operators.includes(o.value+r)?o.value+=r:i.push({type:"operator",value:r});else if(r.match(t.numberRx))i.push({type:"constant",value:parseFloat(r)});else if(void 0!==this.settings.constants[r])i.push({type:"constant",value:this.settings.constants[r]});else{if(!r.match(t.tokenRx))throw new Error(`Formula contains invalid token: ${r}`);i.push({type:"reference",value:r})}r=""}};for(const e of s)a?e===a?(o(),a=!1):r+=e:n?"("===e?(r+=e,++n):")"===e?(--n,n?r+=e:o(e)):r+=e:e in t.literals?a=t.literals[e]:"("===e?(o(),++n):t.operatorCharacters.includes(e)?(o(),r=e,o()):" "!==e?r+=e:o();o(),i=i.map(((e,t)=>"operator"!==e.type||"-"!==e.value||t&&"operator"!==i[t-1].type?e:{type:"operator",value:"n"}));let l=!1;for(const e of i){if("operator"===e.type){if(t.operatorsPrefix.includes(e.value))continue;if(!l)throw new Error("Formula contains an operator in invalid position");if(!t.operators.includes(e.value))throw new Error(`Formula contains an unknown operator ${e.value}`)}else if(l)throw new Error("Formula missing expected operator");l=!l}if(!l)throw new Error("Formula contains invalid trailing operator");1===i.length&&["reference","literal","constant"].includes(i[0].type)&&(this.single={type:"reference"===i[0].type?"reference":"value",value:i[0].value}),this._parts=i.map((e=>{if("operator"===e.type)return t.operatorsPrefix.includes(e.value)?e:e.value;if("reference"!==e.type)return e.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(e.value))throw new Error(`Formula contains invalid reference ${e.value}`);return this.settings.reference?this.settings.reference(e.value):t.reference(e.value)}))}_subFormula(s,i){const r=this.settings.functions[i];if("function"!=typeof r)throw new Error(`Formula contains unknown function ${i}`);let n=[];if(s){let e="",r=0,a=!1;const o=()=>{if(!e)throw new Error(`Formula contains function ${i} with invalid arguments ${s}`);n.push(e),e=""};for(let i=0;i<s.length;++i){const n=s[i];a?(e+=n,n===a&&(a=!1)):n in t.literals&&!r?(e+=n,a=t.literals[n]):","!==n||r?(e+=n,"("===n?++r:")"===n&&--r):o()}o()}return n=n.map((t=>new e.Parser(t,this.settings))),function(e){const t=[];for(const s of n)t.push(s.evaluate(e));return r.call(e,...t)}}evaluate(e){const s=this._parts.slice();for(let i=s.length-2;i>=0;--i){const r=s[i];if(r&&"operator"===r.type){const n=s[i+1];s.splice(i+1,1);const a=t.evaluate(n,e);s[i]=t.single(r.value,a)}}return t.operatorsOrder.forEach((i=>{for(let r=1;r<s.length-1;)if(i.includes(s[r])){const i=s[r],n=t.evaluate(s[r-1],e),a=t.evaluate(s[r+1],e);s.splice(r,2);const o=t.calculate(i,n,a);s[r-1]=0===o?0:o}else r+=2})),t.evaluate(s[0],e)}},e.Parser.prototype[t.symbol]=!0,t.reference=function(e){return function(t){return t&&void 0!==t[e]?t[e]:null}},t.evaluate=function(e,s){return null===e?null:"function"==typeof e?e(s):e[t.symbol]?e.evaluate(s):e},t.single=function(e,t){if("!"===e)return!t;const s=-t;return 0===s?0:s},t.calculate=function(e,s,i){if("??"===e)return t.exists(s)?s:i;if("string"==typeof s||"string"==typeof i){if("+"===e)return(s=t.exists(s)?s:"")+(i=t.exists(i)?i:"")}else switch(e){case"^":return Math.pow(s,i);case"*":return s*i;case"/":return s/i;case"%":return s%i;case"+":return s+i;case"-":return s-i}switch(e){case"<":return s<i;case"<=":return s<=i;case">":return s>i;case">=":return s>=i;case"==":return s===i;case"!=":return s!==i;case"&&":return s&&i;case"||":return s||i}return null},t.exists=function(e){return null!=e}}(k);var T,C,j={},L={};function D(){if(T)return L;T=1;const e=b,t=V(),s={annotations:Symbol("annotations")};return L.error=function(i){if(!this._original||"object"!=typeof this._original)return this.details[0].message;const r=i?"":"[31m",n=i?"":"[41m",a=i?"":"[0m",o=e(this._original);for(let e=this.details.length-1;e>=0;--e){const i=e+1,r=this.details[e],n=r.path;let a=o;for(let e=0;;++e){const o=n[e];if(t.isSchema(a)&&(a=a.clone()),!(e+1<n.length&&"string"!=typeof a[o])){const e=a[s.annotations]||{errors:{},missing:{}};a[s.annotations]=e;const t=o||r.context.key;void 0!==a[o]?(e.errors[t]=e.errors[t]||[],e.errors[t].push(i)):e.missing[t]=i;break}a=a[o]}}const l=/_\$key\$_([, \d]+)_\$end\$_"/g,c=/"_\$miss\$_([^|]+)\|(\d+)_\$end\$_": "__missing__"/g,d=/\s*"_\$idx\$_([, \d]+)_\$end\$_",?\n(.*)/g,u=/"\[(NaN|Symbol.*|-?Infinity|function.*|\(.*)]"/g;let f=s.safeStringify(o,2).replace(l,((e,t)=>`" ${r}[${t}]${a}`)).replace(c,((e,t,s)=>`${n}"${t}"${a}${r} [${s}]: -- missing --${a}`)).replace(d,((e,t,s)=>`\n${s} ${r}[${t}]${a}`)).replace(u,((e,t)=>t));f=`${f}\n${r}`;for(let e=0;e<this.details.length;++e){f=`${f}\n[${e+1}] ${this.details[e].message}`}return f+=a,f},s.safeStringify=function(e,t){return JSON.stringify(e,s.serializer(),t)},s.serializer=function(){const e=[],t=[],i=(s,i)=>t[0]===i?"[Circular ~]":"[Circular ~."+e.slice(0,t.indexOf(i)).join(".")+"]";return function(r,n){if(t.length>0){const s=t.indexOf(this);~s?(t.length=s+1,e.length=s+1,e[s]=r):(t.push(this),e.push(r)),~t.indexOf(n)&&(n=i.call(this,r,n))}else t.push(n);if(n){const e=n[s.annotations];if(e){if(Array.isArray(n)){const t=[];for(let s=0;s<n.length;++s)e.errors[s]&&t.push(`_$idx$_${e.errors[s].sort().join(", ")}_$end$_`),t.push(n[s]);n=t}else{for(const t in e.errors)n[`${t}_$key$_${e.errors[t].sort().join(", ")}_$end$_`]=n[t],n[t]=void 0;for(const t in e.missing)n[`_$miss$_${t}|${e.missing[t]}_$end$_`]="__missing__"}return n}}return n===1/0||n===-1/0||Number.isNaN(n)||"function"==typeof n||"symbol"==typeof n?"["+n.toString()+"]":n}},L}function M(){return C||(C=1,function(e){const t=D(),s=V(),i=H();e.Report=class{constructor(t,s,i,r,n,a,o){if(this.code=t,this.flags=r,this.messages=n,this.path=a.path,this.prefs=o,this.state=a,this.value=s,this.message=null,this.template=null,this.local=i||{},this.local.label=e.label(this.flags,this.state,this.prefs,this.messages),void 0===this.value||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const e=this.path[this.path.length-1];"object"!=typeof e&&(this.local.key=e)}}_setTemplate(e){if(this.template=e,!this.flags.label&&0===this.path.length){const e=this._template(this.template,"root");e&&(this.local.label=e)}}toString(){if(this.message)return this.message;const e=this.code;if(!this.prefs.errors.render)return this.code;const t=this._template(this.template)||this._template(this.prefs.messages)||this._template(this.messages);return void 0===t?`Error code "${e}" is not defined, your custom type is missing the correct messages definition`:(this.message=t.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}_template(t,s){return e.template(this.value,t,s||this.code,this.state,this.prefs)}},e.path=function(e){let t="";for(const s of e)"object"!=typeof s&&("string"==typeof s?(t&&(t+="."),t+=s):t+=`[${s}]`);return t},e.template=function(e,t,r,n,a){if(!t)return;if(i.isTemplate(t))return"root"!==r?t:null;let o=a.errors.language;if(s.isResolvable(o)&&(o=o.resolve(e,n,a)),o&&t[o]){if(void 0!==t[o][r])return t[o][r];if(void 0!==t[o]["*"])return t[o]["*"]}return t[r]?t[r]:t["*"]},e.label=function(t,s,i,r){if(!i.errors.label)return"";if(t.label)return t.label;let n=s.path;"key"===i.errors.label&&s.path.length>1&&(n=s.path.slice(-1));const a=e.path(n);return a||(e.template(null,i.messages,"root",s,i)||r&&e.template(null,r,"root",s,i)||"value")},e.process=function(t,s,i){if(!t)return null;const{override:r,message:n,details:a}=e.details(t);if(r)return r;if(i.errors.stack)return new e.ValidationError(n,a,s);const o=Error.stackTraceLimit;Error.stackTraceLimit=0;const l=new e.ValidationError(n,a,s);return Error.stackTraceLimit=o,l},e.details=function(e,t={}){let s=[];const i=[];for(const r of e){if(r instanceof Error){if(!1!==t.override)return{override:r};const e=r.toString();s.push(e),i.push({message:e,type:"override",context:{error:r}});continue}const e=r.toString();s.push(e),i.push({message:e,path:r.path.filter((e=>"object"!=typeof e)),type:r.code,context:r.local})}return s.length>1&&(s=[...new Set(s)]),{message:s.join(". "),details:i}},e.ValidationError=class extends Error{constructor(e,t,s){super(e),this._original=s,this.details=t}static isError(t){return t instanceof e.ValidationError}},e.ValidationError.prototype.isJoi=!0,e.ValidationError.prototype.name="ValidationError",e.ValidationError.prototype.annotate=t.error}(j)),j}var P,B,U,F,G,Z={};function X(){return P||(P=1,function(e){const t=c(),s=b,i=f,r=V();let n;const a={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};e.create=function(e,s={}){t("string"==typeof e,"Invalid reference key:",e),r.assertOptions(s,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),t(!s.prefix||"object"==typeof s.prefix,"options.prefix must be of type object");const i=Object.assign({},a.defaults,s);delete i.prefix;const n=i.separator,o=a.context(e,n,s.prefix);if(i.type=o.type,e=o.key,"value"===i.type)if(o.root&&(t(!n||e[0]!==n,"Cannot specify relative path with root prefix"),i.ancestor="root",e||(e=null)),n&&n===e)e=null,i.ancestor=0;else if(void 0!==i.ancestor)t(!n||!e||e[0]!==n,"Cannot combine prefix with ancestor option");else{const[t,s]=a.ancestor(e,n);s&&""===(e=e.slice(s))&&(e=null),i.ancestor=t}return i.path=n?null===e?[]:e.split(n):[e],new a.Ref(i)},e.in=function(t,s={}){return e.create(t,{...s,in:!0})},e.isRef=function(e){return!!e&&!!e[r.symbols.ref]},a.Ref=class{constructor(e){t("object"==typeof e,"Invalid reference construction"),r.assertOptions(e,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),t([!1,void 0].includes(e.separator)||"string"==typeof e.separator&&1===e.separator.length,"Invalid separator"),t(!e.adjust||"function"==typeof e.adjust,"options.adjust must be a function"),t(!e.map||Array.isArray(e.map),"options.map must be an array"),t(!e.map||!e.adjust,"Cannot set both map and adjust options"),Object.assign(this,a.defaults,e),t("value"===this.type||void 0===this.ancestor,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}resolve(e,s,i,r,n={}){return t(!this.in||n.in,"Invalid in() reference usage"),"global"===this.type?this._resolve(i.context,s,n):"local"===this.type?this._resolve(r,s,n):this.ancestor?"root"===this.ancestor?this._resolve(s.ancestors[s.ancestors.length-1],s,n):(t(this.ancestor<=s.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this._resolve(s.ancestors[this.ancestor-1],s,n)):this._resolve(e,s,n)}_resolve(e,t,s){let r;if("value"===this.type&&t.mainstay.shadow&&!1!==s.shadow&&(r=t.mainstay.shadow.get(this.absolute(t))),void 0===r&&(r=i(e,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(r=this.adjust(r)),this.map){const e=this.map.get(r);void 0!==e&&(r=e)}return t.mainstay&&t.mainstay.tracer.resolve(t,this,r),r}toString(){return this.display}absolute(e){return[...e.path.slice(0,-this.ancestor),...this.path]}clone(){return new a.Ref(this)}describe(){const e={path:this.path};"value"!==this.type&&(e.type=this.type),"."!==this.separator&&(e.separator=this.separator),"value"===this.type&&1!==this.ancestor&&(e.ancestor=this.ancestor),this.map&&(e.map=[...this.map]);for(const t of["adjust","iterables","render"])null!==this[t]&&void 0!==this[t]&&(e[t]=this[t]);return!1!==this.in&&(e.in=!0),{ref:e}}updateDisplay(){const e=null!==this.key?this.key:"";if("value"!==this.type)return void(this.display=`ref:${this.type}:${e}`);if(!this.separator)return void(this.display=`ref:${e}`);if(!this.ancestor)return void(this.display=`ref:${this.separator}${e}`);if("root"===this.ancestor)return void(this.display=`ref:root:${e}`);if(1===this.ancestor)return void(this.display=`ref:${e||".."}`);const t=new Array(this.ancestor+1).fill(this.separator).join("");this.display=`ref:${t}${e||""}`}},a.Ref.prototype[r.symbols.ref]=!0,e.build=function(e){return"value"===(e=Object.assign({},a.defaults,e)).type&&void 0===e.ancestor&&(e.ancestor=1),new a.Ref(e)},a.context=function(e,t,s={}){if(e=e.trim(),s){const i=void 0===s.global?"$":s.global;if(i!==t&&e.startsWith(i))return{key:e.slice(i.length),type:"global"};const r=void 0===s.local?"#":s.local;if(r!==t&&e.startsWith(r))return{key:e.slice(r.length),type:"local"};const n=void 0===s.root?"/":s.root;if(n!==t&&e.startsWith(n))return{key:e.slice(n.length),type:"value",root:!0}}return{key:e,type:"value"}},a.ancestor=function(e,t){if(!t)return[1,0];if(e[0]!==t)return[1,0];if(e[1]!==t)return[0,1];let s=2;for(;e[s]===t;)++s;return[s-1,s]},e.toSibling=0,e.toParent=1,e.Manager=class{constructor(){this.refs=[]}register(t,s){if(t)if(s=void 0===s?e.toParent:s,Array.isArray(t))for(const e of t)this.register(e,s);else if(r.isSchema(t))for(const e of t._refs.refs)e.ancestor-s>=0&&this.refs.push({ancestor:e.ancestor-s,root:e.root});else e.isRef(t)&&"value"===t.type&&t.ancestor-s>=0&&this.refs.push({ancestor:t.ancestor-s,root:t.root}),n=n||H(),n.isTemplate(t)&&this.register(t.refs(),s)}get length(){return this.refs.length}clone(){const t=new e.Manager;return t.refs=s(this.refs),t}reset(){this.refs=[]}roots(){return this.refs.filter((e=>!e.ancestor)).map((e=>e.root))}}}(Z)),Z}function H(){return B||(B=1,function(e){const t=c(),s=b,i=I,r=k,n=V(),a=M(),o=X(),l={symbol:Symbol("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join(""),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};e.exports=l.Template=class{constructor(e,i){if(t("string"==typeof e,"Template source must be a string"),t(!e.includes("\0")&&!e.includes(""),"Template source cannot contain reserved control characters"),this.source=e,this.rendered=e,this._template=null,i){const{functions:e,...r}=i;this._settings=Object.keys(r).length?s(r):void 0,this._functions=e,this._functions&&(t(Object.keys(this._functions).every((e=>"string"==typeof e)),"Functions keys must be strings"),t(Object.values(this._functions).every((e=>"function"==typeof e)),"Functions values must be functions"))}else this._settings=void 0,this._functions=void 0;this._parse()}_parse(){if(!this.source.includes("{"))return;const e=l.encode(this.source),t=l.split(e);let s=!1;const i=[],r=t.shift();r&&i.push(r);for(const e of t){const t="{"!==e[0],r=t?"}":"}}",n=e.indexOf(r);if(-1===n||"{"===e[1]){i.push(`{${l.decode(e)}`);continue}let a=e.slice(t?0:1,n);const o=":"===a[0];o&&(a=a.slice(1));const c=this._ref(l.decode(a),{raw:t,wrapped:o});i.push(c),"string"!=typeof c&&(s=!0);const d=e.slice(n+r.length);d&&i.push(l.decode(d))}s?this._template=i:this.rendered=i.join("")}static date(e,t){return l.dateFormat[t.dateFormat].call(e)}describe(e={}){if(!this._settings&&e.compact)return this.source;const t={template:this.source};return this._settings&&(t.options=this._settings),this._functions&&(t.functions=this._functions),t}static build(e){return new l.Template(e.template,e.options||e.functions?{...e.options,functions:e.functions}:void 0)}isDynamic(){return!!this._template}static isTemplate(e){return!!e&&!!e[n.symbols.template]}refs(){if(!this._template)return;const e=[];for(const t of this._template)"string"!=typeof t&&e.push(...t.refs);return e}resolve(e,t,s,i){return this._template&&1===this._template.length?this._part(this._template[0],e,t,s,i,{}):this.render(e,t,s,i)}_part(e,...t){return e.ref?e.ref.resolve(...t):e.formula.evaluate(t)}render(e,t,s,r,n={}){if(!this.isDynamic())return this.rendered;const a=[];for(const o of this._template)if("string"==typeof o)a.push(o);else{const c=this._part(o,e,t,s,r,n),d=l.stringify(c,e,t,s,r,n);if(void 0!==d){const e=o.raw||!1===(n.errors&&n.errors.escapeHtml)?d:i(d);a.push(l.wrap(e,o.wrapped&&s.errors.wrap.label))}}return a.join("")}_ref(e,{raw:t,wrapped:s}){const i=[],n=e=>{const t=o.create(e,this._settings);return i.push(t),e=>{const s=t.resolve(...e);return void 0!==s?s:null}};try{const t=this._functions?{...l.functions,...this._functions}:l.functions;var a=new r.Parser(e,{reference:n,functions:t,constants:l.constants})}catch(t){throw t.message=`Invalid template variable "${e}" fails due to: ${t.message}`,t}if(a.single){if("reference"===a.single.type){const e=i[0];return{ref:e,raw:t,refs:i,wrapped:s||"local"===e.type&&"label"===e.key}}return l.stringify(a.single.value)}return{formula:a,raw:t,refs:i}}toString(){return this.source}},l.Template.prototype[n.symbols.template]=!0,l.Template.prototype.isImmutable=!0,l.encode=function(e){return e.replace(/\\(\{+)/g,((e,t)=>l.opens.slice(0,t.length))).replace(/\\(\}+)/g,((e,t)=>l.closes.slice(0,t.length)))},l.decode=function(e){return e.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},l.split=function(e){const t=[];let s="";for(let i=0;i<e.length;++i){const r=e[i];if("{"===r){let r="";for(;i+1<e.length&&"{"===e[i+1];)r+="{",++i;t.push(s),s=r}else s+=r}return t.push(s),t},l.wrap=function(e,t){return t?1===t.length?`${t}${e}${t}`:`${t[0]}${e}${t[1]}`:e},l.stringify=function(e,t,s,i,r,n={}){const a=typeof e,c=i&&i.errors&&i.errors.wrap||{};let d=!1;if(o.isRef(e)&&e.render&&(d=e.in,e=e.resolve(t,s,i,r,{in:e.in,...n})),null===e)return"null";if("string"===a)return l.wrap(e,n.arrayItems&&c.string);if("number"===a||"function"===a||"symbol"===a)return e.toString();if("object"!==a)return JSON.stringify(e);if(e instanceof Date)return l.Template.date(e,i);if(e instanceof Map){const t=[];for(const[s,i]of e.entries())t.push(`${s.toString()} -> ${i.toString()}`);e=t}if(!Array.isArray(e))return e.toString();const u=[];for(const a of e)u.push(l.stringify(a,t,s,i,r,{arrayItems:!0,...n}));return l.wrap(u.join(", "),!d&&c.array)},l.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},l.functions={if:(e,t,s)=>e?t:s,length:e=>"string"==typeof e?e.length:e&&"object"==typeof e?Array.isArray(e)?e.length:Object.keys(e).length:null,msg(e){const[t,s,i,r,n]=this,o=n.messages;if(!o)return"";const l=a.template(t,o[0],e,s,i)||a.template(t,o[1],e,s,i);return l?l.render(t,s,i,r,n):""},number:e=>"number"==typeof e?e:"string"==typeof e?parseFloat(e):"boolean"==typeof e?e?1:0:e instanceof Date?e.getTime():null}}(x)),x.exports}function K(){return U||(U=1,function(e){const t=c(),s=b,i=H();e.compile=function(e,r){if("string"==typeof e)return t(!r,"Cannot set single message string"),new i(e);if(i.isTemplate(e))return t(!r,"Cannot set single message template"),e;t("object"==typeof e&&!Array.isArray(e),"Invalid message options"),r=r?s(r):{};for(let s in e){const n=e[s];if("root"===s||i.isTemplate(n)){r[s]=n;continue}if("string"==typeof n){r[s]=new i(n);continue}t("object"==typeof n&&!Array.isArray(n),"Invalid message for",s);const a=s;for(s in r[a]=r[a]||{},n){const e=n[s];"root"===s||i.isTemplate(e)?r[a][s]=e:(t("string"==typeof e,"Invalid message for",s,"in",a),r[a][s]=new i(e))}}return r},e.decompile=function(e){const t={};for(let s in e){const r=e[s];if("root"===s){t.root=r;continue}if(i.isTemplate(r)){t[s]=r.describe({compact:!0});continue}const n=s;for(s in t[n]={},r){const e=r[s];"root"!==s?t[n][s]=e.describe({compact:!0}):t[n].root=e}}return t},e.merge=function(r,n){if(!r)return e.compile(n);if(!n)return r;if("string"==typeof n)return new i(n);if(i.isTemplate(n))return n;const a=s(r);for(let e in n){const s=n[e];if("root"===e||i.isTemplate(s)){a[e]=s;continue}if("string"==typeof s){a[e]=new i(s);continue}t("object"==typeof s&&!Array.isArray(s),"Invalid message for",e);const r=e;for(e in a[r]=a[r]||{},s){const n=s[e];"root"===e||i.isTemplate(n)?a[r][e]=n:(t("string"==typeof n,"Invalid message for",e,"in",r),a[r][e]=new i(n))}}return a}}($)),$}function V(){return F||(F=1,function(e){const t=c(),s=l,i=R;let r,n;const a={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};e.version=i.version,e.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},e.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),errors:Symbol("errors"),literal:Symbol("literal"),override:Symbol("override"),parent:Symbol("parent"),prefs:Symbol("prefs"),ref:Symbol("ref"),template:Symbol("template"),values:Symbol("values")},e.assertOptions=function(e,s,i="Options"){t(e&&"object"==typeof e&&!Array.isArray(e),"Options must be of type object");const r=Object.keys(e).filter((e=>!s.includes(e)));t(0===r.length,`${i} contain unknown keys: ${r}`)},e.checkPreferences=function(e){n=n||O();const t=n.preferences.validate(e);if(t.error)throw new s([t.error.details[0].message])},e.compare=function(e,t,s){switch(s){case"=":return e===t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}},e.default=function(e,t){return void 0===e?t:e},e.isIsoDate=function(e){return a.isoDate.test(e)},e.isNumber=function(e){return"number"==typeof e&&!isNaN(e)},e.isResolvable=function(t){return!!t&&(t[e.symbols.ref]||t[e.symbols.template])},e.isSchema=function(s,i={}){const r=s&&s[e.symbols.any];return!!r&&(t(i.legacy||r.version===e.version,"Cannot mix different versions of joi schemas"),!0)},e.isValues=function(t){return t[e.symbols.values]},e.limit=function(e){return Number.isSafeInteger(e)&&e>=0},e.preferences=function(t,s){r=r||K(),t=t||{},s=s||{};const i=Object.assign({},t,s);return s.errors&&t.errors&&(i.errors=Object.assign({},t.errors,s.errors),i.errors.wrap=Object.assign({},t.errors.wrap,s.errors.wrap)),s.messages&&(i.messages=r.compile(s.messages,t.messages)),delete i[e.symbols.prefs],i},e.tryWithPath=function(e,t,s={}){try{return e()}catch(e){throw void 0!==e.path?e.path=t+"."+e.path:e.path=t,s.append&&(e.message=`${e.message} (${e.path})`),e}},e.validateArg=function(t,s,{assert:i,message:r}){if(e.isSchema(i)){const e=i.validate(t);if(!e.error)return;return e.error.message}if(!i(t))return s?`${s} ${r}`:r},e.verifyFlat=function(e,s){for(const i of e)t(!Array.isArray(i),"Method no longer accepts array arguments:",s)}}(E)),E}function q(){if(G)return A;G=1;const e=c(),t=b,s=V(),i={max:1e3,supported:new Set(["undefined","boolean","number","string"])};return A.provider={provision:e=>new i.Cache(e)},i.Cache=class{constructor(t={}){s.assertOptions(t,["max"]),e(void 0===t.max||t.max&&t.max>0&&isFinite(t.max),"Invalid max cache size"),this._max=t.max||i.max,this._map=new Map,this._list=new i.List}get length(){return this._map.size}set(e,t){if(null!==e&&!i.supported.has(typeof e))return;let s=this._map.get(e);if(s)return s.value=t,void this._list.first(s);s=this._list.unshift({key:e,value:t}),this._map.set(e,s),this._compact()}get(e){const s=this._map.get(e);if(s)return this._list.first(s),t(s.value)}_compact(){if(this._map.size>this._max){const e=this._list.pop();this._map.delete(e.key)}}},i.List=class{constructor(){this.tail=null,this.head=null}unshift(e){return e.next=null,e.prev=this.head,this.head&&(this.head.next=e),this.head=e,this.tail||(this.tail=e),e}first(e){e!==this.head&&(this._remove(e),this.unshift(e))}pop(){return this._remove(this.tail)}_remove(e){const{next:t,prev:s}=e;return t.prev=s,s&&(s.next=t),e===this.tail&&(this.tail=t),e.prev=null,e.next=null,e}},A}var W,z={};function Y(){return W||(W=1,function(e){const t=c(),s=V(),i=X(),r={};e.schema=function(e,t,i={}){s.assertOptions(i,["appendPath","override"]);try{return r.schema(e,t,i)}catch(e){throw i.appendPath&&void 0!==e.path&&(e.message=`${e.message} (${e.path})`),e}},r.schema=function(e,i,n){t(void 0!==i,"Invalid undefined schema"),Array.isArray(i)&&(t(i.length,"Invalid empty array schema"),1===i.length&&(i=i[0]));const a=(t,...s)=>!1!==n.override?t.valid(e.override,...s):t.valid(...s);if(r.simple(i))return a(e,i);if("function"==typeof i)return e.custom(i);if(t("object"==typeof i,"Invalid schema content:",typeof i),s.isResolvable(i))return a(e,i);if(s.isSchema(i))return i;if(Array.isArray(i)){for(const t of i)if(!r.simple(t))return e.alternatives().try(...i);return a(e,...i)}return i instanceof RegExp?e.string().regex(i):i instanceof Date?a(e.date(),i):(t(Object.getPrototypeOf(i)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),e.object().keys(i))},e.ref=function(e,t){return i.isRef(e)?e:i.create(e,t)},e.compile=function(i,n,a={}){s.assertOptions(a,["legacy"]);const o=n&&n[s.symbols.any];if(o)return t(a.legacy||o.version===s.version,"Cannot mix different versions of joi schemas:",o.version,s.version),n;if("object"!=typeof n||!a.legacy)return e.schema(i,n,{appendPath:!0});const l=r.walk(n);return l?l.compile(l.root,n):e.schema(i,n,{appendPath:!0})},r.walk=function(e){if("object"!=typeof e)return null;if(Array.isArray(e)){for(const t of e){const e=r.walk(t);if(e)return e}return null}const i=e[s.symbols.any];if(i)return{root:e[i.root],compile:i.compile};t(Object.getPrototypeOf(e)===Object.getPrototypeOf({}),"Schema can only contain plain objects");for(const t in e){const s=r.walk(e[t]);if(s)return s}return null},r.simple=function(e){return null===e||["boolean","string","number"].includes(typeof e)},e.when=function(n,a,o){if(void 0===o&&(t(a&&"object"==typeof a,"Missing options"),o=a,a=i.create(".")),Array.isArray(o)&&(o={switch:o}),s.assertOptions(o,["is","not","then","otherwise","switch","break"]),s.isSchema(a))return t(void 0===o.is,'"is" can not be used with a schema condition'),t(void 0===o.not,'"not" can not be used with a schema condition'),t(void 0===o.switch,'"switch" can not be used with a schema condition'),r.condition(n,{is:a,then:o.then,otherwise:o.otherwise,break:o.break});if(t(i.isRef(a)||"string"==typeof a,"Invalid condition:",a),t(void 0===o.not||void 0===o.is,'Cannot combine "is" with "not"'),void 0===o.switch){let l=o;void 0!==o.not&&(l={is:o.not,then:o.otherwise,otherwise:o.then,break:o.break});let c=void 0!==l.is?n.$_compile(l.is):n.$_root.invalid(null,!1,0,"").required();return t(void 0!==l.then||void 0!==l.otherwise,'options must have at least one of "then", "otherwise", or "switch"'),t(void 0===l.break||void 0===l.then||void 0===l.otherwise,"Cannot specify then, otherwise, and break all together"),void 0===o.is||i.isRef(o.is)||s.isSchema(o.is)||(c=c.required()),r.condition(n,{ref:e.ref(a),is:c,then:l.then,otherwise:l.otherwise,break:l.break})}t(Array.isArray(o.switch),'"switch" must be an array'),t(void 0===o.is,'Cannot combine "switch" with "is"'),t(void 0===o.not,'Cannot combine "switch" with "not"'),t(void 0===o.then,'Cannot combine "switch" with "then"');const l={ref:e.ref(a),switch:[],break:o.break};for(let e=0;e<o.switch.length;++e){const r=o.switch[e],a=e===o.switch.length-1;s.assertOptions(r,a?["is","then","otherwise"]:["is","then"]),t(void 0!==r.is,'Switch statement missing "is"'),t(void 0!==r.then,'Switch statement missing "then"');const c={is:n.$_compile(r.is),then:n.$_compile(r.then)};if(i.isRef(r.is)||s.isSchema(r.is)||(c.is=c.is.required()),a){t(void 0===o.otherwise||void 0===r.otherwise,'Cannot specify "otherwise" inside and outside a "switch"');const e=void 0!==o.otherwise?o.otherwise:r.otherwise;void 0!==e&&(t(void 0===l.break,"Cannot specify both otherwise and break"),c.otherwise=n.$_compile(e))}l.switch.push(c)}return l},r.condition=function(e,t){for(const s of["then","otherwise"])void 0===t[s]?delete t[s]:t[s]=e.$_compile(t[s]);return t}}(z)),z}var J,Q={};function ee(){if(J)return Q;J=1;const e=c(),t=b,s=V(),i=K(),r={};return Q.type=function(n,a){const o=Object.getPrototypeOf(n),l=t(o),c=n._assign(Object.create(l)),d=Object.assign({},a);delete d.base,l._definition=d;const u=o._definition||{};d.messages=i.merge(u.messages,d.messages),d.properties=Object.assign({},u.properties,d.properties),c.type=d.type,d.flags=Object.assign({},u.flags,d.flags);const f=Object.assign({},u.terms);if(d.terms)for(const t in d.terms){const s=d.terms[t];e(void 0===c.$_terms[t],"Invalid term override for",d.type,t),c.$_terms[t]=s.init,f[t]=s}d.terms=f,d.args||(d.args=u.args),d.prepare=r.prepare(d.prepare,u.prepare),d.coerce&&("function"==typeof d.coerce&&(d.coerce={method:d.coerce}),d.coerce.from&&!Array.isArray(d.coerce.from)&&(d.coerce={method:d.coerce.method,from:[].concat(d.coerce.from)})),d.coerce=r.coerce(d.coerce,u.coerce),d.validate=r.validate(d.validate,u.validate);const p=Object.assign({},u.rules);if(d.rules)for(const t in d.rules){const i=d.rules[t];e("object"==typeof i,"Invalid rule definition for",d.type,t);let r=i.method;if(void 0===r&&(r=function(){return this.$_addRule(t)}),r&&(e(!l[t],"Rule conflict in",d.type,t),l[t]=r),e(!p[t],"Rule conflict in",d.type,t),p[t]=i,i.alias){const e=[].concat(i.alias);for(const t of e)l[t]=i.method}i.args&&(i.argsByName=new Map,i.args=i.args.map((t=>("string"==typeof t&&(t={name:t}),e(!i.argsByName.has(t.name),"Duplicated argument name",t.name),s.isSchema(t.assert)&&(t.assert=t.assert.strict().label(t.name)),i.argsByName.set(t.name,t),t))))}d.rules=p;const h=Object.assign({},u.modifiers);if(d.modifiers)for(const t in d.modifiers){e(!l[t],"Rule conflict in",d.type,t);const s=d.modifiers[t];e("function"==typeof s,"Invalid modifier definition for",d.type,t);const i=function(e){return this.rule({[t]:e})};l[t]=i,h[t]=s}if(d.modifiers=h,d.overrides){l._super=o,c.$_super={};for(const t in d.overrides)e(o[t],"Cannot override missing",t),d.overrides[t][s.symbols.parent]=o[t],c.$_super[t]=o[t].bind(c);Object.assign(l,d.overrides)}d.cast=Object.assign({},u.cast,d.cast);const m=Object.assign({},u.manifest,d.manifest);return m.build=r.build(d.manifest&&d.manifest.build,u.manifest&&u.manifest.build),d.manifest=m,d.rebuild=r.rebuild(d.rebuild,u.rebuild),c},r.build=function(e,t){return e&&t?function(s,i){return t(e(s,i),i)}:e||t},r.coerce=function(e,t){return e&&t?{from:e.from&&t.from?[...new Set([...e.from,...t.from])]:null,method(s,i){let r;if((!t.from||t.from.includes(typeof s))&&(r=t.method(s,i),r)){if(r.errors||void 0===r.value)return r;s=r.value}if(!e.from||e.from.includes(typeof s)){const t=e.method(s,i);if(t)return t}return r}}:e||t},r.prepare=function(e,t){return e&&t?function(s,i){const r=e(s,i);if(r){if(r.errors||void 0===r.value)return r;s=r.value}return t(s,i)||r}:e||t},r.rebuild=function(e,t){return e&&t?function(s){t(s),e(s)}:e||t},r.validate=function(e,t){return e&&t?function(s,i){const r=t(s,i);if(r){if(r.errors&&(!Array.isArray(r.errors)||r.errors.length))return r;s=r.value}return e(s,i)||r}:e||t},Q}var te,se={};function ie(){if(te)return se;te=1;const e=c(),t=b,s=V(),i=K(),r=X(),n=H();let a;const o={};return se.describe=function(r){const n=r._definition,a={type:r.type,flags:{},rules:[]};for(const e in r._flags)"_"!==e[0]&&(a.flags[e]=o.describe(r._flags[e]));Object.keys(a.flags).length||delete a.flags,r._preferences&&(a.preferences=t(r._preferences,{shallow:["messages"]}),delete a.preferences[s.symbols.prefs],a.preferences.messages&&(a.preferences.messages=i.decompile(a.preferences.messages))),r._valids&&(a.allow=r._valids.describe()),r._invalids&&(a.invalid=r._invalids.describe());for(const e of r._rules){if(!1===n.rules[e.name].manifest)continue;const t={name:e.name};for(const s in n.modifiers)void 0!==e[s]&&(t[s]=o.describe(e[s]));if(e.args){t.args={};for(const s in e.args){const i=e.args[s];("options"!==s||Object.keys(i).length)&&(t.args[s]=o.describe(i,{assign:s}))}Object.keys(t.args).length||delete t.args}a.rules.push(t)}a.rules.length||delete a.rules;for(const t in r.$_terms){if("_"===t[0])continue;e(!a[t],"Cannot describe schema due to internal name conflict with",t);const i=r.$_terms[t];if(!i)continue;if(i instanceof Map){i.size&&(a[t]=[...i.entries()]);continue}if(s.isValues(i)){a[t]=i.describe();continue}e(n.terms[t],"Term",t,"missing configuration");const l=n.terms[t].manifest,c="object"==typeof l;if(!i.length&&!c)continue;const d=[];for(const e of i)d.push(o.describe(e));if(c){const{from:e,to:s}=l.mapped;a[t]={};for(const i of d)a[t][i[s]]=i[e]}else"single"!==l?a[t]=d:(e(1===d.length,"Term",t,"contains more than one item"),a[t]=d[0])}return o.validate(r.$_root,a),a},o.describe=function(e,i={}){if(Array.isArray(e))return e.map(o.describe);if(e===s.symbols.deepDefault)return{special:"deep"};if("object"!=typeof e||null===e)return e;if("options"===i.assign)return t(e);if(Buffer&&Buffer.isBuffer(e))return{buffer:e.toString("binary")};if(e instanceof Date)return e.toISOString();if(e instanceof Error)return e;if(e instanceof RegExp)return"regex"===i.assign?e.toString():{regex:e.toString()};if(e[s.symbols.literal])return{function:e.literal};if("function"==typeof e.describe)return"ref"===i.assign?e.describe().ref:e.describe();const r={};for(const t in e){const s=e[t];void 0!==s&&(r[t]=o.describe(s,{assign:t}))}return r},se.build=function(e,t){return new o.Builder(e).parse(t)},o.Builder=class{constructor(e){this.joi=e}parse(t){o.validate(this.joi,t);let s=this.joi[t.type]()._bare();const i=s._definition;if(t.flags)for(const r in t.flags){const n=i.flags[r]&&i.flags[r].setter||r;e("function"==typeof s[n],"Invalid flag",r,"for type",t.type),s=s[n](this.build(t.flags[r]))}if(t.preferences&&(s=s.preferences(this.build(t.preferences))),t.allow&&(s=s.allow(...this.build(t.allow))),t.invalid&&(s=s.invalid(...this.build(t.invalid))),t.rules)for(const r of t.rules){e("function"==typeof s[r.name],"Invalid rule",r.name,"for type",t.type);const n=[];if(r.args){const s={};for(const e in r.args)s[e]=this.build(r.args[e],{assign:e});const a=Object.keys(s),o=i.rules[r.name].args;if(o){e(a.length<=o.length,"Invalid number of arguments for",t.type,r.name,"(expected up to",o.length,", found",a.length,")");for(const{name:e}of o)n.push(s[e])}else e(1===a.length,"Invalid number of arguments for",t.type,r.name,"(expected up to 1, found",a.length,")"),n.push(s[a[0]])}s=s[r.name](...n);const a={};for(const e in i.modifiers)void 0!==r[e]&&(a[e]=this.build(r[e]));Object.keys(a).length&&(s=s.rule(a))}const r={};for(const s in t){if(["allow","flags","invalid","whens","preferences","rules","type"].includes(s))continue;e(i.terms[s],"Term",s,"missing configuration");const n=i.terms[s].manifest;if("schema"!==n)if("values"!==n)if("single"!==n)if("object"!=typeof n)r[s]=this.build(t[s]);else{r[s]={};for(const e in t[s]){const i=t[s][e];r[s][e]=this.parse(i)}}else r[s]=this.build(t[s]);else r[s]=t[s].map((e=>this.build(e)));else r[s]=t[s].map((e=>this.parse(e)))}return t.whens&&(r.whens=t.whens.map((e=>this.build(e)))),s=i.manifest.build(s,r),s.$_temp.ruleset=!1,s}build(i,a={}){if(null===i)return null;if(Array.isArray(i))return i.map((e=>this.build(e)));if(i instanceof Error)return i;if("options"===a.assign)return t(i);if("regex"===a.assign)return o.regex(i);if("ref"===a.assign)return r.build(i);if("object"!=typeof i)return i;if(1===Object.keys(i).length){if(i.buffer)return e(Buffer,"Buffers are not supported"),Buffer&&Buffer.from(i.buffer,"binary");if(i.function)return{[s.symbols.literal]:!0,literal:i.function};if(i.override)return s.symbols.override;if(i.ref)return r.build(i.ref);if(i.regex)return o.regex(i.regex);if(i.special)return e(["deep"].includes(i.special),"Unknown special value",i.special),s.symbols.deepDefault;if(i.value)return t(i.value)}if(i.type)return this.parse(i);if(i.template)return n.build(i);const l={};for(const e in i)l[e]=this.build(i[e],{assign:e});return l}},o.regex=function(e){const t=e.lastIndexOf("/"),s=e.slice(1,t),i=e.slice(t+1);return new RegExp(s,i)},o.validate=function(e,t){a=a||O(),e.assert(t,a.description)},se}var re={};const ne=h,ae={mismatched:null};var oe=function(e,t,s){return s=Object.assign({prototype:!0},s),!!ae.isDeepEqual(e,t,s,[])};ae.isDeepEqual=function(e,t,s,i){if(e===t)return 0!==e||1/e==1/t;const r=typeof e;if(r!==typeof t)return!1;if(null===e||null===t)return!1;if("function"===r){if(!s.deepFunction||e.toString()!==t.toString())return!1}else if("object"!==r)return e!=e&&t!=t;const n=ae.getSharedType(e,t,!!s.prototype);switch(n){case ne.buffer:return Buffer&&Buffer.prototype.equals.call(e,t);case ne.promise:return e===t;case ne.regex:return e.toString()===t.toString();case ae.mismatched:return!1}for(let s=i.length-1;s>=0;--s)if(i[s].isSame(e,t))return!0;i.push(new ae.SeenEntry(e,t));try{return!!ae.isDeepEqualObj(n,e,t,s,i)}finally{i.pop()}},ae.getSharedType=function(e,t,s){if(s)return Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?ae.mismatched:ne.getInternalProto(e);const i=ne.getInternalProto(e);return i!==ne.getInternalProto(t)?ae.mismatched:i},ae.valueOf=function(e){const t=e.valueOf;if(void 0===t)return e;try{return t.call(e)}catch(e){return e}},ae.hasOwnEnumerableProperty=function(e,t){return Object.prototype.propertyIsEnumerable.call(e,t)},ae.isSetSimpleEqual=function(e,t){for(const s of Set.prototype.values.call(e))if(!Set.prototype.has.call(t,s))return!1;return!0},ae.isDeepEqualObj=function(e,t,s,i,r){const{isDeepEqual:n,valueOf:a,hasOwnEnumerableProperty:o}=ae,{keys:l,getOwnPropertySymbols:c}=Object;if(e===ne.array){if(!i.part){if(t.length!==s.length)return!1;for(let e=0;e<t.length;++e)if(!n(t[e],s[e],i,r))return!1;return!0}for(const e of t)for(const t of s)if(n(e,t,i,r))return!0}else if(e===ne.set){if(t.size!==s.size)return!1;if(!ae.isSetSimpleEqual(t,s)){const e=new Set(Set.prototype.values.call(s));for(const s of Set.prototype.values.call(t)){if(e.delete(s))continue;let t=!1;for(const a of e)if(n(s,a,i,r)){e.delete(a),t=!0;break}if(!t)return!1}}}else if(e===ne.map){if(t.size!==s.size)return!1;for(const[e,a]of Map.prototype.entries.call(t)){if(void 0===a&&!Map.prototype.has.call(s,e))return!1;if(!n(a,Map.prototype.get.call(s,e),i,r))return!1}}else if(e===ne.error&&(t.name!==s.name||t.message!==s.message))return!1;const d=a(t),u=a(s);if((t!==d||s!==u)&&!n(d,u,i,r))return!1;const f=l(t);if(!i.part&&f.length!==l(s).length&&!i.skip)return!1;let p=0;for(const e of f)if(i.skip&&i.skip.includes(e))void 0===s[e]&&++p;else{if(!o(s,e))return!1;if(!n(t[e],s[e],i,r))return!1}if(!i.part&&f.length-p!==l(s).length)return!1;if(!1!==i.symbols){const e=c(t),a=new Set(c(s));for(const l of e){if(!i.skip||!i.skip.includes(l))if(o(t,l)){if(!o(s,l))return!1;if(!n(t[l],s[l],i,r))return!1}else if(o(s,l))return!1;a.delete(l)}for(const e of a)if(o(s,e))return!1}return!0},ae.SeenEntry=class{constructor(e,t){this.obj=e,this.ref=t}isSame(e,t){return this.obj===e&&this.ref===t}};var le,ce={};function de(){if(le)return re;le=1;const e=oe,t=ce,s=M(),i={codes:{error:1,pass:2,full:3},labels:{0:"never used",1:"always error",2:"always pass"}};return re.setup=function(e){const t=function(){return e._tracer=e._tracer||new i.Tracer,e._tracer};e.trace=t,e[Symbol.for("@hapi/lab/coverage/initialize")]=t,e.untrace=()=>{e._tracer=null}},re.location=function(e){return e.$_setFlag("_tracerLocation",t.location(2))},i.Tracer=class{constructor(){this.name="Joi",this._schemas=new Map}_register(e){const s=this._schemas.get(e);if(s)return s.store;const r=new i.Store(e),{filename:n,line:a}=e._flags._tracerLocation||t.location(5);return this._schemas.set(e,{filename:n,line:a,store:r}),r}_combine(e,t){for(const{store:s}of this._schemas.values())s._combine(e,t)}report(e){const t=[];for(const{filename:s,line:r,store:n}of this._schemas.values()){if(e&&e!==s)continue;const a=[],o=[];for(const[e,t]of n._sources.entries()){if(i.sub(t.paths,o))continue;if(!t.entry){a.push({status:"never reached",paths:[...t.paths]}),o.push(...t.paths);continue}for(const s of["valid","invalid"]){const i=e[`_${s}s`];if(!i)continue;const r=new Set(i._values),n=new Set(i._refs);for(const{value:e,ref:i}of t[s])r.delete(e),n.delete(i);(r.size||n.size)&&a.push({status:[...r,...[...n].map((e=>e.display))],rule:`${s}s`})}const s=e._rules.map((e=>e.name));for(const t of["default","failover"])void 0!==e._flags[t]&&s.push(t);for(const e of s){const s=i.labels[t.rule[e]||0];if(s){const i={rule:e,status:s};t.paths.size&&(i.paths=[...t.paths]),a.push(i)}}}a.length&&t.push({filename:s,line:r,missing:a,severity:"error",message:`Schema missing tests for ${a.map(i.message).join(", ")}`})}return t.length?t:null}},i.Store=class{constructor(e){this.active=!0,this._sources=new Map,this._combos=new Map,this._scan(e)}debug(e,t,s,i){e.mainstay.debug&&e.mainstay.debug.push({type:t,name:s,result:i,path:e.path})}entry(e,t){i.debug(t,{type:"entry"}),this._record(e,(e=>{e.entry=!0}))}filter(e,t,s,r){i.debug(t,{type:s,...r}),this._record(e,(e=>{e[s].add(r)}))}log(e,t,s,r,n){i.debug(t,{type:s,name:r,result:"full"===n?"pass":n}),this._record(e,(e=>{e[s][r]=e[s][r]||0,e[s][r]|=i.codes[n]}))}resolve(e,t,s){if(!e.mainstay.debug)return;const i={type:"resolve",ref:t.display,to:s,path:e.path};e.mainstay.debug.push(i)}value(t,s,i,r,n){if(!t.mainstay.debug||e(i,r))return;const a={type:"value",by:s,from:i,to:r,path:t.path};n&&(a.name=n),t.mainstay.debug.push(a)}_record(e,t){const s=this._sources.get(e);if(s)return void t(s);const i=this._combos.get(e);for(const e of i)this._record(e,t)}_scan(e,t){const s=t||[];let r=this._sources.get(e);r||(r={paths:new Set,entry:!1,rule:{},valid:new Set,invalid:new Set},this._sources.set(e,r)),s.length&&r.paths.add(s);e.$_modify({each:(e,t)=>{const r=i.id(e,t);this._scan(e,s.concat(r))},ref:!1})}_combine(e,t){this._combos.set(e,t)}},i.message=function(e){return`${e.paths?s.path(e.paths[0])+(e.rule?":":""):""}${e.rule||""} (${e.status})`},i.id=function(e,{source:t,name:s,path:i,key:r}){return e._flags.id?e._flags.id:r||(s=`@${s}`,"terms"===t?[s,i[Math.min(i.length-1,1)]]:s)},i.sub=function(t,s){for(const i of t)for(const t of s)if(e(i.slice(0,t.length),t))return!0;return!1},i.debug=function(e,t){e.mainstay.debug&&(t.path=e.debug?[...e.path,e.debug]:e.path,e.mainstay.debug.push(t))},re}ce.location=function(e=0){const t=Error.prepareStackTrace;Error.prepareStackTrace=(e,t)=>t;const s={};Error.captureStackTrace(s,this);const i=s.stack[e+1];return Error.prepareStackTrace=t,{filename:i.getFileName(),line:i.getLineNumber()}};const ue=c(),fe=b,pe=m,he={};var me,_e=he.merge=function(e,t,s){if(ue(e&&"object"==typeof e,"Invalid target value: must be an object"),ue(null==t||"object"==typeof t,"Invalid source value: must be null, undefined, or an object"),!t)return e;if(s=Object.assign({nullOverride:!0,mergeArrays:!0},s),Array.isArray(t)){ue(Array.isArray(e),"Cannot merge array onto an object"),s.mergeArrays||(e.length=0);for(let i=0;i<t.length;++i)e.push(fe(t[i],{symbols:s.symbols}));return e}const i=pe.keys(t,s);for(let r=0;r<i.length;++r){const n=i[r];if("__proto__"===n||!Object.prototype.propertyIsEnumerable.call(t,n))continue;const a=t[n];if(a&&"object"==typeof a){if(e[n]===a)continue;!e[n]||"object"!=typeof e[n]||Array.isArray(e[n])!==Array.isArray(a)||a instanceof Date||Buffer&&Buffer.isBuffer(a)||a instanceof RegExp?e[n]=fe(a,{symbols:s.symbols}):he.merge(e[n],a,s)}else(null!=a||s.nullOverride)&&(e[n]=a)}return e},ge={};var ye,ve,be,we,Ae,Ee,Re,Se,Oe,$e,xe,Ne,Ie,ke,Te,Ce,je,Le={},De=function(){};function Me(){return be||(be=1,function(e){const t=c(),s=b,i=De,r=f,n=V(),a=M(),o=function(){if(ve)return ye;ve=1;const e=b,t=f,s=V(),i={value:Symbol("value")};return ye=i.State=class{constructor(e,t,s){this.path=e,this.ancestors=t,this.mainstay=s.mainstay,this.schemas=s.schemas,this.debug=null}localize(e,t=null,s=null){const r=new i.State(e,t,this);return s&&r.schemas&&(r.schemas=[i.schemas(s),...r.schemas]),r}nest(e,t){const s=new i.State(this.path,this.ancestors,this);return s.schemas=s.schemas&&[i.schemas(e),...s.schemas],s.debug=t,s}shadow(e,t){this.mainstay.shadow=this.mainstay.shadow||new i.Shadow,this.mainstay.shadow.set(this.path,e,t)}snapshot(){this.mainstay.shadow&&(this._snapshot=e(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.commit()}},i.schemas=function(e){return s.isSchema(e)?{schema:e}:e},i.Shadow=class{constructor(){this._values=null}set(e,t,s){if(!e.length)return;if("strip"===s&&"number"==typeof e[e.length-1])return;this._values=this._values||new Map;let r=this._values;for(let t=0;t<e.length;++t){const s=e[t];let i=r.get(s);i||(i=new Map,r.set(s,i)),r=i}r[i.value]=t}get(e){const t=this.node(e);if(t)return t[i.value]}node(e){if(this._values)return t(this._values,e,{iterables:!0})}override(e,s){if(!this._values)return;const i=e.slice(0,-1),r=e[e.length-1],n=t(this._values,i,{iterables:!0});s?n.set(r,s):n&&n.delete(r)}},ye}(),l={result:Symbol("result")};e.entry=function(e,s,i){let r=n.defaults;i&&(t(void 0===i.warnings,"Cannot override warnings preference in synchronous validation"),t(void 0===i.artifacts,"Cannot override artifacts preference in synchronous validation"),r=n.preferences(n.defaults,i));const o=l.entry(e,s,r);t(!o.mainstay.externals.length,"Schema with external rules must use validateAsync()");const c={value:o.value};return o.error&&(c.error=o.error),o.mainstay.warnings.length&&(c.warning=a.details(o.mainstay.warnings)),o.mainstay.debug&&(c.debug=o.mainstay.debug),o.mainstay.artifacts&&(c.artifacts=o.mainstay.artifacts),c},e.entryAsync=async function(e,t,s){let i=n.defaults;s&&(i=n.preferences(n.defaults,s));const o=l.entry(e,t,i),c=o.mainstay;if(o.error)throw c.debug&&(o.error.debug=c.debug),o.error;if(c.externals.length){let t=o.value;const d=[];for(const o of c.externals){const u=o.state.path,f="link"===o.schema.type?c.links.get(o.schema):null;let p,h,m=t;const _=u.length?[t]:[],g=u.length?r(e,u):e;if(u.length){p=u[u.length-1];let e=t;for(const t of u.slice(0,-1))e=e[t],_.unshift(e);h=_[0],m=h[p]}try{const e=(e,t)=>(f||o.schema).$_createError(e,m,t,o.state,i),r=await o.method(m,{schema:o.schema,linked:f,state:o.state,prefs:s,original:g,error:e,errorsArray:l.errorsArray,warn:(e,t)=>c.warnings.push((f||o.schema).$_createError(e,m,t,o.state,i)),message:(e,t)=>(f||o.schema).$_createError("external",m,t,o.state,i,{messages:e})});if(void 0===r||r===m)continue;if(r instanceof a.Report){if(c.tracer.log(o.schema,o.state,"rule","external","error"),d.push(r),i.abortEarly)break;continue}if(Array.isArray(r)&&r[n.symbols.errors]){if(c.tracer.log(o.schema,o.state,"rule","external","error"),d.push(...r),i.abortEarly)break;continue}h?(c.tracer.value(o.state,"rule",m,r,"external"),h[p]=r):(c.tracer.value(o.state,"rule",t,r,"external"),t=r)}catch(e){throw i.errors.label&&(e.message+=` (${o.label})`),e}}if(o.value=t,d.length)throw o.error=a.process(d,e,i),c.debug&&(o.error.debug=c.debug),o.error}if(!i.warnings&&!i.debug&&!i.artifacts)return o.value;const d={value:o.value};return c.warnings.length&&(d.warning=a.details(c.warnings)),c.debug&&(d.debug=c.debug),c.artifacts&&(d.artifacts=c.artifacts),d},l.Mainstay=class{constructor(e,t,s){this.externals=[],this.warnings=[],this.tracer=e,this.debug=t,this.links=s,this.shadow=null,this.artifacts=null,this._snapshots=[]}snapshot(){this._snapshots.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const e=this._snapshots.pop();this.externals=e.externals,this.warnings=e.warnings}commit(){this._snapshots.pop()}},l.entry=function(t,s,i){const{tracer:r,cleanup:n}=l.tracer(s,i),c=i.debug?[]:null,d=s._ids._schemaChain?new Map:null,u=new l.Mainstay(r,c,d),f=s._ids._schemaChain?[{schema:s}]:null,p=new o([],[],{mainstay:u,schemas:f}),h=e.validate(t,s,p,i);n&&s.$_root.untrace();const m=a.process(h.errors,t,i);return{value:h.value,error:m,mainstay:u}},l.tracer=function(e,s){return e.$_root._tracer?{tracer:e.$_root._tracer._register(e)}:s.debug?(t(e.$_root.trace,"Debug mode not supported"),{tracer:e.$_root.trace()._register(e),cleanup:!0}):{tracer:l.ignore}},e.validate=function(e,t,s,i,r={}){if(t.$_terms.whens&&(t=t._generate(e,s,i).schema),t._preferences&&(i=l.prefs(t,i)),t._cache&&i.cache){const i=t._cache.get(e);if(s.mainstay.tracer.debug(s,"validate","cached",!!i),i)return i}const a=(r,n,a)=>t.$_createError(r,e,n,a||s,i),o={original:e,prefs:i,schema:t,state:s,error:a,errorsArray:l.errorsArray,warn:(e,t,i)=>s.mainstay.warnings.push(a(e,t,i)),message:(r,n)=>t.$_createError("custom",e,n,s,i,{messages:r})};s.mainstay.tracer.entry(t,s);const c=t._definition;if(c.prepare&&void 0!==e&&i.convert){const t=c.prepare(e,o);if(t){if(s.mainstay.tracer.value(s,"prepare",e,t.value),t.errors)return l.finalize(t.value,[].concat(t.errors),o);e=t.value}}if(c.coerce&&void 0!==e&&i.convert&&(!c.coerce.from||c.coerce.from.includes(typeof e))){const t=c.coerce.method(e,o);if(t){if(s.mainstay.tracer.value(s,"coerced",e,t.value),t.errors)return l.finalize(t.value,[].concat(t.errors),o);e=t.value}}const d=t._flags.empty;d&&d.$_match(l.trim(e,t),s.nest(d),n.defaults)&&(s.mainstay.tracer.value(s,"empty",e,void 0),e=void 0);const u=r.presence||t._flags.presence||(t._flags._endedSwitch?null:i.presence);if(void 0===e){if("forbidden"===u)return l.finalize(e,null,o);if("required"===u)return l.finalize(e,[t.$_createError("any.required",e,null,s,i)],o);if("optional"===u){if(t._flags.default!==n.symbols.deepDefault)return l.finalize(e,null,o);s.mainstay.tracer.value(s,"default",e,{}),e={}}}else if("forbidden"===u)return l.finalize(e,[t.$_createError("any.unknown",e,null,s,i)],o);const f=[];if(t._valids){const r=t._valids.get(e,s,i,t._flags.insensitive);if(r)return i.convert&&(s.mainstay.tracer.value(s,"valids",e,r.value),e=r.value),s.mainstay.tracer.filter(t,s,"valid",r),l.finalize(e,null,o);if(t._flags.only){const r=t.$_createError("any.only",e,{valids:t._valids.values({display:!0})},s,i);if(i.abortEarly)return l.finalize(e,[r],o);f.push(r)}}if(t._invalids){const r=t._invalids.get(e,s,i,t._flags.insensitive);if(r){s.mainstay.tracer.filter(t,s,"invalid",r);const n=t.$_createError("any.invalid",e,{invalids:t._invalids.values({display:!0})},s,i);if(i.abortEarly)return l.finalize(e,[n],o);f.push(n)}}if(c.validate){const t=c.validate(e,o);if(t&&(s.mainstay.tracer.value(s,"base",e,t.value),e=t.value,t.errors)){if(!Array.isArray(t.errors))return f.push(t.errors),l.finalize(e,f,o);if(t.errors.length)return f.push(...t.errors),l.finalize(e,f,o)}}return t._rules.length?l.rules(e,f,o):l.finalize(e,f,o)},l.rules=function(e,t,s){const{schema:i,state:r,prefs:a}=s;for(const o of i._rules){const c=i._definition.rules[o.method];if(c.convert&&a.convert){r.mainstay.tracer.log(i,r,"rule",o.name,"full");continue}let d,u=o.args;if(o._resolve.length){u=Object.assign({},u);for(const t of o._resolve){const s=c.argsByName.get(t),o=u[t].resolve(e,r,a),l=s.normalize?s.normalize(o):o,f=n.validateArg(l,null,s);if(f){d=i.$_createError("any.ref",o,{arg:t,ref:u[t],reason:f},r,a);break}u[t]=l}}d=d||c.validate(e,s,u,o);const f=l.rule(d,o);if(f.errors){if(r.mainstay.tracer.log(i,r,"rule",o.name,"error"),o.warn){r.mainstay.warnings.push(...f.errors);continue}if(a.abortEarly)return l.finalize(e,f.errors,s);t.push(...f.errors)}else r.mainstay.tracer.log(i,r,"rule",o.name,"pass"),r.mainstay.tracer.value(r,"rule",e,f.value,o.name),e=f.value}return l.finalize(e,t,s)},l.rule=function(e,t){return e instanceof a.Report?(l.error(e,t),{errors:[e],value:null}):Array.isArray(e)&&e[n.symbols.errors]?(e.forEach((e=>l.error(e,t))),{errors:e,value:null}):{errors:null,value:e}},l.error=function(e,t){return t.message&&e._setTemplate(t.message),e},l.finalize=function(e,s,i){s=s||[];const{schema:r,state:n,prefs:o}=i;if(s.length){const t=l.default("failover",void 0,s,i);void 0!==t&&(n.mainstay.tracer.value(n,"failover",e,t),e=t,s=[])}if(s.length&&r._flags.error)if("function"==typeof r._flags.error){s=r._flags.error(s),Array.isArray(s)||(s=[s]);for(const e of s)t(e instanceof Error||e instanceof a.Report,"error() must return an Error object")}else s=[r._flags.error];if(void 0===e){const t=l.default("default",e,s,i);n.mainstay.tracer.value(n,"default",e,t),e=t}if(r._flags.cast&&void 0!==e){const t=r._definition.cast[r._flags.cast];if(t.from(e)){const s=t.to(e,i);n.mainstay.tracer.value(n,"cast",e,s,r._flags.cast),e=s}}if(r.$_terms.externals&&o.externals&&!1!==o._externals)for(const{method:e}of r.$_terms.externals)n.mainstay.externals.push({method:e,schema:r,state:n,label:a.label(r._flags,n,o)});const c={value:e,errors:s.length?s:null};return r._flags.result&&(c.value="strip"===r._flags.result?void 0:i.original,n.mainstay.tracer.value(n,r._flags.result,e,c.value),n.shadow(e,r._flags.result)),r._cache&&!1!==o.cache&&!r._refs.length&&r._cache.set(i.original,c),void 0===e||c.errors||void 0===r._flags.artifact||(n.mainstay.artifacts=n.mainstay.artifacts||new Map,n.mainstay.artifacts.has(r._flags.artifact)||n.mainstay.artifacts.set(r._flags.artifact,[]),n.mainstay.artifacts.get(r._flags.artifact).push(n.path)),c},l.prefs=function(e,t){const s=t===n.defaults;return s&&e._preferences[n.symbols.prefs]?e._preferences[n.symbols.prefs]:(t=n.preferences(t,e._preferences),s&&(e._preferences[n.symbols.prefs]=t),t)},l.default=function(e,t,i,r){const{schema:a,state:o,prefs:l}=r,c=a._flags[e];if(l.noDefaults||void 0===c)return t;if(o.mainstay.tracer.log(a,o,"rule",e,"full"),!c)return c;if("function"==typeof c){const t=c.length?[s(o.ancestors[0]),r]:[];try{return c(...t)}catch(t){return void i.push(a.$_createError(`any.${e}`,null,{error:t},o,l))}}return"object"!=typeof c?c:c[n.symbols.literal]?c.literal:n.isResolvable(c)?c.resolve(t,o,l):s(c)},l.trim=function(e,t){if("string"!=typeof e)return e;const s=t.$_getRule("trim");return s&&s.args.enabled?e.trim():e},l.ignore={active:!1,debug:i,entry:i,filter:i,log:i,resolve:i,value:i},l.errorsArray=function(){const e=[];return e[n.symbols.errors]=!0,e}}(Le)),Le}function Pe(){if(Ae)return we;Ae=1;const e=c(),t=oe,s=V(),i={};return we=i.Values=class{constructor(e,t){this._values=new Set(e),this._refs=new Set(t),this._lowercase=i.lowercases(e),this._override=!1}get length(){return this._values.size+this._refs.size}add(e,t){s.isResolvable(e)?this._refs.has(e)||(this._refs.add(e),t&&t.register(e)):this.has(e,null,null,!1)||(this._values.add(e),"string"==typeof e&&this._lowercase.set(e.toLowerCase(),e))}static merge(e,t,s){if(e=e||new i.Values,t){if(t._override)return t.clone();for(const s of[...t._values,...t._refs])e.add(s)}if(s)for(const t of[...s._values,...s._refs])e.remove(t);return e.length?e:null}remove(e){s.isResolvable(e)?this._refs.delete(e):(this._values.delete(e),"string"==typeof e&&this._lowercase.delete(e.toLowerCase()))}has(e,t,s,i){return!!this.get(e,t,s,i)}get(e,s,i,r){if(!this.length)return!1;if(this._values.has(e))return{value:e};if("string"==typeof e&&e&&r){const t=this._lowercase.get(e.toLowerCase());if(t)return{value:t}}if(!this._refs.size&&"object"!=typeof e)return!1;if("object"==typeof e)for(const s of this._values)if(t(s,e))return{value:s};if(s)for(const n of this._refs){const a=n.resolve(e,s,i,null,{in:!0});if(void 0===a)continue;const o=n.in&&"object"==typeof a?Array.isArray(a)?a:Object.keys(a):[a];for(const s of o)if(typeof s==typeof e)if(r&&e&&"string"==typeof e){if(s.toLowerCase()===e.toLowerCase())return{value:s,ref:n}}else if(t(s,e))return{value:s,ref:n}}return!1}override(){this._override=!0}values(e){if(e&&e.display){const e=[];for(const t of[...this._values,...this._refs])void 0!==t&&e.push(t);return e}return Array.from([...this._values,...this._refs])}clone(){const e=new i.Values(this._values,this._refs);return e._override=this._override,e}concat(t){e(!t._override,"Cannot concat override set of values");const s=new i.Values([...this._values,...t._values],[...this._refs,...t._refs]);return s._override=this._override,s}describe(){const e=[];this._override&&e.push({override:!0});for(const t of this._values.values())e.push(t&&"object"==typeof t?{value:t}:t);for(const t of this._refs.values())e.push(t.describe());return e}},i.Values.prototype[s.symbols.values]=!0,i.Values.prototype.slice=i.Values.prototype.clone,i.lowercases=function(e){const t=new Map;if(e)for(const s of e)"string"==typeof s&&t.set(s.toLowerCase(),s);return t},we}function Be(){if(Re)return Ee;Re=1;const e=c(),t=b,s=oe,i=_e,r=q(),n=V(),a=Y(),o=M(),l=ee(),d=ie(),u=K(),f=(me||(me=1,function(e){const t=c(),s=V(),i=X(),r={};e.Ids=r.Ids=class{constructor(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}clone(){const e=new r.Ids;return e._byId=new Map(this._byId),e._byKey=new Map(this._byKey),e._schemaChain=this._schemaChain,e}concat(e){e._schemaChain&&(this._schemaChain=!0);for(const[s,i]of e._byId.entries())t(!this._byKey.has(s),"Schema id conflicts with existing key:",s),this._byId.set(s,i);for(const[s,i]of e._byKey.entries())t(!this._byId.has(s),"Schema key conflicts with existing id:",s),this._byKey.set(s,i)}fork(e,i,n){const a=this._collect(e);a.push({schema:n});const o=a.shift();let l={id:o.id,schema:i(o.schema)};t(s.isSchema(l.schema),"adjuster function failed to return a joi schema type");for(const e of a)l={id:e.id,schema:r.fork(e.schema,l.id,l.schema)};return l.schema}labels(e,t=[]){const s=e[0],i=this._get(s);if(!i)return[...t,...e].join(".");const r=e.slice(1);return t=[...t,i.schema._flags.label||s],r.length?i.schema._ids.labels(r,t):t.join(".")}reach(e,s=[]){const i=e[0],r=this._get(i);t(r,"Schema does not contain path",[...s,...e].join("."));const n=e.slice(1);return n.length?r.schema._ids.reach(n,[...s,i]):r.schema}register(e,{key:i}={}){if(!e||!s.isSchema(e))return;(e.$_property("schemaChain")||e._ids._schemaChain)&&(this._schemaChain=!0);const r=e._flags.id;if(r){const s=this._byId.get(r);t(!s||s.schema===e,"Cannot add different schemas with the same id:",r),t(!this._byKey.has(r),"Schema id conflicts with existing key:",r),this._byId.set(r,{schema:e,id:r})}i&&(t(!this._byKey.has(i),"Schema already contains key:",i),t(!this._byId.has(i),"Schema key conflicts with existing id:",i),this._byKey.set(i,{schema:e,id:i}))}reset(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}_collect(e,s=[],i=[]){const r=e[0],n=this._get(r);t(n,"Schema does not contain path",[...s,...e].join(".")),i=[n,...i];const a=e.slice(1);return a.length?n.schema._ids._collect(a,[...s,r],i):i}_get(e){return this._byId.get(e)||this._byKey.get(e)}},r.fork=function(t,s,i){const r=e.schema(t,{each:(e,{key:t})=>{if(s===(e._flags.id||t))return i},ref:!1});return r?r.$_mutateRebuild():t},e.schema=function(e,t){let s;for(const i in e._flags){if("_"===i[0])continue;const n=r.scan(e._flags[i],{source:"flags",name:i},t);void 0!==n&&(s=s||e.clone(),s._flags[i]=n)}for(let i=0;i<e._rules.length;++i){const n=e._rules[i],a=r.scan(n.args,{source:"rules",name:n.name},t);if(void 0!==a){s=s||e.clone();const t=Object.assign({},n);t.args=a,s._rules[i]=t,s._singleRules.get(n.name)===n&&s._singleRules.set(n.name,t)}}for(const i in e.$_terms){if("_"===i[0])continue;const n=r.scan(e.$_terms[i],{source:"terms",name:i},t);void 0!==n&&(s=s||e.clone(),s.$_terms[i]=n)}return s},r.scan=function(e,t,n,a,o){const l=a||[];if(null===e||"object"!=typeof e)return;let c;if(Array.isArray(e)){for(let s=0;s<e.length;++s){const i="terms"===t.source&&"keys"===t.name&&e[s].key,a=r.scan(e[s],t,n,[s,...l],i);void 0!==a&&(c=c||e.slice(),c[s]=a)}return c}if(!1!==n.schema&&s.isSchema(e)||!1!==n.ref&&i.isRef(e)){const s=n.each(e,{...t,path:l,key:o});if(s===e)return;return s}for(const s in e){if("_"===s[0])continue;const i=r.scan(e[s],t,n,[s,...l],o);void 0!==i&&(c=c||Object.assign({},e),c[s]=i)}return c}}(ge)),ge),p=X(),h=de(),m=Me(),_=Pe(),g={Base:class{constructor(e){this.type=e,this.$_root=null,this._definition={},this._reset()}_reset(){this._ids=new f.Ids,this._preferences=null,this._refs=new p.Manager,this._cache=null,this._valids=null,this._invalids=null,this._flags={},this._rules=[],this._singleRules=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return e("function"==typeof d.describe,"Manifest functionality disabled"),d.describe(this)}allow(...e){return n.verifyFlat(e,"allow"),this._values(e,"_valids")}alter(t){e(t&&"object"==typeof t&&!Array.isArray(t),"Invalid targets argument"),e(!this._inRuleset(),"Cannot set alterations inside a ruleset");const s=this.clone();s.$_terms.alterations=s.$_terms.alterations||[];for(const i in t){const r=t[i];e("function"==typeof r,"Alteration adjuster for",i,"must be a function"),s.$_terms.alterations.push({target:i,adjuster:r})}return s.$_temp.ruleset=!1,s}artifact(t){return e(void 0!==t,"Artifact cannot be undefined"),e(!this._cache,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",t)}cast(t){return e(!1===t||"string"==typeof t,"Invalid to value"),e(!1===t||this._definition.cast[t],"Type",this.type,"does not support casting to",t),this.$_setFlag("cast",!1===t?void 0:t)}default(e,t){return this._default("default",e,t)}description(t){return e(t&&"string"==typeof t,"Description must be a non-empty string"),this.$_setFlag("description",t)}empty(e){const t=this.clone();return void 0!==e&&(e=t.$_compile(e,{override:!1})),t.$_setFlag("empty",e,{clone:!1})}error(t){return e(t,"Missing error"),e(t instanceof Error||"function"==typeof t,"Must provide a valid Error object or a function"),this.$_setFlag("error",t)}example(t,s={}){return e(void 0!==t,"Missing example"),n.assertOptions(s,["override"]),this._inner("examples",t,{single:!0,override:s.override})}external(t,s){return"object"==typeof t&&(e(!s,"Cannot combine options with description"),s=t.description,t=t.method),e("function"==typeof t,"Method must be a function"),e(void 0===s||s&&"string"==typeof s,"Description must be a non-empty string"),this._inner("externals",{method:t,description:s},{single:!0})}failover(e,t){return this._default("failover",e,t)}forbidden(){return this.presence("forbidden")}id(t){return t?(e("string"==typeof t,"id must be a non-empty string"),e(/^[^\.]+$/.test(t),"id cannot contain period character"),this.$_setFlag("id",t)):this.$_setFlag("id",void 0)}invalid(...e){return this._values(e,"_invalids")}label(t){return e(t&&"string"==typeof t,"Label name must be a non-empty string"),this.$_setFlag("label",t)}meta(t){return e(void 0!==t,"Meta cannot be undefined"),this._inner("metas",t,{single:!0})}note(...t){e(t.length,"Missing notes");for(const s of t)e(s&&"string"==typeof s,"Notes must be non-empty strings");return this._inner("notes",t)}only(t=!0){return e("boolean"==typeof t,"Invalid mode:",t),this.$_setFlag("only",t)}optional(){return this.presence("optional")}prefs(t){e(t,"Missing preferences"),e(void 0===t.context,"Cannot override context"),e(void 0===t.externals,"Cannot override externals"),e(void 0===t.warnings,"Cannot override warnings"),e(void 0===t.debug,"Cannot override debug"),n.checkPreferences(t);const s=this.clone();return s._preferences=n.preferences(s._preferences,t),s}presence(t){return e(["optional","required","forbidden"].includes(t),"Unknown presence mode",t),this.$_setFlag("presence",t)}raw(e=!0){return this.$_setFlag("result",e?"raw":void 0)}result(t){return e(["raw","strip"].includes(t),"Unknown result mode",t),this.$_setFlag("result",t)}required(){return this.presence("required")}strict(e){const t=this.clone(),s=void 0!==e&&!e;return t._preferences=n.preferences(t._preferences,{convert:s}),t}strip(e=!0){return this.$_setFlag("result",e?"strip":void 0)}tag(...t){e(t.length,"Missing tags");for(const s of t)e(s&&"string"==typeof s,"Tags must be non-empty strings");return this._inner("tags",t)}unit(t){return e(t&&"string"==typeof t,"Unit name must be a non-empty string"),this.$_setFlag("unit",t)}valid(...e){n.verifyFlat(e,"valid");const t=this.allow(...e);return t.$_setFlag("only",!!t._valids,{clone:!1}),t}when(t,s){const i=this.clone();i.$_terms.whens||(i.$_terms.whens=[]);const r=a.when(i,t,s);if(!["any","link"].includes(i.type)){const t=r.is?[r]:r.switch;for(const s of t)e(!s.then||"any"===s.then.type||s.then.type===i.type,"Cannot combine",i.type,"with",s.then&&s.then.type),e(!s.otherwise||"any"===s.otherwise.type||s.otherwise.type===i.type,"Cannot combine",i.type,"with",s.otherwise&&s.otherwise.type)}return i.$_terms.whens.push(r),i.$_mutateRebuild()}cache(t){e(!this._inRuleset(),"Cannot set caching inside a ruleset"),e(!this._cache,"Cannot override schema cache"),e(void 0===this._flags.artifact,"Cannot cache a rule with an artifact");const s=this.clone();return s._cache=t||r.provider.provision(),s.$_temp.ruleset=!1,s}clone(){const e=Object.create(Object.getPrototypeOf(this));return this._assign(e)}concat(t){e(n.isSchema(t),"Invalid schema object"),e("any"===this.type||"any"===t.type||t.type===this.type,"Cannot merge type",this.type,"with another type:",t.type),e(!this._inRuleset(),"Cannot concatenate onto a schema with open ruleset"),e(!t._inRuleset(),"Cannot concatenate a schema with open ruleset");let s=this.clone();if("any"===this.type&&"any"!==t.type){const e=t.clone();for(const t of Object.keys(s))"type"!==t&&(e[t]=s[t]);s=e}s._ids.concat(t._ids),s._refs.register(t,p.toSibling),s._preferences=s._preferences?n.preferences(s._preferences,t._preferences):t._preferences,s._valids=_.merge(s._valids,t._valids,t._invalids),s._invalids=_.merge(s._invalids,t._invalids,t._valids);for(const e of t._singleRules.keys())s._singleRules.has(e)&&(s._rules=s._rules.filter((t=>t.keep||t.name!==e)),s._singleRules.delete(e));for(const e of t._rules)t._definition.rules[e.method].multi||s._singleRules.set(e.name,e),s._rules.push(e);if(s._flags.empty&&t._flags.empty){s._flags.empty=s._flags.empty.concat(t._flags.empty);const e=Object.assign({},t._flags);delete e.empty,i(s._flags,e)}else if(t._flags.empty){s._flags.empty=t._flags.empty;const e=Object.assign({},t._flags);delete e.empty,i(s._flags,e)}else i(s._flags,t._flags);for(const e in t.$_terms){const i=t.$_terms[e];i?s.$_terms[e]?s.$_terms[e]=s.$_terms[e].concat(i):s.$_terms[e]=i.slice():s.$_terms[e]||(s.$_terms[e]=i)}return this.$_root._tracer&&this.$_root._tracer._combine(s,[this,t]),s.$_mutateRebuild()}extend(t){return e(!t.base,"Cannot extend type with another base"),l.type(this,t)}extract(e){return e=Array.isArray(e)?e:e.split("."),this._ids.reach(e)}fork(t,s){e(!this._inRuleset(),"Cannot fork inside a ruleset");let i=this;for(let e of[].concat(t))e=Array.isArray(e)?e:e.split("."),i=i._ids.fork(e,s,i);return i.$_temp.ruleset=!1,i}rule(s){const i=this._definition;n.assertOptions(s,Object.keys(i.modifiers)),e(!1!==this.$_temp.ruleset,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const r=null===this.$_temp.ruleset?this._rules.length-1:this.$_temp.ruleset;e(r>=0&&r<this._rules.length,"Cannot apply rules to empty ruleset");const a=this.clone();for(let n=r;n<a._rules.length;++n){const r=a._rules[n],o=t(r);for(const t in s)i.modifiers[t](o,s[t]),e(o.name===r.name,"Cannot change rule name");a._rules[n]=o,a._singleRules.get(o.name)===r&&a._singleRules.set(o.name,o)}return a.$_temp.ruleset=!1,a.$_mutateRebuild()}get ruleset(){e(!this._inRuleset(),"Cannot start a new ruleset without closing the previous one");const t=this.clone();return t.$_temp.ruleset=t._rules.length,t}get $(){return this.ruleset}tailor(t){t=[].concat(t),e(!this._inRuleset(),"Cannot tailor inside a ruleset");let s=this;if(this.$_terms.alterations)for(const{target:i,adjuster:r}of this.$_terms.alterations)t.includes(i)&&(s=r(s),e(n.isSchema(s),"Alteration adjuster for",i,"failed to return a schema object"));return s=s.$_modify({each:e=>e.tailor(t),ref:!1}),s.$_temp.ruleset=!1,s.$_mutateRebuild()}tracer(){return h.location?h.location(this):this}validate(e,t){return m.entry(e,this,t)}validateAsync(e,t){return m.entryAsync(e,this,t)}$_addRule(t){"string"==typeof t&&(t={name:t}),e(t&&"object"==typeof t,"Invalid options"),e(t.name&&"string"==typeof t.name,"Invalid rule name");for(const s in t)e("_"!==s[0],"Cannot set private rule properties");const s=Object.assign({},t);s._resolve=[],s.method=s.method||s.name;const i=this._definition.rules[s.method],r=s.args;e(i,"Unknown rule",s.method);const a=this.clone();if(r){e(1===Object.keys(r).length||Object.keys(r).length===this._definition.rules[s.name].args.length,"Invalid rule definition for",this.type,s.name);for(const t in r){let o=r[t];if(i.argsByName){const l=i.argsByName.get(t);if(l.ref&&n.isResolvable(o))s._resolve.push(t),a.$_mutateRegister(o);else if(l.normalize&&(o=l.normalize(o),r[t]=o),l.assert){const s=n.validateArg(o,t,l);e(!s,s,"or reference")}}void 0!==o?r[t]=o:delete r[t]}}return i.multi||(a._ruleRemove(s.name,{clone:!1}),a._singleRules.set(s.name,s)),!1===a.$_temp.ruleset&&(a.$_temp.ruleset=null),i.priority?a._rules.unshift(s):a._rules.push(s),a}$_compile(e,t){return a.schema(this.$_root,e,t)}$_createError(e,t,s,i,r,n={}){const a=!1!==n.flags?this._flags:{},l=n.messages?u.merge(this._definition.messages,n.messages):this._definition.messages;return new o.Report(e,t,s,a,l,i,r)}$_getFlag(e){return this._flags[e]}$_getRule(e){return this._singleRules.get(e)}$_mapLabels(e){return e=Array.isArray(e)?e:e.split("."),this._ids.labels(e)}$_match(e,t,s,i){(s=Object.assign({},s)).abortEarly=!0,s._externals=!1,t.snapshot();const r=!m.validate(e,this,t,s,i).errors;return t.restore(),r}$_modify(e){return n.assertOptions(e,["each","once","ref","schema"]),f.schema(this,e)||this}$_mutateRebuild(){e(!this._inRuleset(),"Cannot add this rule inside a ruleset"),this._refs.reset(),this._ids.reset();return this.$_modify({each:(e,{source:t,name:s,path:i,key:r})=>{const n=this._definition[t][s]&&this._definition[t][s].register;!1!==n&&this.$_mutateRegister(e,{family:n,key:r})}}),this._definition.rebuild&&this._definition.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(e,{family:t,key:s}={}){this._refs.register(e,t),this._ids.register(e,{key:s})}$_property(e){return this._definition.properties[e]}$_reach(e){return this._ids.reach(e)}$_rootReferences(){return this._refs.roots()}$_setFlag(t,i,r={}){e("_"===t[0]||!this._inRuleset(),"Cannot set flag inside a ruleset");const n=this._definition.flags[t]||{};if(s(i,n.default)&&(i=void 0),s(i,this._flags[t]))return this;const a=!1!==r.clone?this.clone():this;return void 0!==i?(a._flags[t]=i,a.$_mutateRegister(i)):delete a._flags[t],"_"!==t[0]&&(a.$_temp.ruleset=!1),a}$_parent(e,...t){return this[e][n.symbols.parent].call(this,...t)}$_validate(e,t,s){return m.validate(e,this,t,s)}_assign(e){e.type=this.type,e.$_root=this.$_root,e.$_temp=Object.assign({},this.$_temp),e.$_temp.whens={},e._ids=this._ids.clone(),e._preferences=this._preferences,e._valids=this._valids&&this._valids.clone(),e._invalids=this._invalids&&this._invalids.clone(),e._rules=this._rules.slice(),e._singleRules=t(this._singleRules,{shallow:!0}),e._refs=this._refs.clone(),e._flags=Object.assign({},this._flags),e._cache=null,e.$_terms={};for(const t in this.$_terms)e.$_terms[t]=this.$_terms[t]?this.$_terms[t].slice():null;e.$_super={};for(const t in this.$_super)e.$_super[t]=this._super[t].bind(e);return e}_bare(){const e=this.clone();e._reset();const t=e._definition.terms;for(const s in t){const i=t[s];e.$_terms[s]=i.init}return e.$_mutateRebuild()}_default(t,s,i={}){n.assertOptions(i,"literal"),e(void 0!==s,"Missing",t,"value"),e("function"==typeof s||!i.literal,"Only function value supports literal option"),"function"==typeof s&&i.literal&&(s={[n.symbols.literal]:!0,literal:s});return this.$_setFlag(t,s)}_generate(e,t,s){if(!this.$_terms.whens)return{schema:this};const i=[],r=[];for(let n=0;n<this.$_terms.whens.length;++n){const a=this.$_terms.whens[n];if(a.concat){i.push(a.concat),r.push(`${n}.concat`);continue}const o=a.ref?a.ref.resolve(e,t,s):e,l=a.is?[a]:a.switch,c=r.length;for(let c=0;c<l.length;++c){const{is:d,then:u,otherwise:f}=l[c],p=`${n}${a.switch?"."+c:""}`;if(d.$_match(o,t.nest(d,`${p}.is`),s)){if(u){const n=t.localize([...t.path,`${p}.then`],t.ancestors,t.schemas),{schema:a,id:o}=u._generate(e,n,s);i.push(a),r.push(`${p}.then${o?`(${o})`:""}`);break}}else if(f){const n=t.localize([...t.path,`${p}.otherwise`],t.ancestors,t.schemas),{schema:a,id:o}=f._generate(e,n,s);i.push(a),r.push(`${p}.otherwise${o?`(${o})`:""}`);break}}if(a.break&&r.length>c)break}const n=r.join(", ");if(t.mainstay.tracer.debug(t,"rule","when",n),!n)return{schema:this};if(!t.mainstay.tracer.active&&this.$_temp.whens[n])return{schema:this.$_temp.whens[n],id:n};let a=this;this._definition.generate&&(a=this._definition.generate(this,e,t,s));for(const e of i)a=a.concat(e);return this.$_root._tracer&&this.$_root._tracer._combine(a,[this,...i]),this.$_temp.whens[n]=a,{schema:a,id:n}}_inner(t,s,i={}){e(!this._inRuleset(),`Cannot set ${t} inside a ruleset`);const r=this.clone();return r.$_terms[t]&&!i.override||(r.$_terms[t]=[]),i.single?r.$_terms[t].push(s):r.$_terms[t].push(...s),r.$_temp.ruleset=!1,r}_inRuleset(){return null!==this.$_temp.ruleset&&!1!==this.$_temp.ruleset}_ruleRemove(e,t={}){if(!this._singleRules.has(e))return this;const s=!1!==t.clone?this.clone():this;s._singleRules.delete(e);const i=[];for(let t=0;t<s._rules.length;++t){const r=s._rules[t];r.name!==e||r.keep?i.push(r):s._inRuleset()&&t<s.$_temp.ruleset&&--s.$_temp.ruleset}return s._rules=i,s}_values(t,s){n.verifyFlat(t,s.slice(1,-1));const i=this.clone(),r=t[0]===n.symbols.override;if(r&&(t=t.slice(1)),!i[s]&&t.length?i[s]=new _:r&&(i[s]=t.length?new _:null,i.$_mutateRebuild()),!i[s])return i;r&&i[s].override();for(const r of t){e(void 0!==r,"Cannot call allow/valid/invalid with undefined"),e(r!==n.symbols.override,"Override must be the first value");const t="_invalids"===s?"_valids":"_invalids";i[t]&&(i[t].remove(r),i[t].length||(e("_valids"===s||!i._flags.only,"Setting invalid value",r,"leaves schema rejecting all values due to previous valid rule"),i[t]=null)),i[s].add(r,i._refs)}return i}}};return g.Base.prototype[n.symbols.any]={version:n.version,compile:a.compile,root:"$_root"},g.Base.prototype.isImmutable=!0,g.Base.prototype.deny=g.Base.prototype.invalid,g.Base.prototype.disallow=g.Base.prototype.invalid,g.Base.prototype.equal=g.Base.prototype.valid,g.Base.prototype.exist=g.Base.prototype.required,g.Base.prototype.not=g.Base.prototype.invalid,g.Base.prototype.options=g.Base.prototype.prefs,g.Base.prototype.preferences=g.Base.prototype.prefs,Ee=new g.Base}function Ue(){if(Oe)return Se;Oe=1;const e=c(),t=Be(),s=V(),i=K();return Se=t.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(t,s){return e("function"==typeof t,"Method must be a function"),e(void 0===s||s&&"string"==typeof s,"Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:t,description:s}})},validate(e,t,{method:s}){try{return s(e,t)}catch(e){return t.error("any.custom",{error:e})}},args:["method","description"],multi:!0},messages:{method(e){return this.prefs({messages:e})}},shared:{method(t){e(s.isSchema(t)&&t._flags.id,"Schema must be a schema with an id");const i=this.clone();return i.$_terms.shared=i.$_terms.shared||[],i.$_terms.shared.push(t),i.$_mutateRegister(t),i}},warning:{method(t,s){return e(t&&"string"==typeof t,"Invalid warning code"),this.$_addRule({name:"warning",args:{code:t,local:s},warn:!0})},validate:(e,t,{code:s,local:i})=>t.error(s,i),args:["code","local"],multi:!0}},modifiers:{keep(e,t=!0){e.keep=t},message(e,t){e.message=i.compile(t)},warn(e,t=!0){e.warn=t}},manifest:{build(e,t){for(const s in t){const i=t[s];if(["examples","externals","metas","notes","tags"].includes(s))for(const t of i)e=e[s.slice(0,-1)](t);else if("alterations"!==s)if("whens"!==s){if("shared"===s)for(const t of i)e=e.shared(t)}else for(const t of i){const{ref:s,is:i,not:r,then:n,otherwise:a,concat:o}=t;e=o?e.concat(o):s?e.when(s,{is:i,not:r,then:n,otherwise:a,switch:t.switch,break:t.break}):e.when(i,{then:n,otherwise:a,break:t.break})}else{const t={};for(const{target:e,adjuster:s}of i)t[e]=s;e=e.alter(t)}}return e}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}}),Se}function Fe(){if(xe)return $e;xe=1;const e=c(),t=_e,s=Ue(),i=V(),r=Y(),n=M(),a=X(),o={};return $e=s.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:a.toSibling}},args:(e,...t)=>1===t.length&&Array.isArray(t[0])?e.try(...t[0]):e.try(...t),validate(e,s){const{schema:i,error:r,state:a,prefs:l}=s;if(i._flags.match){const s=[],o=[];for(let t=0;t<i.$_terms.matches.length;++t){const r=i.$_terms.matches[t],n=a.nest(r.schema,`match.${t}`);n.snapshot();const c=r.schema.$_validate(e,n,l);c.errors?(o.push(c.errors),n.restore()):(s.push(c.value),n.commit())}if(0===s.length){const e={details:o.map((e=>n.details(e,{override:!1})))};return{errors:r("alternatives.any",e)}}if("one"===i._flags.match)return 1===s.length?{value:s[0]}:{errors:r("alternatives.one")};if(s.length!==i.$_terms.matches.length){const e={details:o.map((e=>n.details(e,{override:!1})))};return{errors:r("alternatives.all",e)}}const c=e=>e.$_terms.matches.some((e=>"object"===e.schema.type||"alternatives"===e.schema.type&&c(e.schema)));return c(i)?{value:s.reduce(((e,s)=>t(e,s,{mergeArrays:!1})))}:{value:s[s.length-1]}}const c=[];for(let t=0;t<i.$_terms.matches.length;++t){const s=i.$_terms.matches[t];if(s.schema){const i=a.nest(s.schema,`match.${t}`);i.snapshot();const r=s.schema.$_validate(e,i,l);if(!r.errors)return i.commit(),r;i.restore(),c.push({schema:s.schema,reports:r.errors});continue}const r=s.ref?s.ref.resolve(e,a,l):e,n=s.is?[s]:s.switch;for(let i=0;i<n.length;++i){const o=n[i],{is:c,then:d,otherwise:u}=o,f=`match.${t}${s.switch?"."+i:""}`;if(c.$_match(r,a.nest(c,`${f}.is`),l)){if(d)return d.$_validate(e,a.nest(d,`${f}.then`),l)}else if(u)return u.$_validate(e,a.nest(u,`${f}.otherwise`),l)}}return o.errors(c,s)},rules:{conditional:{method(t,s){e(!this._flags._endedSwitch,"Unreachable condition"),e(!this._flags.match,"Cannot combine match mode",this._flags.match,"with conditional rule"),e(void 0===s.break,"Cannot use break option with alternatives conditional");const i=this.clone(),n=r.when(i,t,s),a=n.is?[n]:n.switch;for(const e of a)if(e.then&&e.otherwise){i.$_setFlag("_endedSwitch",!0,{clone:!1});break}return i.$_terms.matches.push(n),i.$_mutateRebuild()}},match:{method(t){if(e(["any","one","all"].includes(t),"Invalid alternatives match mode",t),"any"!==t)for(const s of this.$_terms.matches)e(s.schema,"Cannot combine match mode",t,"with conditional rules");return this.$_setFlag("match",t)}},try:{method(...t){e(t.length,"Missing alternative schemas"),i.verifyFlat(t,"try"),e(!this._flags._endedSwitch,"Unreachable condition");const s=this.clone();for(const e of t)s.$_terms.matches.push({schema:s.$_compile(e)});return s.$_mutateRebuild()}}},overrides:{label(e){return this.$_parent("label",e).$_modify({each:(t,s)=>"is"!==s.path[0]&&"string"!=typeof t._flags.label?t.label(e):void 0,ref:!1})}},rebuild(e){e.$_modify({each:t=>{i.isSchema(t)&&"array"===t.type&&e.$_setFlag("_arrayItems",!0,{clone:!1})}})},manifest:{build(e,t){if(t.matches)for(const s of t.matches){const{schema:t,ref:i,is:r,not:n,then:a,otherwise:o}=s;e=t?e.try(t):i?e.conditional(i,{is:r,then:a,not:n,otherwise:o,switch:s.switch}):e.conditional(r,{then:a,otherwise:o})}return e}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),o.errors=function(e,{error:t,state:s}){if(!e.length)return{errors:t("alternatives.any")};if(1===e.length)return{errors:e[0].reports};const i=new Set,r=[];for(const{reports:a,schema:l}of e){if(a.length>1)return o.unmatched(e,t);const c=a[0];if(c instanceof n.Report==!1)return o.unmatched(e,t);if(c.state.path.length!==s.path.length){r.push({type:l.type,report:c});continue}if("any.only"===c.code){for(const e of c.local.valids)i.add(e);continue}const[d,u]=c.code.split(".");"base"!==u?r.push({type:l.type,report:c}):"object.base"===c.code?i.add(c.local.type):i.add(d)}return r.length?1===r.length?{errors:r[0].report}:o.unmatched(e,t):{errors:t("alternatives.types",{types:[...i]})}},o.unmatched=function(e,t){const s=[];for(const t of e)s.push(...t.reports);return{errors:t("alternatives.match",n.details(s,{override:!1}))}},$e}function Ge(){if(Ie)return Ne;Ie=1;const e=c(),t=oe,s=f,i=Ue(),r=V(),n=Y(),a={};return Ne=i.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},_exclusions:{init:[]},_inclusions:{init:[]},_requireds:{init:[]}},coerce:{from:"object",method(e,{schema:t,state:s,prefs:i}){if(!Array.isArray(e))return;const r=t.$_getRule("sort");return r?a.sort(t,e,r.args.options,s,i):void 0}},validate(e,{schema:t,error:s}){if(!Array.isArray(e)){if(t._flags.single){const t=[e];return t[r.symbols.arraySingle]=!0,{value:t}}return{errors:s("array.base")}}if(t.$_getRule("items")||t.$_terms.externals)return{value:e.slice()}},rules:{has:{method(e){e=this.$_compile(e,{appendPath:!0});const t=this.$_addRule({name:"has",args:{schema:e}});return t.$_mutateRegister(e),t},validate(e,{state:t,prefs:s,error:i},{schema:r}){const n=[e,...t.ancestors];for(let i=0;i<e.length;++i){const a=t.localize([...t.path,i],n,r);if(r.$_match(e[i],a,s))return e}const a=r._flags.label;return a?i("array.hasKnown",{patternLabel:a}):i("array.hasUnknown",null)},multi:!0},items:{method(...e){r.verifyFlat(e,"items");const t=this.$_addRule("items");for(let s=0;s<e.length;++s){const i=r.tryWithPath((()=>this.$_compile(e[s])),s,{append:!0});t.$_terms.items.push(i)}return t.$_mutateRebuild()},validate(e,{schema:t,error:s,state:i,prefs:n,errorsArray:o}){const l=t.$_terms._requireds.slice(),c=t.$_terms.ordered.slice(),d=[...t.$_terms._inclusions,...l],u=!e[r.symbols.arraySingle];delete e[r.symbols.arraySingle];const f=o();let p=e.length;for(let r=0;r<p;++r){const o=e[r];let h=!1,m=!1;const _=u?r:new Number(r),g=[...i.path,_];if(!t._flags.sparse&&void 0===o){if(f.push(s("array.sparse",{key:_,path:g,pos:r,value:void 0},i.localize(g))),n.abortEarly)return f;c.shift();continue}const y=[e,...i.ancestors];for(const e of t.$_terms._exclusions)if(e.$_match(o,i.localize(g,y,e),n,{presence:"ignore"})){if(f.push(s("array.excludes",{pos:r,value:o},i.localize(g))),n.abortEarly)return f;h=!0,c.shift();break}if(h)continue;if(t.$_terms.ordered.length){if(c.length){const l=c.shift(),d=l.$_validate(o,i.localize(g,y,l),n);if(d.errors){if(f.push(...d.errors),n.abortEarly)return f}else if("strip"===l._flags.result)a.fastSplice(e,r),--r,--p;else{if(!t._flags.sparse&&void 0===d.value){if(f.push(s("array.sparse",{key:_,path:g,pos:r,value:void 0},i.localize(g))),n.abortEarly)return f;continue}e[r]=d.value}continue}if(!t.$_terms.items.length){if(f.push(s("array.orderedLength",{pos:r,limit:t.$_terms.ordered.length})),n.abortEarly)return f;break}}const v=[];let b=l.length;for(let c=0;c<b;++c){const d=i.localize(g,y,l[c]);d.snapshot();const u=l[c].$_validate(o,d,n);if(v[c]=u,!u.errors){if(d.commit(),e[r]=u.value,m=!0,a.fastSplice(l,c),--c,--b,!t._flags.sparse&&void 0===u.value&&(f.push(s("array.sparse",{key:_,path:g,pos:r,value:void 0},i.localize(g))),n.abortEarly))return f;break}d.restore()}if(m)continue;const w=n.stripUnknown&&!!n.stripUnknown.arrays||!1;b=d.length;for(const c of d){let d;const u=l.indexOf(c);if(-1!==u)d=v[u];else{const l=i.localize(g,y,c);if(l.snapshot(),d=c.$_validate(o,l,n),!d.errors){l.commit(),"strip"===c._flags.result?(a.fastSplice(e,r),--r,--p):t._flags.sparse||void 0!==d.value?e[r]=d.value:(f.push(s("array.sparse",{key:_,path:g,pos:r,value:void 0},i.localize(g))),h=!0),m=!0;break}l.restore()}if(1===b){if(w){a.fastSplice(e,r),--r,--p,m=!0;break}if(f.push(...d.errors),n.abortEarly)return f;h=!0;break}}if(!h&&((t.$_terms._inclusions.length||t.$_terms._requireds.length)&&!m)){if(w){a.fastSplice(e,r),--r,--p;continue}if(f.push(s("array.includes",{pos:r,value:o},i.localize(g))),n.abortEarly)return f}}return l.length&&a.fillMissedErrors(t,f,l,e,i,n),c.length&&(a.fillOrderedErrors(t,f,c,e,i,n),f.length||a.fillDefault(c,e,i,n)),f.length?f:e},priority:!0,manifest:!1},length:{method(e){return this.$_addRule({name:"length",args:{limit:e},operator:"="})},validate:(e,t,{limit:s},{name:i,operator:n,args:a})=>r.compare(e.length,s,n)?e:t.error("array."+i,{limit:a.limit,value:e}),args:[{name:"limit",ref:!0,assert:r.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}},ordered:{method(...e){r.verifyFlat(e,"ordered");const t=this.$_addRule("items");for(let s=0;s<e.length;++s){const i=r.tryWithPath((()=>this.$_compile(e[s])),s,{append:!0});a.validateSingle(i,t),t.$_mutateRegister(i),t.$_terms.ordered.push(i)}return t.$_mutateRebuild()}},single:{method(t){const s=void 0===t||!!t;return e(!s||!this._flags._arrayItems,"Cannot specify single rule when array has array items"),this.$_setFlag("single",s)}},sort:{method(t={}){r.assertOptions(t,["by","order"]);const s={order:t.order||"ascending"};return t.by&&(s.by=n.ref(t.by,{ancestor:0}),e(!s.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:s}})},validate(e,{error:t,state:s,prefs:i,schema:r},{options:n}){const{value:o,errors:l}=a.sort(r,e,n,s,i);if(l)return l;for(let s=0;s<e.length;++s)if(e[s]!==o[s])return t("array.sort",{order:n.order,by:n.by?n.by.key:"value"});return e},convert:!0},sparse:{method(e){const t=void 0===e||!!e;if(this._flags.sparse===t)return this;return(t?this.clone():this.$_addRule("items")).$_setFlag("sparse",t,{clone:!1})}},unique:{method(t,s={}){e(!t||"function"==typeof t||"string"==typeof t,"comparator must be a function or a string"),r.assertOptions(s,["ignoreUndefined","separator"]);const i={name:"unique",args:{options:s,comparator:t}};if(t)if("string"==typeof t){const e=r.default(s.separator,".");i.path=e?t.split(e):[t]}else i.comparator=t;return this.$_addRule(i)},validate(i,{state:r,error:n,schema:a},{comparator:o,options:l},{comparator:c,path:d}){const u={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),bigint:Object.create(null),object:new Map,function:new Map,custom:new Map},f=c||t,p=l.ignoreUndefined;for(let t=0;t<i.length;++t){const a=d?s(i[t],d):i[t],l=c?u.custom:u[typeof a];if(e(l,"Failed to find unique map container for type",typeof a),l instanceof Map){const e=l.entries();let s;for(;!(s=e.next()).done;)if(f(s.value[0],a)){const e=r.localize([...r.path,t],[i,...r.ancestors]),a={pos:t,value:i[t],dupePos:s.value[1],dupeValue:i[s.value[1]]};return d&&(a.path=o),n("array.unique",a,e)}l.set(a,t)}else{if((!p||void 0!==a)&&void 0!==l[a]){const e={pos:t,value:i[t],dupePos:l[a],dupeValue:i[l[a]]};d&&(e.path=o);return n("array.unique",e,r.localize([...r.path,t],[i,...r.ancestors]))}l[a]=t}}return i},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(e,t)=>new Set(e)}},rebuild(e){e.$_terms._inclusions=[],e.$_terms._exclusions=[],e.$_terms._requireds=[];for(const t of e.$_terms.items)a.validateSingle(t,e),"required"===t._flags.presence?e.$_terms._requireds.push(t):"forbidden"===t._flags.presence?e.$_terms._exclusions.push(t):e.$_terms._inclusions.push(t);for(const t of e.$_terms.ordered)a.validateSingle(t,e)},manifest:{build:(e,t)=>(t.items&&(e=e.items(...t.items)),t.ordered&&(e=e.ordered(...t.ordered)),e)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),a.fillMissedErrors=function(e,t,s,i,r,n){const a=[];let o=0;for(const e of s){const t=e._flags.label;t?a.push(t):++o}a.length?o?t.push(e.$_createError("array.includesRequiredBoth",i,{knownMisses:a,unknownMisses:o},r,n)):t.push(e.$_createError("array.includesRequiredKnowns",i,{knownMisses:a},r,n)):t.push(e.$_createError("array.includesRequiredUnknowns",i,{unknownMisses:o},r,n))},a.fillOrderedErrors=function(e,t,s,i,r,n){const o=[];for(const e of s)"required"===e._flags.presence&&o.push(e);o.length&&a.fillMissedErrors(e,t,o,i,r,n)},a.fillDefault=function(e,t,s,i){const r=[];let n=!0;for(let a=e.length-1;a>=0;--a){const o=e[a],l=[t,...s.ancestors],c=o.$_validate(void 0,s.localize(s.path,l,o),i).value;if(n){if(void 0===c)continue;n=!1}r.unshift(c)}r.length&&t.push(...r)},a.fastSplice=function(e,t){let s=t;for(;s<e.length;)e[s++]=e[s];--e.length},a.validateSingle=function(t,s){("array"===t.type||t._flags._arrayItems)&&(e(!s._flags.single,"Cannot specify array item with single rule enabled"),s.$_setFlag("_arrayItems",!0,{clone:!1}))},a.sort=function(e,t,s,i,r){const n="ascending"===s.order?1:-1,o=-1*n,l=n,c=(c,d)=>{let u=a.compare(c,d,o,l);if(null!==u)return u;if(s.by&&(c=s.by.resolve(c,i,r),d=s.by.resolve(d,i,r)),u=a.compare(c,d,o,l),null!==u)return u;const f=typeof c;if(f!==typeof d)throw e.$_createError("array.sort.mismatching",t,null,i,r);if("number"!==f&&"string"!==f)throw e.$_createError("array.sort.unsupported",t,{type:f},i,r);return"number"===f?(c-d)*n:c<d?o:l};try{return{value:t.slice().sort(c)}}catch(e){return{errors:e}}},a.compare=function(e,t,s,i){return e===t?0:void 0===e?1:void 0===t?-1:null===e?i:null===t?s:null},Ne}function Ze(){if(Te)return ke;Te=1;const e=c(),t=Ue(),s=V(),i=Pe(),r={isBool:function(e){return"boolean"==typeof e}};return ke=t.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(e,{schema:t}){if("boolean"!=typeof e){if("string"==typeof e){const s=t._flags.sensitive?e:e.toLowerCase();e="true"===s||"false"!==s&&e}return"boolean"!=typeof e&&(e=t.$_terms.truthy&&t.$_terms.truthy.has(e,null,null,!t._flags.sensitive)||(!t.$_terms.falsy||!t.$_terms.falsy.has(e,null,null,!t._flags.sensitive))&&e),{value:e}}},validate(e,{error:t}){if("boolean"!=typeof e)return{value:e,errors:t("boolean.base")}},rules:{truthy:{method(...t){s.verifyFlat(t,"truthy");const r=this.clone();r.$_terms.truthy=r.$_terms.truthy||new i;for(let s=0;s<t.length;++s){const i=t[s];e(void 0!==i,"Cannot call truthy with undefined"),r.$_terms.truthy.add(i)}return r}},falsy:{method(...t){s.verifyFlat(t,"falsy");const r=this.clone();r.$_terms.falsy=r.$_terms.falsy||new i;for(let s=0;s<t.length;++s){const i=t[s];e(void 0!==i,"Cannot call falsy with undefined"),r.$_terms.falsy.add(i)}return r}},sensitive:{method(e=!0){return this.$_setFlag("sensitive",e)}}},cast:{number:{from:r.isBool,to:(e,t)=>e?1:0},string:{from:r.isBool,to:(e,t)=>e?"true":"false"}},manifest:{build:(e,t)=>(t.truthy&&(e=e.truthy(...t.truthy)),t.falsy&&(e=e.falsy(...t.falsy)),e)},messages:{"boolean.base":"{{#label}} must be a boolean"}}),ke}function Xe(){if(je)return Ce;je=1;const e=c(),t=Ue(),s=V(),i=H(),r={isDate:function(e){return e instanceof Date}};return Ce=t.extend({type:"date",coerce:{from:["number","string"],method:(e,{schema:t})=>({value:r.parse(e,t._flags.format)||e})},validate(e,{schema:t,error:s,prefs:i}){if(e instanceof Date&&!isNaN(e.getTime()))return;const r=t._flags.format;return i.convert&&r&&"string"==typeof e?{value:e,errors:s("date.format",{format:r})}:{value:e,errors:s("date.base")}},rules:{compare:{method:!1,validate(e,t,{date:i},{name:r,operator:n,args:a}){const o="now"===i?Date.now():i.getTime();return s.compare(e.getTime(),o,n)?e:t.error("date."+r,{limit:a.date,value:e})},args:[{name:"date",ref:!0,normalize:e=>"now"===e?e:r.parse(e),assert:e=>null!==e,message:"must have a valid date format"}]},format:{method(t){return e(["iso","javascript","unix"].includes(t),"Unknown date format",t),this.$_setFlag("format",t)}},greater:{method(e){return this.$_addRule({name:"greater",method:"compare",args:{date:e},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(e){return this.$_addRule({name:"less",method:"compare",args:{date:e},operator:"<"})}},max:{method(e){return this.$_addRule({name:"max",method:"compare",args:{date:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"compare",args:{date:e},operator:">="})}},timestamp:{method(t="javascript"){return e(["javascript","unix"].includes(t),'"type" must be one of "javascript, unix"'),this.format(t)}}},cast:{number:{from:r.isDate,to:(e,t)=>e.getTime()},string:{from:r.isDate,to:(e,{prefs:t})=>i.date(e,t)}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),r.parse=function(e,t){if(e instanceof Date)return e;if("string"!=typeof e&&(isNaN(e)||!isFinite(e)))return null;if(/^\s*$/.test(e))return null;if("iso"===t)return s.isIsoDate(e)?r.date(e.toString()):null;const i=e;if("string"==typeof e&&/^[+-]?\d+(\.\d+)?$/.test(e)&&(e=parseFloat(e)),t){if("javascript"===t)return r.date(1*e);if("unix"===t)return r.date(1e3*e);if("string"==typeof i)return null}return r.date(e)},r.date=function(e){const t=new Date(e);return isNaN(t.getTime())?null:t},Ce}const He=c(),Ke=b,Ve=_e,qe=f,We={};var ze=function(e,t,s={}){if(He(e&&"object"==typeof e,"Invalid defaults value: must be an object"),He(!t||!0===t||"object"==typeof t,"Invalid source value: must be true, falsy or an object"),He("object"==typeof s,"Invalid options: must be an object"),!t)return null;if(s.shallow)return We.applyToDefaultsWithShallow(e,t,s);const i=Ke(e);if(!0===t)return i;const r=void 0!==s.nullOverride&&s.nullOverride;return Ve(i,t,{nullOverride:r,mergeArrays:!1})};We.applyToDefaultsWithShallow=function(e,t,s){const i=s.shallow;He(Array.isArray(i),"Invalid keys");const r=new Map,n=!0===t?null:new Set;for(let s of i){s=Array.isArray(s)?s:s.split(".");const i=qe(e,s);i&&"object"==typeof i?r.set(i,n&&qe(t,s)||i):n&&n.add(s)}const a=Ke(e,{},r);if(!n)return a;for(const e of n)We.reachCopy(a,t,e);const o=void 0!==s.nullOverride&&s.nullOverride;return Ve(a,t,{nullOverride:o,mergeArrays:!1})},We.reachCopy=function(e,t,s){for(const e of s){if(!(e in t))return;const s=t[e];if("object"!=typeof s||null===s)return;t=s}const i=t;let r=e;for(let e=0;e<s.length-1;++e){const t=s[e];"object"!=typeof r[t]&&(r[t]={}),r=r[t]}r[s[s.length-1]]=i};var Ye={};const Je=c(),Qe={};var et,tt,st,it,rt,nt,at,ot,lt,ct;function dt(){if(tt)return et;tt=1;const e=ze,t=c(),s=b,i=Ye,r=Ue(),n=V(),a=Y(),o=M(),l=X(),d=H(),u={renameDefaults:{alias:!1,multiple:!1,override:!1}};return et=r.extend({type:"_keys",properties:{typeof:"object"},flags:{unknown:{default:void 0}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(e,t)=>e.keys(t),validate(e,{schema:t,error:s,state:i,prefs:r}){if(!e||typeof e!==t.$_property("typeof")||Array.isArray(e))return{value:e,errors:s("object.base",{type:t.$_property("typeof")})};if(!(t.$_terms.renames||t.$_terms.dependencies||t.$_terms.keys||t.$_terms.patterns||t.$_terms.externals))return;e=u.clone(e,r);const n=[];if(t.$_terms.renames&&!u.rename(t,e,i,r,n))return{value:e,errors:n};if(!t.$_terms.keys&&!t.$_terms.patterns&&!t.$_terms.dependencies)return{value:e,errors:n};const a=new Set(Object.keys(e));if(t.$_terms.keys){const s=[e,...i.ancestors];for(const o of t.$_terms.keys){const t=o.key,l=e[t];a.delete(t);const c=i.localize([...i.path,t],s,o),d=o.schema.$_validate(l,c,r);if(d.errors){if(r.abortEarly)return{value:e,errors:d.errors};void 0!==d.value&&(e[t]=d.value),n.push(...d.errors)}else"strip"===o.schema._flags.result||void 0===d.value&&void 0!==l?delete e[t]:void 0!==d.value&&(e[t]=d.value)}}if(a.size||t._flags._hasPatternMatch){const s=u.unknown(t,e,a,n,i,r);if(s)return s}if(t.$_terms.dependencies)for(const s of t.$_terms.dependencies){if(null!==s.key&&!1===u.isPresent(s.options)(s.key.resolve(e,i,r,null,{shadow:!1})))continue;const a=u.dependencies[s.rel](t,s,e,i,r);if(a){const s=t.$_createError(a.code,e,a.context,i,r);if(r.abortEarly)return{value:e,errors:s};n.push(s)}}return{value:e,errors:n}},rules:{and:{method(...e){return n.verifyFlat(e,"and"),u.dependency(this,"and",null,e)}},append:{method(e){return null==e||0===Object.keys(e).length?this:this.keys(e)}},assert:{method(e,s,i){d.isTemplate(e)||(e=a.ref(e)),t(void 0===i||"string"==typeof i,"Message must be a string"),s=this.$_compile(s,{appendPath:!0});const r=this.$_addRule({name:"assert",args:{subject:e,schema:s,message:i}});return r.$_mutateRegister(e),r.$_mutateRegister(s),r},validate(e,{error:t,prefs:s,state:i},{subject:r,schema:n,message:a}){const o=r.resolve(e,i,s),c=l.isRef(r)?r.absolute(i):[];return n.$_match(o,i.localize(c,[e,...i.ancestors],n),s)?e:t("object.assert",{subject:r,message:a})},args:["subject","schema","message"],multi:!0},instance:{method(e,s){return t("function"==typeof e,"constructor must be a function"),s=s||e.name,this.$_addRule({name:"instance",args:{constructor:e,name:s}})},validate:(e,t,{constructor:s,name:i})=>e instanceof s?e:t.error("object.instance",{type:i,value:e}),args:["constructor","name"]},keys:{method(e){t(void 0===e||"object"==typeof e,"Object schema must be a valid object"),t(!n.isSchema(e),"Object schema cannot be a joi schema");const s=this.clone();if(e)if(Object.keys(e).length){s.$_terms.keys=s.$_terms.keys?s.$_terms.keys.filter((t=>!e.hasOwnProperty(t.key))):new u.Keys;for(const t in e)n.tryWithPath((()=>s.$_terms.keys.push({key:t,schema:this.$_compile(e[t])})),t)}else s.$_terms.keys=new u.Keys;else s.$_terms.keys=null;return s.$_mutateRebuild()}},length:{method(e){return this.$_addRule({name:"length",args:{limit:e},operator:"="})},validate:(e,t,{limit:s},{name:i,operator:r,args:a})=>n.compare(Object.keys(e).length,s,r)?e:t.error("object."+i,{limit:a.limit,value:e}),args:[{name:"limit",ref:!0,assert:n.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}},nand:{method(...e){return n.verifyFlat(e,"nand"),u.dependency(this,"nand",null,e)}},or:{method(...e){return n.verifyFlat(e,"or"),u.dependency(this,"or",null,e)}},oxor:{method(...e){return u.dependency(this,"oxor",null,e)}},pattern:{method(e,s,i={}){const r=e instanceof RegExp;r||(e=this.$_compile(e,{appendPath:!0})),t(void 0!==s,"Invalid rule"),n.assertOptions(i,["fallthrough","matches"]),r&&t(!e.flags.includes("g")&&!e.flags.includes("y"),"pattern should not use global or sticky mode"),s=this.$_compile(s,{appendPath:!0});const a=this.clone();a.$_terms.patterns=a.$_terms.patterns||[];const o={[r?"regex":"schema"]:e,rule:s};return i.matches&&(o.matches=this.$_compile(i.matches),"array"!==o.matches.type&&(o.matches=o.matches.$_root.array().items(o.matches)),a.$_mutateRegister(o.matches),a.$_setFlag("_hasPatternMatch",!0,{clone:!1})),i.fallthrough&&(o.fallthrough=!0),a.$_terms.patterns.push(o),a.$_mutateRegister(s),a}},ref:{method(){return this.$_addRule("ref")},validate:(e,t)=>l.isRef(e)?e:t.error("object.refType",{value:e})},regex:{method(){return this.$_addRule("regex")},validate:(e,t)=>e instanceof RegExp?e:t.error("object.regex",{value:e})},rename:{method(s,i,r={}){t("string"==typeof s||s instanceof RegExp,"Rename missing the from argument"),t("string"==typeof i||i instanceof d,"Invalid rename to argument"),t(i!==s,"Cannot rename key to same name:",s),n.assertOptions(r,["alias","ignoreUndefined","override","multiple"]);const a=this.clone();a.$_terms.renames=a.$_terms.renames||[];for(const e of a.$_terms.renames)t(e.from!==s,"Cannot rename the same key multiple times");return i instanceof d&&a.$_mutateRegister(i),a.$_terms.renames.push({from:s,to:i,options:e(u.renameDefaults,r)}),a}},schema:{method(e="any"){return this.$_addRule({name:"schema",args:{type:e}})},validate:(e,t,{type:s})=>!n.isSchema(e)||"any"!==s&&e.type!==s?t.error("object.schema",{type:s}):e},unknown:{method(e){return this.$_setFlag("unknown",!1!==e)}},with:{method(e,t,s={}){return u.dependency(this,"with",e,t,s)}},without:{method(e,t,s={}){return u.dependency(this,"without",e,t,s)}},xor:{method(...e){return n.verifyFlat(e,"xor"),u.dependency(this,"xor",null,e)}}},overrides:{default(e,t){return void 0===e&&(e=n.symbols.deepDefault),this.$_parent("default",e,t)}},rebuild(e){if(e.$_terms.keys){const t=new i.Sorter;for(const s of e.$_terms.keys)n.tryWithPath((()=>t.add(s,{after:s.schema.$_rootReferences(),group:s.key})),s.key);e.$_terms.keys=new u.Keys(...t.nodes)}},manifest:{build(e,t){if(t.keys&&(e=e.keys(t.keys)),t.dependencies)for(const{rel:s,key:i=null,peers:r,options:n}of t.dependencies)e=u.dependency(e,s,i,r,n);if(t.patterns)for(const{regex:s,schema:i,rule:r,fallthrough:n,matches:a}of t.patterns)e=e.pattern(s||i,r,{fallthrough:n,matches:a});if(t.renames)for(const{from:s,to:i,options:r}of t.renames)e=e.rename(s,i,r);return e}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),u.clone=function(e,t){if("object"==typeof e){if(t.nonEnumerables)return s(e,{shallow:!0});const i=Object.create(Object.getPrototypeOf(e));return Object.assign(i,e),i}const i=function(...t){return e.apply(this,t)};return i.prototype=s(e.prototype),Object.defineProperty(i,"name",{value:e.name,writable:!1}),Object.defineProperty(i,"length",{value:e.length,writable:!1}),Object.assign(i,e),i},u.dependency=function(e,s,i,r,o){t(null===i||"string"==typeof i,s,"key must be a strings"),o||(o=r.length>1&&"object"==typeof r[r.length-1]?r.pop():{}),n.assertOptions(o,["separator","isPresent"]),r=[].concat(r);const l=n.default(o.separator,"."),c=[];for(const e of r)t("string"==typeof e,s,"peers must be strings"),c.push(a.ref(e,{separator:l,ancestor:0,prefix:!1}));null!==i&&(i=a.ref(i,{separator:l,ancestor:0,prefix:!1}));const d=e.clone();return d.$_terms.dependencies=d.$_terms.dependencies||[],d.$_terms.dependencies.push(new u.Dependency(s,i,c,r,o)),d},u.dependencies={and(e,t,s,i,r){const n=[],a=[],o=t.peers.length,l=u.isPresent(t.options);for(const e of t.peers)!1===l(e.resolve(s,i,r,null,{shadow:!1}))?n.push(e.key):a.push(e.key);if(n.length!==o&&a.length!==o)return{code:"object.and",context:{present:a,presentWithLabels:u.keysToLabels(e,a),missing:n,missingWithLabels:u.keysToLabels(e,n)}}},nand(e,t,s,i,r){const n=[],a=u.isPresent(t.options);for(const e of t.peers)a(e.resolve(s,i,r,null,{shadow:!1}))&&n.push(e.key);if(n.length!==t.peers.length)return;const o=t.paths[0],l=t.paths.slice(1);return{code:"object.nand",context:{main:o,mainWithLabel:u.keysToLabels(e,o),peers:l,peersWithLabels:u.keysToLabels(e,l)}}},or(e,t,s,i,r){const n=u.isPresent(t.options);for(const e of t.peers)if(n(e.resolve(s,i,r,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:t.paths,peersWithLabels:u.keysToLabels(e,t.paths)}}},oxor(e,t,s,i,r){const n=[],a=u.isPresent(t.options);for(const e of t.peers)a(e.resolve(s,i,r,null,{shadow:!1}))&&n.push(e.key);if(!n.length||1===n.length)return;const o={peers:t.paths,peersWithLabels:u.keysToLabels(e,t.paths)};return o.present=n,o.presentWithLabels=u.keysToLabels(e,n),{code:"object.oxor",context:o}},with(e,t,s,i,r){const n=u.isPresent(t.options);for(const a of t.peers)if(!1===n(a.resolve(s,i,r,null,{shadow:!1})))return{code:"object.with",context:{main:t.key.key,mainWithLabel:u.keysToLabels(e,t.key.key),peer:a.key,peerWithLabel:u.keysToLabels(e,a.key)}}},without(e,t,s,i,r){const n=u.isPresent(t.options);for(const a of t.peers)if(n(a.resolve(s,i,r,null,{shadow:!1})))return{code:"object.without",context:{main:t.key.key,mainWithLabel:u.keysToLabels(e,t.key.key),peer:a.key,peerWithLabel:u.keysToLabels(e,a.key)}}},xor(e,t,s,i,r){const n=[],a=u.isPresent(t.options);for(const e of t.peers)a(e.resolve(s,i,r,null,{shadow:!1}))&&n.push(e.key);if(1===n.length)return;const o={peers:t.paths,peersWithLabels:u.keysToLabels(e,t.paths)};return 0===n.length?{code:"object.missing",context:o}:(o.present=n,o.presentWithLabels=u.keysToLabels(e,n),{code:"object.xor",context:o})}},u.keysToLabels=function(e,t){return Array.isArray(t)?t.map((t=>e.$_mapLabels(t))):e.$_mapLabels(t)},u.isPresent=function(e){return"function"==typeof e.isPresent?e.isPresent:e=>void 0!==e},u.rename=function(e,t,s,i,r){const n={};for(const a of e.$_terms.renames){const o=[],l="string"!=typeof a.from;if(l)for(const e in t){if(void 0===t[e]&&a.options.ignoreUndefined)continue;if(e===a.to)continue;const s=a.from.exec(e);s&&o.push({from:e,to:a.to,match:s})}else!Object.prototype.hasOwnProperty.call(t,a.from)||void 0===t[a.from]&&a.options.ignoreUndefined||o.push(a);for(const c of o){const o=c.from;let u=c.to;if(u instanceof d&&(u=u.render(t,s,i,c.match)),o!==u){if(!a.options.multiple&&n[u]&&(r.push(e.$_createError("object.rename.multiple",t,{from:o,to:u,pattern:l},s,i)),i.abortEarly))return!1;if(Object.prototype.hasOwnProperty.call(t,u)&&!a.options.override&&!n[u]&&(r.push(e.$_createError("object.rename.override",t,{from:o,to:u,pattern:l},s,i)),i.abortEarly))return!1;void 0===t[o]?delete t[u]:t[u]=t[o],n[u]=!0,a.options.alias||delete t[o]}}}return!0},u.unknown=function(e,t,s,i,r,a){if(e.$_terms.patterns){let n=!1;const l=e.$_terms.patterns.map((e=>{if(e.matches)return n=!0,[]})),c=[t,...r.ancestors];for(const n of s){const o=t[n],d=[...r.path,n];for(let u=0;u<e.$_terms.patterns.length;++u){const f=e.$_terms.patterns[u];if(f.regex){const e=f.regex.test(n);if(r.mainstay.tracer.debug(r,"rule",`pattern.${u}`,e?"pass":"error"),!e)continue}else if(!f.schema.$_match(n,r.nest(f.schema,`pattern.${u}`),a))continue;s.delete(n);const p=r.localize(d,c,{schema:f.rule,key:n}),h=f.rule.$_validate(o,p,a);if(h.errors){if(a.abortEarly)return{value:t,errors:h.errors};i.push(...h.errors)}if(f.matches&&l[u].push(n),t[n]=h.value,!f.fallthrough)break}}if(n)for(let s=0;s<l.length;++s){const n=l[s];if(!n)continue;const d=e.$_terms.patterns[s].matches,u=r.localize(r.path,c,d),f=d.$_validate(n,u,a);if(f.errors){const s=o.details(f.errors,{override:!1});s.matches=n;const l=e.$_createError("object.pattern.match",t,s,r,a);if(a.abortEarly)return{value:t,errors:l};i.push(l)}}}if(!s.size||!e.$_terms.keys&&!e.$_terms.patterns)return;if(a.stripUnknown&&void 0===e._flags.unknown||a.skipFunctions){const e=!!a.stripUnknown&&(!0===a.stripUnknown||!!a.stripUnknown.objects);for(const i of s)e?(delete t[i],s.delete(i)):"function"==typeof t[i]&&s.delete(i)}if(!n.default(e._flags.unknown,a.allowUnknown))for(const n of s){const s=r.localize([...r.path,n],[]),o=e.$_createError("object.unknown",t[n],{child:n},s,a,{flags:!1});if(a.abortEarly)return{value:t,errors:o};i.push(o)}},u.Dependency=class{constructor(e,t,s,i,r){this.rel=e,this.key=t,this.peers=s,this.paths=i,this.options=r}describe(){const e={rel:this.rel,peers:this.paths};return null!==this.key&&(e.key=this.key.key),"."!==this.peers[0].separator&&(e.options={...e.options,separator:this.peers[0].separator}),this.options.isPresent&&(e.options={...e.options,isPresent:this.options.isPresent}),e}},u.Keys=class extends Array{concat(e){const t=this.slice(),s=new Map;for(let e=0;e<t.length;++e)s.set(t[e].key,e);for(const i of e){const e=i.key,r=s.get(e);void 0!==r?t[r]={key:e,schema:t[r].schema.concat(i.schema)}:t.push(i)}return t}},et}function ut(){if(it)return st;it=1;const e=c(),t=dt();return st=t.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(t){return e(Number.isSafeInteger(t)&&t>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:t}})},validate:(e,t,{n:s})=>e.length===s?e:t.error("function.arity",{n:s})},class:{method(){return this.$_addRule("class")},validate:(e,t)=>/^\s*class\s/.test(e.toString())?e:t.error("function.class",{value:e})},minArity:{method(t){return e(Number.isSafeInteger(t)&&t>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:t}})},validate:(e,t,{n:s})=>e.length>=s?e:t.error("function.minArity",{n:s})},maxArity:{method(t){return e(Number.isSafeInteger(t)&&t>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:t}})},validate:(e,t,{n:s})=>e.length<=s?e:t.error("function.maxArity",{n:s})}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}}),st}function ft(){if(nt)return rt;nt=1;const e=c(),t=Ue(),s=V(),i=Y(),r=M(),n={};return rt=t.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(e,t)=>e.ref(t),validate(t,{schema:s,state:i,prefs:r}){e(s.$_terms.link,"Uninitialized link schema");const a=n.generate(s,t,i,r),o=s.$_terms.link[0].ref;return a.$_validate(t,i.nest(a,`link:${o.display}:${a.type}`),r)},generate:(e,t,s,i)=>n.generate(e,t,s,i),rules:{ref:{method(t){e(!this.$_terms.link,"Cannot reinitialize schema"),t=i.ref(t),e("value"===t.type||"local"===t.type,"Invalid reference type:",t.type),e("local"===t.type||"root"===t.ancestor||t.ancestor>0,"Link cannot reference itself");const s=this.clone();return s.$_terms.link=[{ref:t}],s}},relative:{method(e=!0){return this.$_setFlag("relative",e)}}},overrides:{concat(t){e(this.$_terms.link,"Uninitialized link schema"),e(s.isSchema(t),"Invalid schema object"),e("link"!==t.type,"Cannot merge type link with another link");const i=this.clone();return i.$_terms.whens||(i.$_terms.whens=[]),i.$_terms.whens.push({concat:t}),i.$_mutateRebuild()}},manifest:{build:(t,s)=>(e(s.link,"Invalid link description missing link"),t.ref(s.link))}}),n.generate=function(e,t,s,i){let r=s.mainstay.links.get(e);if(r)return r._generate(t,s,i).schema;const a=e.$_terms.link[0].ref,{perspective:o,path:l}=n.perspective(a,s);n.assert(o,"which is outside of schema boundaries",a,e,s,i);try{r=l.length?o.$_reach(l):o}catch(t){n.assert(!1,"to non-existing schema",a,e,s,i)}return n.assert("link"!==r.type,"which is another link",a,e,s,i),e._flags.relative||s.mainstay.links.set(e,r),r._generate(t,s,i).schema},n.perspective=function(e,t){if("local"===e.type){for(const{schema:s,key:i}of t.schemas){if((s._flags.id||i)===e.path[0])return{perspective:s,path:e.path.slice(1)};if(s.$_terms.shared)for(const t of s.$_terms.shared)if(t._flags.id===e.path[0])return{perspective:t,path:e.path.slice(1)}}return{perspective:null,path:null}}return"root"===e.ancestor?{perspective:t.schemas[t.schemas.length-1].schema,path:e.path}:{perspective:t.schemas[e.ancestor]&&t.schemas[e.ancestor].schema,path:e.path}},n.assert=function(t,s,i,n,a,o){t||e(!1,`"${r.label(n._flags,a,o)}" contains link reference "${i.display}" ${s}`)},rt}function pt(){if(ot)return at;ot=1;const e=c(),t=Ue(),s=V(),i={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/,decimalPlaces(e){const t=e.toString(),s=t.indexOf("."),i=t.indexOf("e");return(s<0?0:(i<0?t.length:i)-s-1)+(i<0?0:Math.max(0,-parseInt(t.slice(i+1))))}};return at=t.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(e,{schema:t,error:s}){if(!e.match(i.numberRx))return;e=e.trim();const r={value:parseFloat(e)};if(0===r.value&&(r.value=0),!t._flags.unsafe)if(e.match(/e/i)){if(i.extractSignificantDigits(e)!==i.extractSignificantDigits(String(r.value)))return r.errors=s("number.unsafe"),r}else{const t=r.value.toString();if(t.match(/e/i))return r;if(t!==i.normalizeDecimal(e))return r.errors=s("number.unsafe"),r}return r}},validate(e,{schema:t,error:i,prefs:r}){if(e===1/0||e===-1/0)return{value:e,errors:i("number.infinity")};if(!s.isNumber(e))return{value:e,errors:i("number.base")};const n={value:e};if(r.convert){const e=t.$_getRule("precision");if(e){const t=Math.pow(10,e.args.limit);n.value=Math.round(n.value*t)/t}}return 0===n.value&&(n.value=0),!t._flags.unsafe&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)&&(n.errors=i("number.unsafe")),n},rules:{compare:{method:!1,validate:(e,t,{limit:i},{name:r,operator:n,args:a})=>s.compare(e,i,n)?e:t.error("number."+r,{limit:a.limit,value:e}),args:[{name:"limit",ref:!0,assert:s.isNumber,message:"must be a number"}]},greater:{method(e){return this.$_addRule({name:"greater",method:"compare",args:{limit:e},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(e,t)=>Math.trunc(e)-e==0?e:t.error("number.integer")},less:{method(e){return this.$_addRule({name:"less",method:"compare",args:{limit:e},operator:"<"})}},max:{method(e){return this.$_addRule({name:"max",method:"compare",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"compare",args:{limit:e},operator:">="})}},multiple:{method(e){const t="number"==typeof e?i.decimalPlaces(e):null,s=Math.pow(10,t);return this.$_addRule({name:"multiple",args:{base:e,baseDecimalPlace:t,pfactor:s}})},validate:(e,t,{base:s,baseDecimalPlace:r,pfactor:n},a)=>i.decimalPlaces(e)>r?t.error("number.multiple",{multiple:a.args.base,value:e}):Math.round(n*e)%Math.round(n*s)==0?e:t.error("number.multiple",{multiple:a.args.base,value:e}),args:[{name:"base",ref:!0,assert:e=>"number"==typeof e&&isFinite(e)&&e>0,message:"must be a positive number"},"baseDecimalPlace","pfactor"],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(e,t)=>Number.isSafeInteger(e)&&e>=0&&e<=65535?e:t.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(t){return e(Number.isSafeInteger(t),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:t}})},validate(e,t,{limit:s}){const r=e.toString().match(i.precisionRx);return Math.max((r[1]?r[1].length:0)-(r[2]?parseInt(r[2],10):0),0)<=s?e:t.error("number.precision",{limit:s,value:e})},convert:!0},sign:{method(t){return e(["negative","positive"].includes(t),"Invalid sign",t),this.$_addRule({name:"sign",args:{sign:t}})},validate:(e,t,{sign:s})=>"negative"===s&&e<0||"positive"===s&&e>0?e:t.error(`number.${s}`)},unsafe:{method(t=!0){return e("boolean"==typeof t,"enabled must be a boolean"),this.$_setFlag("unsafe",t)}}},cast:{string:{from:e=>"number"==typeof e,to:(e,t)=>e.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),i.extractSignificantDigits=function(e){return e.replace(i.exponentialPartRegex,"").replace(i.dotRegex,"").replace(i.trailingZerosRegex,"").replace(i.leadingSignAndZerosRegex,"")},i.normalizeDecimal=function(e){return(e=e.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&e.endsWith("0")&&(e=e.replace(/0+$/,"")),"-0"===e?"0":e},at}function ht(){if(ct)return lt;ct=1;const e=dt();return lt=e.extend({type:"object",cast:{map:{from:e=>e&&"object"==typeof e,to:(e,t)=>new Map(Object.entries(e))}}})}Ye.Sorter=class{constructor(){this._items=[],this.nodes=[]}add(e,t){const s=[].concat((t=t||{}).before||[]),i=[].concat(t.after||[]),r=t.group||"?",n=t.sort||0;Je(!s.includes(r),`Item cannot come before itself: ${r}`),Je(!s.includes("?"),"Item cannot come before unassociated items"),Je(!i.includes(r),`Item cannot come after itself: ${r}`),Je(!i.includes("?"),"Item cannot come after unassociated items"),Array.isArray(e)||(e=[e]);for(const t of e){const e={seq:this._items.length,sort:n,before:s,after:i,group:r,node:t};this._items.push(e)}if(!t.manual){const e=this._sort();Je(e,"item","?"!==r?`added into group ${r}`:"","created a dependencies error")}return this.nodes}merge(e){Array.isArray(e)||(e=[e]);for(const t of e)if(t)for(const e of t._items)this._items.push(Object.assign({},e));this._items.sort(Qe.mergeSort);for(let e=0;e<this._items.length;++e)this._items[e].seq=e;const t=this._sort();return Je(t,"merge created a dependencies error"),this.nodes}sort(){const e=this._sort();return Je(e,"sort created a dependencies error"),this.nodes}_sort(){const e={},t=Object.create(null),s=Object.create(null);for(const i of this._items){const r=i.seq,n=i.group;s[n]=s[n]||[],s[n].push(r),e[r]=i.before;for(const e of i.after)t[e]=t[e]||[],t[e].push(r)}for(const t in e){const i=[];for(const r in e[t]){const n=e[t][r];s[n]=s[n]||[],i.push(...s[n])}e[t]=i}for(const i in t)if(s[i])for(const r of s[i])e[r].push(...t[i]);const i={};for(const t in e){const s=e[t];for(const e of s)i[e]=i[e]||[],i[e].push(t)}const r={},n=[];for(let e=0;e<this._items.length;++e){let t=e;if(i[e]){t=null;for(let e=0;e<this._items.length;++e){if(!0===r[e])continue;i[e]||(i[e]=[]);const s=i[e].length;let n=0;for(let t=0;t<s;++t)r[i[e][t]]&&++n;if(n===s){t=e;break}}}null!==t&&(r[t]=!0,n.push(t))}if(n.length!==this._items.length)return!1;const a={};for(const e of this._items)a[e.seq]=e;this._items=[],this.nodes=[];for(const e of n){const t=a[e];this.nodes.push(t.node),this._items.push(t)}return!0}},Qe.mergeSort=(e,t)=>e.sort===t.sort?0:e.sort<t.sort?-1:1;var mt={},_t={};!function(e){e.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},e.code=function(t){return{code:t,error:e.codes[t]}}}(_t),function(t){const s=_t,i={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:e.URL||URL};t.analyze=function(e,t={}){if(!e)return s.code("DOMAIN_NON_EMPTY_STRING");if("string"!=typeof e)throw new Error("Invalid input: domain must be a string");if(e.length>256)return s.code("DOMAIN_TOO_LONG");if(!!i.nonAsciiRx.test(e)){if(!1===t.allowUnicode)return s.code("DOMAIN_INVALID_UNICODE_CHARS");e=e.normalize("NFC")}if(i.domainControlRx.test(e))return s.code("DOMAIN_INVALID_CHARS");e=i.punycode(e),t.allowFullyQualified&&"."===e[e.length-1]&&(e=e.slice(0,-1));const r=t.minDomainSegments||i.minDomainSegments,n=e.split(".");if(n.length<r)return s.code("DOMAIN_SEGMENTS_COUNT");if(t.maxDomainSegments&&n.length>t.maxDomainSegments)return s.code("DOMAIN_SEGMENTS_COUNT_MAX");const a=t.tlds;if(a){const e=n[n.length-1].toLowerCase();if(a.deny&&a.deny.has(e)||a.allow&&!a.allow.has(e))return s.code("DOMAIN_FORBIDDEN_TLDS")}for(let e=0;e<n.length;++e){const t=n[e];if(!t.length)return s.code("DOMAIN_EMPTY_SEGMENT");if(t.length>63)return s.code("DOMAIN_LONG_SEGMENT");if(e<n.length-1){if(!i.domainSegmentRx.test(t))return s.code("DOMAIN_INVALID_CHARS")}else if(!i.tldSegmentRx.test(t))return s.code("DOMAIN_INVALID_TLDS_CHARS")}return null},t.isValid=function(e,s){return!t.analyze(e,s)},i.punycode=function(e){e.includes("%")&&(e=e.replace(/%/g,"%25"));try{return new i.URL(`http://${e}`).host}catch(t){return e}}}(mt);var gt={};const yt=mt,vt=_t,bt={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(t.TextEncoder||TextEncoder)};gt.analyze=function(e,t){return bt.email(e,t)},gt.isValid=function(e,t){return!bt.email(e,t)},bt.email=function(e,t={}){if("string"!=typeof e)throw new Error("Invalid input: email must be a string");if(!e)return vt.code("EMPTY_STRING");const s=!bt.nonAsciiRx.test(e);if(!s){if(!1===t.allowUnicode)return vt.code("FORBIDDEN_UNICODE");e=e.normalize("NFC")}const i=e.split("@");if(2!==i.length)return i.length>2?vt.code("MULTIPLE_AT_CHAR"):vt.code("MISSING_AT_CHAR");const[r,n]=i;if(!r)return vt.code("EMPTY_LOCAL");if(!t.ignoreLength){if(e.length>254)return vt.code("ADDRESS_TOO_LONG");if(bt.encoder.encode(r).length>64)return vt.code("LOCAL_TOO_LONG")}return bt.local(r,s)||yt.analyze(n,t)},bt.local=function(e,t){const s=e.split(".");for(const e of s){if(!e.length)return vt.code("EMPTY_LOCAL_SEGMENT");if(t){if(!bt.atextRx.test(e))return vt.code("INVALID_LOCAL_CHARS")}else for(const t of e){if(bt.atextRx.test(t))continue;const e=bt.binary(t);if(!bt.atomRx.test(e))return vt.code("INVALID_LOCAL_CHARS")}}},bt.binary=function(e){return Array.from(bt.encoder.encode(e)).map((e=>String.fromCharCode(e))).join("")},bt.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,bt.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"));var wt={},At={},Et=function(e){return e.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")};const Rt=c(),St=Et,Ot={generate:function(){const e={},t="\\dA-Fa-f",s="["+t+"]",i="\\w-\\.~",r="!\\$&'\\(\\)\\*\\+,;=",n="%"+t,a=i+n+r+":@",o="["+a+"]",l="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";e.ipv4address="(?:"+l+"\\.){3}"+l;const c=s+"{1,4}",d="(?:"+c+":"+c+"|"+e.ipv4address+")",u="(?:"+c+":){6}"+d,f="::(?:"+c+":){5}"+d,p="(?:"+c+")?::(?:"+c+":){4}"+d,h="(?:(?:"+c+":){0,1}"+c+")?::(?:"+c+":){3}"+d,m="(?:(?:"+c+":){0,2}"+c+")?::(?:"+c+":){2}"+d,_="(?:(?:"+c+":){0,3}"+c+")?::"+c+":"+d,g="(?:(?:"+c+":){0,4}"+c+")?::"+d,y="(?:(?:"+c+":){0,5}"+c+")?::"+c,v="(?:(?:"+c+":){0,6}"+c+")?::";e.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",e.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",e.ipv6address="(?:"+u+"|"+f+"|"+p+"|"+h+"|"+m+"|"+_+"|"+g+"|"+y+"|"+v+")",e.ipvFuture="v"+s+"+\\.["+i+r+":]+",e.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",e.schemeRegex=new RegExp(e.scheme);const b="["+i+n+r+":]*",w="["+i+n+r+"]{1,255}",A="(?:"+("\\[(?:"+e.ipv6address+"|"+e.ipvFuture+")\\]")+"|"+e.ipv4address+"|"+w+")",E="(?:"+b+"@)?"+A+"(?::\\d*)?",R="(?:"+b+"@)?("+A+")(?::\\d*)?",S=o+"*",O=o+"+",$="(?:\\/"+S+")*",x="\\/(?:"+O+$+")?",N=O+$,I="["+i+n+r+"@]+"+$,k="(?:\\/\\/\\/"+S+$+")";return e.hierPart="(?:(?:\\/\\/"+E+$+")|"+x+"|"+N+"|"+k+")",e.hierPartCapture="(?:(?:\\/\\/"+R+$+")|"+x+"|"+N+")",e.relativeRef="(?:(?:\\/\\/"+E+$+")|"+x+"|"+I+"|)",e.relativeRefCapture="(?:(?:\\/\\/"+R+$+")|"+x+"|"+I+"|)",e.query="["+a+"\\/\\?]*(?=#|$)",e.queryWithSquareBrackets="["+a+"\\[\\]\\/\\?]*(?=#|$)",e.fragment="["+a+"\\/\\?]*",e}};Ot.rfc3986=Ot.generate(),At.ip={v4Cidr:Ot.rfc3986.ipv4Cidr,v6Cidr:Ot.rfc3986.ipv6Cidr,ipv4:Ot.rfc3986.ipv4address,ipv6:Ot.rfc3986.ipv6address,ipvfuture:Ot.rfc3986.ipvFuture},Ot.createRegex=function(e){const t=Ot.rfc3986,s="(?:\\?"+(e.allowQuerySquareBrackets?t.queryWithSquareBrackets:t.query)+")?(?:#"+t.fragment+")?",i=e.domain?t.relativeRefCapture:t.relativeRef;if(e.relativeOnly)return Ot.wrap(i+s);let r="";if(e.scheme){Rt(e.scheme instanceof RegExp||"string"==typeof e.scheme||Array.isArray(e.scheme),"scheme must be a RegExp, String, or Array");const s=[].concat(e.scheme);Rt(s.length>=1,"scheme must have at least 1 scheme specified");const i=[];for(let e=0;e<s.length;++e){const r=s[e];Rt(r instanceof RegExp||"string"==typeof r,"scheme at position "+e+" must be a RegExp or String"),r instanceof RegExp?i.push(r.source.toString()):(Rt(t.schemeRegex.test(r),"scheme at position "+e+" must be a valid scheme"),i.push(St(r)))}r=i.join("|")}const n="(?:"+(r?"(?:"+r+")":t.scheme)+":"+(e.domain?t.hierPartCapture:t.hierPart)+")",a=e.allowRelative?"(?:"+n+"|"+i+")":n;return Ot.wrap(a+s,r)},Ot.wrap=function(e,t){return{raw:e=`(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])${e}`,regex:new RegExp(`^${e}$`),scheme:t}},Ot.uriRegex=Ot.createRegex({}),At.regex=function(e={}){return e.scheme||e.allowRelative||e.relativeOnly||e.allowQuerySquareBrackets||e.domain?Ot.createRegex(e):Ot.uriRegex};const $t=c(),xt=At;wt.regex=function(e={}){$t(void 0===e.cidr||"string"==typeof e.cidr,"options.cidr must be a string");const t=e.cidr?e.cidr.toLowerCase():"optional";$t(["required","optional","forbidden"].includes(t),"options.cidr must be one of required, optional, forbidden"),$t(void 0===e.version||"string"==typeof e.version||Array.isArray(e.version),"options.version must be a string or an array of string");let s=e.version||["ipv4","ipv6","ipvfuture"];Array.isArray(s)||(s=[s]),$t(s.length>=1,"options.version must have at least 1 version specified");for(let e=0;e<s.length;++e)$t("string"==typeof s[e],"options.version must only contain strings"),s[e]=s[e].toLowerCase(),$t(["ipv4","ipv6","ipvfuture"].includes(s[e]),"options.version contains unknown version "+s[e]+" - must be one of ipv4, ipv6, ipvfuture");s=Array.from(new Set(s));const i=s.map((e=>{if("forbidden"===t)return xt.ip[e];const s=`\\/${"ipv4"===e?xt.ip.v4Cidr:xt.ip.v6Cidr}`;return"required"===t?`${xt.ip[e]}${s}`:`${xt.ip[e]}(?:${s})?`})),r=`(?:${i.join("|")})`,n=new RegExp(`^${r}$`);return{cidr:t,versions:s,regex:n,raw:r}};const Nt={tlds:["AAA","AARP","ABB","ABBOTT","ABBVIE","ABC","ABLE","ABOGADO","ABUDHABI","AC","ACADEMY","ACCENTURE","ACCOUNTANT","ACCOUNTANTS","ACO","ACTOR","AD","ADS","ADULT","AE","AEG","AERO","AETNA","AF","AFL","AFRICA","AG","AGAKHAN","AGENCY","AI","AIG","AIRBUS","AIRFORCE","AIRTEL","AKDN","AL","ALIBABA","ALIPAY","ALLFINANZ","ALLSTATE","ALLY","ALSACE","ALSTOM","AM","AMAZON","AMERICANEXPRESS","AMERICANFAMILY","AMEX","AMFAM","AMICA","AMSTERDAM","ANALYTICS","ANDROID","ANQUAN","ANZ","AO","AOL","APARTMENTS","APP","APPLE","AQ","AQUARELLE","AR","ARAB","ARAMCO","ARCHI","ARMY","ARPA","ART","ARTE","AS","ASDA","ASIA","ASSOCIATES","AT","ATHLETA","ATTORNEY","AU","AUCTION","AUDI","AUDIBLE","AUDIO","AUSPOST","AUTHOR","AUTO","AUTOS","AVIANCA","AW","AWS","AX","AXA","AZ","AZURE","BA","BABY","BAIDU","BANAMEX","BAND","BANK","BAR","BARCELONA","BARCLAYCARD","BARCLAYS","BAREFOOT","BARGAINS","BASEBALL","BASKETBALL","BAUHAUS","BAYERN","BB","BBC","BBT","BBVA","BCG","BCN","BD","BE","BEATS","BEAUTY","BEER","BENTLEY","BERLIN","BEST","BESTBUY","BET","BF","BG","BH","BHARTI","BI","BIBLE","BID","BIKE","BING","BINGO","BIO","BIZ","BJ","BLACK","BLACKFRIDAY","BLOCKBUSTER","BLOG","BLOOMBERG","BLUE","BM","BMS","BMW","BN","BNPPARIBAS","BO","BOATS","BOEHRINGER","BOFA","BOM","BOND","BOO","BOOK","BOOKING","BOSCH","BOSTIK","BOSTON","BOT","BOUTIQUE","BOX","BR","BRADESCO","BRIDGESTONE","BROADWAY","BROKER","BROTHER","BRUSSELS","BS","BT","BUILD","BUILDERS","BUSINESS","BUY","BUZZ","BV","BW","BY","BZ","BZH","CA","CAB","CAFE","CAL","CALL","CALVINKLEIN","CAM","CAMERA","CAMP","CANON","CAPETOWN","CAPITAL","CAPITALONE","CAR","CARAVAN","CARDS","CARE","CAREER","CAREERS","CARS","CASA","CASE","CASH","CASINO","CAT","CATERING","CATHOLIC","CBA","CBN","CBRE","CC","CD","CENTER","CEO","CERN","CF","CFA","CFD","CG","CH","CHANEL","CHANNEL","CHARITY","CHASE","CHAT","CHEAP","CHINTAI","CHRISTMAS","CHROME","CHURCH","CI","CIPRIANI","CIRCLE","CISCO","CITADEL","CITI","CITIC","CITY","CK","CL","CLAIMS","CLEANING","CLICK","CLINIC","CLINIQUE","CLOTHING","CLOUD","CLUB","CLUBMED","CM","CN","CO","COACH","CODES","COFFEE","COLLEGE","COLOGNE","COM","COMCAST","COMMBANK","COMMUNITY","COMPANY","COMPARE","COMPUTER","COMSEC","CONDOS","CONSTRUCTION","CONSULTING","CONTACT","CONTRACTORS","COOKING","COOL","COOP","CORSICA","COUNTRY","COUPON","COUPONS","COURSES","CPA","CR","CREDIT","CREDITCARD","CREDITUNION","CRICKET","CROWN","CRS","CRUISE","CRUISES","CU","CUISINELLA","CV","CW","CX","CY","CYMRU","CYOU","CZ","DABUR","DAD","DANCE","DATA","DATE","DATING","DATSUN","DAY","DCLK","DDS","DE","DEAL","DEALER","DEALS","DEGREE","DELIVERY","DELL","DELOITTE","DELTA","DEMOCRAT","DENTAL","DENTIST","DESI","DESIGN","DEV","DHL","DIAMONDS","DIET","DIGITAL","DIRECT","DIRECTORY","DISCOUNT","DISCOVER","DISH","DIY","DJ","DK","DM","DNP","DO","DOCS","DOCTOR","DOG","DOMAINS","DOT","DOWNLOAD","DRIVE","DTV","DUBAI","DUNLOP","DUPONT","DURBAN","DVAG","DVR","DZ","EARTH","EAT","EC","ECO","EDEKA","EDU","EDUCATION","EE","EG","EMAIL","EMERCK","ENERGY","ENGINEER","ENGINEERING","ENTERPRISES","EPSON","EQUIPMENT","ER","ERICSSON","ERNI","ES","ESQ","ESTATE","ET","EU","EUROVISION","EUS","EVENTS","EXCHANGE","EXPERT","EXPOSED","EXPRESS","EXTRASPACE","FAGE","FAIL","FAIRWINDS","FAITH","FAMILY","FAN","FANS","FARM","FARMERS","FASHION","FAST","FEDEX","FEEDBACK","FERRARI","FERRERO","FI","FIDELITY","FIDO","FILM","FINAL","FINANCE","FINANCIAL","FIRE","FIRESTONE","FIRMDALE","FISH","FISHING","FIT","FITNESS","FJ","FK","FLICKR","FLIGHTS","FLIR","FLORIST","FLOWERS","FLY","FM","FO","FOO","FOOD","FOOTBALL","FORD","FOREX","FORSALE","FORUM","FOUNDATION","FOX","FR","FREE","FRESENIUS","FRL","FROGANS","FRONTIER","FTR","FUJITSU","FUN","FUND","FURNITURE","FUTBOL","FYI","GA","GAL","GALLERY","GALLO","GALLUP","GAME","GAMES","GAP","GARDEN","GAY","GB","GBIZ","GD","GDN","GE","GEA","GENT","GENTING","GEORGE","GF","GG","GGEE","GH","GI","GIFT","GIFTS","GIVES","GIVING","GL","GLASS","GLE","GLOBAL","GLOBO","GM","GMAIL","GMBH","GMO","GMX","GN","GODADDY","GOLD","GOLDPOINT","GOLF","GOO","GOODYEAR","GOOG","GOOGLE","GOP","GOT","GOV","GP","GQ","GR","GRAINGER","GRAPHICS","GRATIS","GREEN","GRIPE","GROCERY","GROUP","GS","GT","GU","GUARDIAN","GUCCI","GUGE","GUIDE","GUITARS","GURU","GW","GY","HAIR","HAMBURG","HANGOUT","HAUS","HBO","HDFC","HDFCBANK","HEALTH","HEALTHCARE","HELP","HELSINKI","HERE","HERMES","HIPHOP","HISAMITSU","HITACHI","HIV","HK","HKT","HM","HN","HOCKEY","HOLDINGS","HOLIDAY","HOMEDEPOT","HOMEGOODS","HOMES","HOMESENSE","HONDA","HORSE","HOSPITAL","HOST","HOSTING","HOT","HOTELS","HOTMAIL","HOUSE","HOW","HR","HSBC","HT","HU","HUGHES","HYATT","HYUNDAI","IBM","ICBC","ICE","ICU","ID","IE","IEEE","IFM","IKANO","IL","IM","IMAMAT","IMDB","IMMO","IMMOBILIEN","IN","INC","INDUSTRIES","INFINITI","INFO","ING","INK","INSTITUTE","INSURANCE","INSURE","INT","INTERNATIONAL","INTUIT","INVESTMENTS","IO","IPIRANGA","IQ","IR","IRISH","IS","ISMAILI","IST","ISTANBUL","IT","ITAU","ITV","JAGUAR","JAVA","JCB","JE","JEEP","JETZT","JEWELRY","JIO","JLL","JM","JMP","JNJ","JO","JOBS","JOBURG","JOT","JOY","JP","JPMORGAN","JPRS","JUEGOS","JUNIPER","KAUFEN","KDDI","KE","KERRYHOTELS","KERRYLOGISTICS","KERRYPROPERTIES","KFH","KG","KH","KI","KIA","KIDS","KIM","KINDLE","KITCHEN","KIWI","KM","KN","KOELN","KOMATSU","KOSHER","KP","KPMG","KPN","KR","KRD","KRED","KUOKGROUP","KW","KY","KYOTO","KZ","LA","LACAIXA","LAMBORGHINI","LAMER","LANCASTER","LAND","LANDROVER","LANXESS","LASALLE","LAT","LATINO","LATROBE","LAW","LAWYER","LB","LC","LDS","LEASE","LECLERC","LEFRAK","LEGAL","LEGO","LEXUS","LGBT","LI","LIDL","LIFE","LIFEINSURANCE","LIFESTYLE","LIGHTING","LIKE","LILLY","LIMITED","LIMO","LINCOLN","LINK","LIPSY","LIVE","LIVING","LK","LLC","LLP","LOAN","LOANS","LOCKER","LOCUS","LOL","LONDON","LOTTE","LOTTO","LOVE","LPL","LPLFINANCIAL","LR","LS","LT","LTD","LTDA","LU","LUNDBECK","LUXE","LUXURY","LV","LY","MA","MADRID","MAIF","MAISON","MAKEUP","MAN","MANAGEMENT","MANGO","MAP","MARKET","MARKETING","MARKETS","MARRIOTT","MARSHALLS","MATTEL","MBA","MC","MCKINSEY","MD","ME","MED","MEDIA","MEET","MELBOURNE","MEME","MEMORIAL","MEN","MENU","MERCKMSD","MG","MH","MIAMI","MICROSOFT","MIL","MINI","MINT","MIT","MITSUBISHI","MK","ML","MLB","MLS","MM","MMA","MN","MO","MOBI","MOBILE","MODA","MOE","MOI","MOM","MONASH","MONEY","MONSTER","MORMON","MORTGAGE","MOSCOW","MOTO","MOTORCYCLES","MOV","MOVIE","MP","MQ","MR","MS","MSD","MT","MTN","MTR","MU","MUSEUM","MUSIC","MV","MW","MX","MY","MZ","NA","NAB","NAGOYA","NAME","NATURA","NAVY","NBA","NC","NE","NEC","NET","NETBANK","NETFLIX","NETWORK","NEUSTAR","NEW","NEWS","NEXT","NEXTDIRECT","NEXUS","NF","NFL","NG","NGO","NHK","NI","NICO","NIKE","NIKON","NINJA","NISSAN","NISSAY","NL","NO","NOKIA","NORTON","NOW","NOWRUZ","NOWTV","NP","NR","NRA","NRW","NTT","NU","NYC","NZ","OBI","OBSERVER","OFFICE","OKINAWA","OLAYAN","OLAYANGROUP","OLLO","OM","OMEGA","ONE","ONG","ONL","ONLINE","OOO","OPEN","ORACLE","ORANGE","ORG","ORGANIC","ORIGINS","OSAKA","OTSUKA","OTT","OVH","PA","PAGE","PANASONIC","PARIS","PARS","PARTNERS","PARTS","PARTY","PAY","PCCW","PE","PET","PF","PFIZER","PG","PH","PHARMACY","PHD","PHILIPS","PHONE","PHOTO","PHOTOGRAPHY","PHOTOS","PHYSIO","PICS","PICTET","PICTURES","PID","PIN","PING","PINK","PIONEER","PIZZA","PK","PL","PLACE","PLAY","PLAYSTATION","PLUMBING","PLUS","PM","PN","PNC","POHL","POKER","POLITIE","PORN","POST","PR","PRAMERICA","PRAXI","PRESS","PRIME","PRO","PROD","PRODUCTIONS","PROF","PROGRESSIVE","PROMO","PROPERTIES","PROPERTY","PROTECTION","PRU","PRUDENTIAL","PS","PT","PUB","PW","PWC","PY","QA","QPON","QUEBEC","QUEST","RACING","RADIO","RE","READ","REALESTATE","REALTOR","REALTY","RECIPES","RED","REDSTONE","REDUMBRELLA","REHAB","REISE","REISEN","REIT","RELIANCE","REN","RENT","RENTALS","REPAIR","REPORT","REPUBLICAN","REST","RESTAURANT","REVIEW","REVIEWS","REXROTH","RICH","RICHARDLI","RICOH","RIL","RIO","RIP","RO","ROCKS","RODEO","ROGERS","ROOM","RS","RSVP","RU","RUGBY","RUHR","RUN","RW","RWE","RYUKYU","SA","SAARLAND","SAFE","SAFETY","SAKURA","SALE","SALON","SAMSCLUB","SAMSUNG","SANDVIK","SANDVIKCOROMANT","SANOFI","SAP","SARL","SAS","SAVE","SAXO","SB","SBI","SBS","SC","SCB","SCHAEFFLER","SCHMIDT","SCHOLARSHIPS","SCHOOL","SCHULE","SCHWARZ","SCIENCE","SCOT","SD","SE","SEARCH","SEAT","SECURE","SECURITY","SEEK","SELECT","SENER","SERVICES","SEVEN","SEW","SEX","SEXY","SFR","SG","SH","SHANGRILA","SHARP","SHAW","SHELL","SHIA","SHIKSHA","SHOES","SHOP","SHOPPING","SHOUJI","SHOW","SI","SILK","SINA","SINGLES","SITE","SJ","SK","SKI","SKIN","SKY","SKYPE","SL","SLING","SM","SMART","SMILE","SN","SNCF","SO","SOCCER","SOCIAL","SOFTBANK","SOFTWARE","SOHU","SOLAR","SOLUTIONS","SONG","SONY","SOY","SPA","SPACE","SPORT","SPOT","SR","SRL","SS","ST","STADA","STAPLES","STAR","STATEBANK","STATEFARM","STC","STCGROUP","STOCKHOLM","STORAGE","STORE","STREAM","STUDIO","STUDY","STYLE","SU","SUCKS","SUPPLIES","SUPPLY","SUPPORT","SURF","SURGERY","SUZUKI","SV","SWATCH","SWISS","SX","SY","SYDNEY","SYSTEMS","SZ","TAB","TAIPEI","TALK","TAOBAO","TARGET","TATAMOTORS","TATAR","TATTOO","TAX","TAXI","TC","TCI","TD","TDK","TEAM","TECH","TECHNOLOGY","TEL","TEMASEK","TENNIS","TEVA","TF","TG","TH","THD","THEATER","THEATRE","TIAA","TICKETS","TIENDA","TIPS","TIRES","TIROL","TJ","TJMAXX","TJX","TK","TKMAXX","TL","TM","TMALL","TN","TO","TODAY","TOKYO","TOOLS","TOP","TORAY","TOSHIBA","TOTAL","TOURS","TOWN","TOYOTA","TOYS","TR","TRADE","TRADING","TRAINING","TRAVEL","TRAVELERS","TRAVELERSINSURANCE","TRUST","TRV","TT","TUBE","TUI","TUNES","TUSHU","TV","TVS","TW","TZ","UA","UBANK","UBS","UG","UK","UNICOM","UNIVERSITY","UNO","UOL","UPS","US","UY","UZ","VA","VACATIONS","VANA","VANGUARD","VC","VE","VEGAS","VENTURES","VERISIGN","VERSICHERUNG","VET","VG","VI","VIAJES","VIDEO","VIG","VIKING","VILLAS","VIN","VIP","VIRGIN","VISA","VISION","VIVA","VIVO","VLAANDEREN","VN","VODKA","VOLVO","VOTE","VOTING","VOTO","VOYAGE","VU","WALES","WALMART","WALTER","WANG","WANGGOU","WATCH","WATCHES","WEATHER","WEATHERCHANNEL","WEBCAM","WEBER","WEBSITE","WED","WEDDING","WEIBO","WEIR","WF","WHOSWHO","WIEN","WIKI","WILLIAMHILL","WIN","WINDOWS","WINE","WINNERS","WME","WOLTERSKLUWER","WOODSIDE","WORK","WORKS","WORLD","WOW","WS","WTC","WTF","XBOX","XEROX","XFINITY","XIHUAN","XIN","XN--11B4C3D","XN--1CK2E1B","XN--1QQW23A","XN--2SCRJ9C","XN--30RR7Y","XN--3BST00M","XN--3DS443G","XN--3E0B707E","XN--3HCRJ9C","XN--3PXU8K","XN--42C2D9A","XN--45BR5CYL","XN--45BRJ9C","XN--45Q11C","XN--4DBRK0CE","XN--4GBRIM","XN--54B7FTA0CC","XN--55QW42G","XN--55QX5D","XN--5SU34J936BGSG","XN--5TZM5G","XN--6FRZ82G","XN--6QQ986B3XL","XN--80ADXHKS","XN--80AO21A","XN--80AQECDR1A","XN--80ASEHDB","XN--80ASWG","XN--8Y0A063A","XN--90A3AC","XN--90AE","XN--90AIS","XN--9DBQ2A","XN--9ET52U","XN--9KRT00A","XN--B4W605FERD","XN--BCK1B9A5DRE4C","XN--C1AVG","XN--C2BR7G","XN--CCK2B3B","XN--CCKWCXETD","XN--CG4BKI","XN--CLCHC0EA0B2G2A9GCD","XN--CZR694B","XN--CZRS0T","XN--CZRU2D","XN--D1ACJ3B","XN--D1ALF","XN--E1A4C","XN--ECKVDTC9D","XN--EFVY88H","XN--FCT429K","XN--FHBEI","XN--FIQ228C5HS","XN--FIQ64B","XN--FIQS8S","XN--FIQZ9S","XN--FJQ720A","XN--FLW351E","XN--FPCRJ9C3D","XN--FZC2C9E2C","XN--FZYS8D69UVGM","XN--G2XX48C","XN--GCKR3F0F","XN--GECRJ9C","XN--GK3AT1E","XN--H2BREG3EVE","XN--H2BRJ9C","XN--H2BRJ9C8C","XN--HXT814E","XN--I1B6B1A6A2E","XN--IMR513N","XN--IO0A7I","XN--J1AEF","XN--J1AMH","XN--J6W193G","XN--JLQ480N2RG","XN--JVR189M","XN--KCRX77D1X4A","XN--KPRW13D","XN--KPRY57D","XN--KPUT3I","XN--L1ACC","XN--LGBBAT1AD8J","XN--MGB9AWBF","XN--MGBA3A3EJT","XN--MGBA3A4F16A","XN--MGBA7C0BBN0A","XN--MGBAAM7A8H","XN--MGBAB2BD","XN--MGBAH1A3HJKRD","XN--MGBAI9AZGQP6J","XN--MGBAYH7GPA","XN--MGBBH1A","XN--MGBBH1A71E","XN--MGBC0A9AZCG","XN--MGBCA7DZDO","XN--MGBCPQ6GPA1A","XN--MGBERP4A5D4AR","XN--MGBGU82A","XN--MGBI4ECEXP","XN--MGBPL2FH","XN--MGBT3DHD","XN--MGBTX2B","XN--MGBX4CD0AB","XN--MIX891F","XN--MK1BU44C","XN--MXTQ1M","XN--NGBC5AZD","XN--NGBE9E0A","XN--NGBRX","XN--NODE","XN--NQV7F","XN--NQV7FS00EMA","XN--NYQY26A","XN--O3CW4H","XN--OGBPF8FL","XN--OTU796D","XN--P1ACF","XN--P1AI","XN--PGBS0DH","XN--PSSY2U","XN--Q7CE6A","XN--Q9JYB4C","XN--QCKA1PMC","XN--QXA6A","XN--QXAM","XN--RHQV96G","XN--ROVU88B","XN--RVC1E0AM3E","XN--S9BRJ9C","XN--SES554G","XN--T60B56A","XN--TCKWE","XN--TIQ49XQYJ","XN--UNUP4Y","XN--VERMGENSBERATER-CTB","XN--VERMGENSBERATUNG-PWB","XN--VHQUV","XN--VUQ861B","XN--W4R85EL8FHU5DNRA","XN--W4RS40L","XN--WGBH1C","XN--WGBL6A","XN--XHQ521B","XN--XKC2AL3HYE2A","XN--XKC2DL3A5EE0H","XN--Y9A3AQ","XN--YFRO4I67O","XN--YGBI2AMMX","XN--ZFR164B","XXX","XYZ","YACHTS","YAHOO","YAMAXUN","YANDEX","YE","YODOBASHI","YOGA","YOKOHAMA","YOU","YOUTUBE","YT","YUN","ZA","ZAPPOS","ZARA","ZERO","ZIP","ZM","ZONE","ZUERICH","ZW"]};var It,kt,Tt,Ct,jt,Lt,Dt,Mt,Pt=new Set(Nt.tlds.map((e=>e.toLowerCase())));function Bt(){if(kt)return It;kt=1;const e=c(),t=mt,s=gt,i=wt,r=Et,n=Pt,a=At,o=Ue(),l=V(),d={tlds:n instanceof Set&&{tlds:{allow:n,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:{withPrefix:/^0x[0-9a-f]+$/i,withOptionalPrefix:/^(?:0x)?[0-9a-f]+$/i,withoutPrefix:/^[0-9a-f]+$/i},ipRegex:i.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5",uuidv6:"6",uuidv7:"7",uuidv8:"8"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};return It=o.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(e,{schema:t,state:s,prefs:i}){const r=t.$_getRule("normalize");r&&(e=e.normalize(r.args.form));const n=t.$_getRule("case");n&&(e="upper"===n.args.direction?e.toLocaleUpperCase():e.toLocaleLowerCase());const a=t.$_getRule("trim");if(a&&a.args.enabled&&(e=e.trim()),t.$_terms.replacements)for(const s of t.$_terms.replacements)e=e.replace(s.pattern,s.replacement);const o=t.$_getRule("hex");if(o&&o.args.options.byteAligned&&e.length%2!=0&&(e=`0${e}`),t.$_getRule("isoDate")){const t=d.isoDate(e);t&&(e=t)}if(t._flags.truncate){const r=t.$_getRule("max");if(r){let n=r.args.limit;if(l.isResolvable(n)&&(n=n.resolve(e,s,i),!l.limit(n)))return{value:e,errors:t.$_createError("any.ref",n,{ref:r.args.limit,arg:"limit",reason:"must be a positive integer"},s,i)};e=e.slice(0,n)}}return{value:e}}},validate(e,{schema:t,error:s}){if("string"!=typeof e)return{value:e,errors:s("string.base")};if(""===e){const i=t.$_getRule("min");if(i&&0===i.args.limit)return;return{value:e,errors:s("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(e,t)=>/^[a-zA-Z0-9]+$/.test(e)?e:t.error("string.alphanum")},base64:{method(t={}){return l.assertOptions(t,["paddingRequired","urlSafe"]),t={urlSafe:!1,paddingRequired:!0,...t},e("boolean"==typeof t.paddingRequired,"paddingRequired must be boolean"),e("boolean"==typeof t.urlSafe,"urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:t}})},validate:(e,t,{options:s})=>d.base64Regex[s.paddingRequired][s.urlSafe].test(e)?e:t.error("string.base64")},case:{method(t){return e(["lower","upper"].includes(t),"Invalid case:",t),this.$_addRule({name:"case",args:{direction:t}})},validate:(e,t,{direction:s})=>"lower"===s&&e===e.toLocaleLowerCase()||"upper"===s&&e===e.toLocaleUpperCase()?e:t.error(`string.${s}case`),convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(e,t){let s=e.length,i=0,r=1;for(;s--;){const t=e.charAt(s)*r;i+=t-9*(t>9),r^=3}return i>0&&i%10==0?e:t.error("string.creditCard")}},dataUri:{method(t={}){return l.assertOptions(t,["paddingRequired"]),t={paddingRequired:!0,...t},e("boolean"==typeof t.paddingRequired,"paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:t}})},validate(e,t,{options:s}){const i=e.match(d.dataUriRegex);if(i){if(!i[2])return e;if("base64"!==i[2])return e;if(d.base64Regex[s.paddingRequired].false.test(i[3]))return e}return t.error("string.dataUri")}},domain:{method(e){e&&l.assertOptions(e,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const t=d.addressOptions(e);return this.$_addRule({name:"domain",args:{options:e},address:t})},validate:(e,s,i,{address:r})=>t.isValid(e,r)?e:s.error("string.domain")},email:{method(t={}){l.assertOptions(t,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),e(void 0===t.multiple||"boolean"==typeof t.multiple,"multiple option must be an boolean");const s=d.addressOptions(t),i=new RegExp(`\\s*[${t.separator?r(t.separator):","}]\\s*`);return this.$_addRule({name:"email",args:{options:t},regex:i,address:s})},validate(e,t,{options:i},{regex:r,address:n}){const a=i.multiple?e.split(r):[e],o=[];for(const e of a)s.isValid(e,n)||o.push(e);return o.length?t.error("string.email",{value:e,invalids:o}):e}},guid:{alias:"uuid",method(t={}){l.assertOptions(t,["version","separator"]);let s="";if(t.version){const i=[].concat(t.version);e(i.length>=1,"version must have at least 1 valid version specified");const r=new Set;for(let t=0;t<i.length;++t){const n=i[t];e("string"==typeof n,"version at position "+t+" must be a string");const a=d.guidVersions[n.toLowerCase()];e(a,"version at position "+t+" must be one of "+Object.keys(d.guidVersions).join(", ")),e(!r.has(a),"version at position "+t+" must not be a duplicate"),s+=a,r.add(a)}}e(d.guidSeparators.has(t.separator),'separator must be one of true, false, "-", or ":"');const i=void 0===t.separator?"[:-]?":!0===t.separator?"[:-]":!1===t.separator?"[]?":`\\${t.separator}`,r=new RegExp(`^([\\[{\\(]?)[0-9A-F]{8}(${i})[0-9A-F]{4}\\2?[${s||"0-9A-F"}][0-9A-F]{3}\\2?[${s?"89AB":"0-9A-F"}][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$`,"i");return this.$_addRule({name:"guid",args:{options:t},regex:r})},validate(e,t,s,{regex:i}){const r=i.exec(e);return r?d.guidBrackets[r[1]]!==r[r.length-1]?t.error("string.guid"):e:t.error("string.guid")}},hex:{method(t={}){return l.assertOptions(t,["byteAligned","prefix"]),t={byteAligned:!1,prefix:!1,...t},e("boolean"==typeof t.byteAligned,"byteAligned must be boolean"),e("boolean"==typeof t.prefix||"optional"===t.prefix,'prefix must be boolean or "optional"'),this.$_addRule({name:"hex",args:{options:t}})},validate:(e,t,{options:s})=>("optional"===s.prefix?d.hexRegex.withOptionalPrefix:!0===s.prefix?d.hexRegex.withPrefix:d.hexRegex.withoutPrefix).test(e)?s.byteAligned&&e.length%2!=0?t.error("string.hexAlign"):e:t.error("string.hex")},hostname:{method(){return this.$_addRule("hostname")},validate:(e,s)=>t.isValid(e,{minDomainSegments:1})||d.ipRegex.test(e)?e:s.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(e={}){l.assertOptions(e,["cidr","version"]);const{cidr:t,versions:s,regex:r}=i.regex(e),n=e.version?s:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:t,version:n}},regex:r})},validate:(e,t,{options:s},{regex:i})=>i.test(e)?e:s.version?t.error("string.ipVersion",{value:e,cidr:s.cidr,version:s.version}):t.error("string.ip",{value:e,cidr:s.cidr})},isoDate:{method(){return this.$_addRule("isoDate")},validate:(e,{error:t})=>d.isoDate(e)?e:t("string.isoDate")},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(e,t)=>d.isoDurationRegex.test(e)?e:t.error("string.isoDuration")},length:{method(e,t){return d.length(this,"length",e,"=",t)},validate(e,t,{limit:s,encoding:i},{name:r,operator:n,args:a}){const o=i?Buffer&&Buffer.byteLength(e,i):e.length;return l.compare(o,s,n)?e:t.error("string."+r,{limit:a.limit,value:e,encoding:i})},args:[{name:"limit",ref:!0,assert:l.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(e,t){return d.length(this,"max",e,"<=",t)},args:["limit","encoding"]},min:{method(e,t){return d.length(this,"min",e,">=",t)},args:["limit","encoding"]},normalize:{method(t="NFC"){return e(d.normalizationForms.includes(t),"normalization form must be one of "+d.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:t}})},validate:(e,{error:t},{form:s})=>e===e.normalize(s)?e:t("string.normalize",{value:e,form:s}),convert:!0},pattern:{alias:"regex",method(t,s={}){e(t instanceof RegExp,"regex must be a RegExp"),e(!t.flags.includes("g")&&!t.flags.includes("y"),"regex should not use global or sticky mode"),"string"==typeof s&&(s={name:s}),l.assertOptions(s,["invert","name"]);const i=["string.pattern",s.invert?".invert":"",s.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:t,options:s},errorCode:i})},validate:(e,t,{regex:s,options:i},{errorCode:r})=>s.test(e)^i.invert?e:t.error(r,{name:i.name,regex:s,value:e}),args:["regex","options"],multi:!0},replace:{method(t,s){"string"==typeof t&&(t=new RegExp(r(t),"g")),e(t instanceof RegExp,"pattern must be a RegExp"),e("string"==typeof s,"replacement must be a String");const i=this.clone();return i.$_terms.replacements||(i.$_terms.replacements=[]),i.$_terms.replacements.push({pattern:t,replacement:s}),i}},token:{method(){return this.$_addRule("token")},validate:(e,t)=>/^\w+$/.test(e)?e:t.error("string.token")},trim:{method(t=!0){return e("boolean"==typeof t,"enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:t}})},validate:(e,t,{enabled:s})=>s&&e!==e.trim()?t.error("string.trim"):e,convert:!0},truncate:{method(t=!0){return e("boolean"==typeof t,"enabled must be a boolean"),this.$_setFlag("truncate",t)}},uppercase:{method(){return this.case("upper")}},uri:{method(e={}){l.assertOptions(e,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme","encodeUri"]),e.domain&&l.assertOptions(e.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:t,scheme:s}=a.regex(e),i=e.domain?d.addressOptions(e.domain):null;return this.$_addRule({name:"uri",args:{options:e},regex:t,domain:i,scheme:s})},validate(e,s,{options:i},{regex:r,domain:n,scheme:a}){if(["http:/","https:/"].includes(e))return s.error("string.uri");let o=r.exec(e);if(!o&&s.prefs.convert&&i.encodeUri){const t=encodeURI(e);o=r.exec(t),o&&(e=t)}if(o){const r=o[1]||o[2];return!n||i.allowRelative&&!r||t.isValid(r,n)?e:s.error("string.domain",{value:r})}return i.relativeOnly?s.error("string.uriRelativeOnly"):i.scheme?s.error("string.uriCustomScheme",{scheme:a,value:e}):s.error("string.uri")}}},manifest:{build(e,t){if(t.replacements)for(const{pattern:s,replacement:i}of t.replacements)e=e.replace(s,i);return e}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),d.addressOptions=function(t){if(!t)return d.tlds||t;if(e(void 0===t.minDomainSegments||Number.isSafeInteger(t.minDomainSegments)&&t.minDomainSegments>0,"minDomainSegments must be a positive integer"),e(void 0===t.maxDomainSegments||Number.isSafeInteger(t.maxDomainSegments)&&t.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),!1===t.tlds)return t;if(!0===t.tlds||void 0===t.tlds)return e(d.tlds,"Built-in TLD list disabled"),Object.assign({},t,d.tlds);e("object"==typeof t.tlds,"tlds must be true, false, or an object");const s=t.tlds.deny;if(s)return Array.isArray(s)&&(t=Object.assign({},t,{tlds:{deny:new Set(s)}})),e(t.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),e(!t.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),d.validateTlds(t.tlds.deny,"tlds.deny"),t;const i=t.tlds.allow;return i?!0===i?(e(d.tlds,"Built-in TLD list disabled"),Object.assign({},t,d.tlds)):(Array.isArray(i)&&(t=Object.assign({},t,{tlds:{allow:new Set(i)}})),e(t.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),d.validateTlds(t.tlds.allow,"tlds.allow"),t):t},d.validateTlds=function(s,i){for(const r of s)e(t.isValid(r,{minDomainSegments:1,maxDomainSegments:1}),`${i} must contain valid top level domain names`)},d.isoDate=function(e){if(!l.isIsoDate(e))return null;/.*T.*[+-]\d\d$/.test(e)&&(e+="00");const t=new Date(e);return isNaN(t.getTime())?null:t.toISOString()},d.length=function(t,s,i,r,n){return e(!n||Buffer&&Buffer.isEncoding(n),"Invalid encoding:",n),t.$_addRule({name:s,method:"length",args:{limit:i,encoding:n},operator:r})},It}function Ut(){if(Ct)return Tt;Ct=1;const e=c(),t=Ue(),s={};return s.Map=class extends Map{slice(){return new s.Map(this)}},Tt=t.extend({type:"symbol",terms:{map:{init:new s.Map}},coerce:{method(e,{schema:t,error:s}){const i=t.$_terms.map.get(e);return i&&(e=i),t._flags.only&&"symbol"!=typeof e?{value:e,errors:s("symbol.map",{map:t.$_terms.map})}:{value:e}}},validate(e,{error:t}){if("symbol"!=typeof e)return{value:e,errors:t("symbol.base")}},rules:{map:{method(t){t&&!t[Symbol.iterator]&&"object"==typeof t&&(t=Object.entries(t)),e(t&&t[Symbol.iterator],"Iterable must be an iterable or object");const s=this.clone(),i=[];for(const r of t){e(r&&r[Symbol.iterator],"Entry must be an iterable");const[t,n]=r;e("object"!=typeof t&&"function"!=typeof t&&"symbol"!=typeof t,"Key must not be of type object, function, or Symbol"),e("symbol"==typeof n,"Value must be a Symbol"),s.$_terms.map.set(t,n),i.push(n)}return s.valid(...i)}}},manifest:{build:(e,t)=>(t.map&&(e=e.map(t.map)),e)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}}),Tt}function Ft(){if(Mt)return Dt;Mt=1;const e=c(),t=b,s=q(),i=V(),r=Y(),n=M(),a=ee(),o=ie(),l=X(),d=H(),u=de();let f;const p={types:{alternatives:Fe(),any:Ue(),array:Ge(),boolean:Ze(),date:Xe(),function:ut(),link:ft(),number:pt(),object:ht(),string:Bt(),symbol:Ut()},aliases:{alt:"alternatives",bool:"boolean",func:"function"}};return Buffer&&(p.types.binary=function(){if(Lt)return jt;Lt=1;const e=c(),t=Ue(),s=V();return jt=t.extend({type:"binary",coerce:{from:["string","object"],method(e,{schema:t}){if("string"==typeof e||null!==e&&"Buffer"===e.type)try{return{value:Buffer.from(e,t._flags.encoding)}}catch(e){}}},validate(e,{error:t}){if(!Buffer.isBuffer(e))return{value:e,errors:t("binary.base")}},rules:{encoding:{method(t){return e(Buffer.isEncoding(t),"Invalid encoding:",t),this.$_setFlag("encoding",t)}},length:{method(e){return this.$_addRule({name:"length",method:"length",args:{limit:e},operator:"="})},validate:(e,t,{limit:i},{name:r,operator:n,args:a})=>s.compare(e.length,i,n)?e:t.error("binary."+r,{limit:a.limit,value:e}),args:[{name:"limit",ref:!0,assert:s.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}}},cast:{string:{from:e=>Buffer.isBuffer(e),to:(e,t)=>e.toString()}},messages:{"binary.base":"{{#label}} must be a buffer or a string","binary.length":"{{#label}} must be {{#limit}} bytes","binary.max":"{{#label}} must be less than or equal to {{#limit}} bytes","binary.min":"{{#label}} must be at least {{#limit}} bytes"}}),jt}()),p.root=function(){const t={_types:new Set(Object.keys(p.types))};for(const s of t._types)t[s]=function(...t){return e(!t.length||["alternatives","link","object"].includes(s),"The",s,"type does not allow arguments"),p.generate(this,p.types[s],t)};for(const e of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])t[e]=function(...t){return this.any()[e](...t)};Object.assign(t,p.methods);for(const e in p.aliases){const s=p.aliases[e];t[e]=t[s]}return t.x=t.expression,u.setup&&u.setup(t),t},p.methods={ValidationError:n.ValidationError,version:i.version,cache:s.provider,assert(e,t,...s){p.assert(e,t,!0,s)},attempt:(e,t,...s)=>p.assert(e,t,!1,s),build(t){return e("function"==typeof o.build,"Manifest functionality disabled"),o.build(this,t)},checkPreferences(e){i.checkPreferences(e)},compile(e,t){return r.compile(this,e,t)},defaults(t){e("function"==typeof t,"modifier must be a function");const s=Object.assign({},this);for(const r of s._types){const n=t(s[r]());e(i.isSchema(n),"modifier must return a valid schema object"),s[r]=function(...e){return p.generate(this,n,e)}}return s},expression:(...e)=>new d(...e),extend(...t){i.verifyFlat(t,"extend"),f=f||O(),e(t.length,"You need to provide at least one extension"),this.assert(t,f.extensions);const s=Object.assign({},this);s._types=new Set(s._types);for(let i of t){"function"==typeof i&&(i=i(s)),this.assert(i,f.extension);const t=p.expandExtension(i,s);for(const i of t){e(void 0===s[i.type]||s._types.has(i.type),"Cannot override name",i.type);const t=i.base||this.any(),r=a.type(t,i);s._types.add(i.type),s[i.type]=function(...e){return p.generate(this,r,e)}}}return s},isError:n.ValidationError.isError,isExpression:d.isTemplate,isRef:l.isRef,isSchema:i.isSchema,in:(...e)=>l.in(...e),override:i.symbols.override,ref:(...e)=>l.create(...e),types(){const e={};for(const t of this._types)e[t]=this[t]();for(const t in p.aliases)e[t]=this[t]();return e}},p.assert=function(e,s,r,a){const o=a[0]instanceof Error||"string"==typeof a[0]?a[0]:null,l=null!==o?a[1]:a[0],c=s.validate(e,i.preferences({errors:{stack:!0}},l||{}));let d=c.error;if(!d)return c.value;if(o instanceof Error)throw o;const u=r&&"function"==typeof d.annotate?d.annotate():d.message;throw d instanceof n.ValidationError==!1&&(d=t(d)),d.message=o?`${o} ${u}`:u,d},p.generate=function(t,s,i){return e(t,"Must be invoked on a Joi instance."),s.$_root=t,s._definition.args&&i.length?s._definition.args(s,...i):s},p.expandExtension=function(e,t){if("string"==typeof e.type)return[e];const s=[];for(const i of t._types)if(e.type.test(i)){const r=Object.assign({},e);r.type=i,r.base=t[i](),s.push(r)}return s},Dt=p.root()}var Gt=i(Ft()),Zt={table:"directus_collections",defaults:{collection:null,hidden:!1,singleton:!1,icon:null,note:null,translations:null,display_template:null,accountability:"all"},data:[{collection:"directus_access",icon:"admin_panel_settings",note:"$t:directus_collection.directus_access",display_template:"{{ policy.name }}",sort_field:"sort"},{collection:"directus_activity",note:"$t:directus_collection.directus_activity",accountability:null},{collection:"directus_collections",icon:"database",note:"$t:directus_collection.directus_collections"},{collection:"directus_comments",note:"$t:directus_collection.directus_comments"},{collection:"directus_fields",icon:"input",note:"$t:directus_collection.directus_fields"},{collection:"directus_files",icon:"folder",note:"$t:directus_collection.directus_files",display_template:"{{ $thumbnail }} {{ title }}"},{collection:"directus_folders",note:"$t:directus_collection.directus_folders",display_template:"{{ name }}"},{collection:"directus_migrations",note:"$t:directus_collection.directus_migrations"},{collection:"directus_permissions",icon:"admin_panel_settings",note:"$t:directus_collection.directus_permissions"},{collection:"directus_policies",icon:"admin_panel_settings",note:"$t:directus_collection.directus_policies"},{collection:"directus_presets",icon:"bookmark",note:"$t:directus_collection.directus_presets",accountability:null},{collection:"directus_relations",icon:"merge_type",note:"$t:directus_collection.directus_relations"},{collection:"directus_revisions",note:"$t:directus_collection.directus_revisions",accountability:null},{collection:"directus_roles",icon:"supervised_user_circle",note:"$t:directus_collection.directus_roles"},{collection:"directus_sessions",note:"$t:directus_collection.directus_sessions"},{collection:"directus_settings",singleton:!0,note:"$t:directus_collection.directus_settings"},{collection:"directus_users",archive_field:"status",archive_value:"archived",unarchive_value:"draft",icon:"people_alt",note:"$t:directus_collection.directus_users",display_template:"{{ first_name }} {{ last_name }}"},{collection:"directus_webhooks",note:"$t:directus_collection.directus_webhooks"},{collection:"directus_dashboards",note:"$t:directus_collection.directus_dashboards"},{collection:"directus_panels",note:"$t:directus_collection.directus_panels"},{collection:"directus_notifications",note:"$t:directus_collection.directus_notifications"},{collection:"directus_shares",icon:"share",note:"$t:directus_collection.directus_shares"},{collection:"directus_flows",note:"$t:directus_collection.directus_flows"},{collection:"directus_operations",note:"$t:directus_collection.directus_operations"},{collection:"directus_translations",note:"$t:directus_collection.directus_translations"},{collection:"directus_versions",note:"$t:directus_collection.directus_versions"},{collection:"directus_extensions",note:"$t:directus_collection.directus_extensions"}]};Zt.data.map((e=>({...Zt.defaults,...e,system:!0}))),Zt.data.map((e=>e.collection));var Xt={table:"directus_relations",defaults:{many_collection:"directus_users",many_field:null,one_collection:null,one_field:null,one_allowed_collections:null,one_collection_field:null,one_deselect_action:"nullify",junction_field:null,sort_field:null},data:[{many_collection:"directus_collections",many_field:"group",one_collection:"directus_collections"},{many_collection:"directus_comments",many_field:"collection",one_collection:"directus_collections"},{many_collection:"directus_comments",many_field:"user_created",one_collection:"directus_users"},{many_collection:"directus_comments",many_field:"user_updated",one_collection:"directus_users"},{many_collection:"directus_users",many_field:"role",one_collection:"directus_roles",one_field:"users"},{many_collection:"directus_users",many_field:"avatar",one_collection:"directus_files"},{many_collection:"directus_revisions",many_field:"activity",one_collection:"directus_activity",one_field:"revisions"},{many_collection:"directus_revisions",many_field:"parent",one_collection:"directus_revisions"},{many_collection:"directus_revisions",many_field:"version",one_collection:"directus_versions"},{many_collection:"directus_presets",many_field:"user",one_collection:"directus_users"},{many_collection:"directus_presets",many_field:"role",one_collection:"directus_roles"},{many_collection:"directus_folders",many_field:"parent",one_collection:"directus_folders"},{many_collection:"directus_files",many_field:"folder",one_collection:"directus_folders"},{many_collection:"directus_files",many_field:"uploaded_by",one_collection:"directus_users"},{many_collection:"directus_files",many_field:"modified_by",one_collection:"directus_users"},{many_collection:"directus_fields",many_field:"collection",one_collection:"directus_collections",one_field:"fields"},{many_collection:"directus_fields",many_field:"group",one_collection:"directus_fields"},{many_collection:"directus_activity",many_field:"user",one_collection:"directus_users"},{many_collection:"directus_settings",many_field:"project_logo",one_collection:"directus_files"},{many_collection:"directus_settings",many_field:"public_foreground",one_collection:"directus_files"},{many_collection:"directus_settings",many_field:"public_background",one_collection:"directus_files"},{many_collection:"directus_settings",many_field:"public_favicon",one_collection:"directus_files"},{many_collection:"directus_settings",many_field:"storage_default_folder",one_collection:"directus_folders"},{many_collection:"directus_settings",many_field:"public_registration_role",one_collection:"directus_roles"},{many_collection:"directus_panels",many_field:"dashboard",one_collection:"directus_dashboards",one_field:"panels"},{many_collection:"directus_panels",many_field:"user_created",one_collection:"directus_users"},{many_collection:"directus_flows",many_field:"operation",one_collection:"directus_operations"},{many_collection:"directus_flows",many_field:"user_created",one_collection:"directus_users"},{many_collection:"directus_operations",many_field:"flow",one_collection:"directus_flows",one_field:"operations",one_deselect_action:"delete"},{many_collection:"directus_operations",many_field:"resolve",one_collection:"directus_operations"},{many_collection:"directus_operations",many_field:"reject",one_collection:"directus_operations"},{many_collection:"directus_operations",many_field:"user_created",one_collection:"directus_users"},{many_collection:"directus_sessions",many_field:"user",one_collection:"directus_users"},{many_collection:"directus_sessions",many_field:"share",one_collection:"directus_shares"},{many_collection:"directus_dashboards",many_field:"user_created",one_collection:"directus_users"},{many_collection:"directus_notifications",many_field:"recipient",one_collection:"directus_users"},{many_collection:"directus_notifications",many_field:"sender",one_collection:"directus_users"},{many_collection:"directus_shares",many_field:"role",one_collection:"directus_roles"},{many_collection:"directus_shares",many_field:"collection",one_collection:"directus_collections"},{many_collection:"directus_shares",many_field:"user_created",one_collection:"directus_users"},{many_collection:"directus_versions",many_field:"collection",one_collection:"directus_collections"},{many_collection:"directus_versions",many_field:"user_created",one_collection:"directus_users"},{many_collection:"directus_versions",many_field:"user_updated",one_collection:"directus_users"},{many_collection:"directus_permissions",many_field:"policy",one_collection:"directus_policies",one_field:"permissions",one_deselect_action:"delete"},{many_collection:"directus_access",many_field:"policy",one_collection:"directus_policies",one_field:"roles",one_deselect_action:"delete",junction_field:"role"},{many_collection:"directus_access",many_field:"policy",one_collection:"directus_policies",one_field:"users",one_deselect_action:"delete",junction_field:"user"},{many_collection:"directus_access",many_field:"role",one_collection:"directus_roles",one_field:"policies",one_deselect_action:"delete",junction_field:"policy",sort_field:"sort"},{many_collection:"directus_access",many_field:"user",one_collection:"directus_users",one_field:"policies",one_deselect_action:"delete",junction_field:"policy",sort_field:"sort"},{many_collection:"directus_roles",many_field:"parent",one_collection:"directus_roles",one_field:"children"},{many_collection:"directus_webhooks",many_field:"migrated_flow",one_collection:"directus_flows"}]};Xt.data.map((e=>({...Xt.defaults,...e,system:!0})));var Ht={collection:null,field:null,special:null,interface:null,options:null,display:null,display_options:null,readonly:!1,hidden:!1,sort:null,width:"full",group:null,translations:null,note:null,conditions:null,required:!1},Kt={table:"directus_settings",fields:[{field:"id",hidden:!0},{field:"project_name",interface:"input",options:{iconRight:"title",placeholder:"$t:field_options.directus_settings.project_name_placeholder"},width:"half"},{field:"project_descriptor",interface:"input",options:{iconRight:"title",placeholder:"$t:field_options.directus_settings.project_name_placeholder"},width:"half"},{field:"project_url",interface:"input",options:{iconRight:"link",placeholder:"https://example.com"},width:"half"},{field:"default_language",interface:"system-language",options:{iconRight:"language",placeholder:"en-US"},width:"half"},{field:"theming_group",interface:"group-raw",special:["alias","no-data","group"]},{field:"branding_divider",interface:"presentation-divider",options:{icon:"palette",title:"$t:fields.directus_settings.branding"},special:["alias","no-data"],width:"full",group:"theming_group"},{field:"project_color",interface:"select-color",note:"$t:field_options.directus_settings.project_color_note",width:"half",group:"theming_group"},{field:"project_logo",interface:"file",note:"$t:field_options.directus_settings.project_logo_note",width:"half",group:"theming_group"},{field:"public_foreground",interface:"file",width:"half",group:"theming_group"},{field:"public_background",interface:"file",width:"half",group:"theming_group"},{field:"public_favicon",interface:"file",note:"$t:field_options.directus_settings.project_favicon_note",width:"half",group:"theming_group"},{field:"public_note",interface:"input",options:{placeholder:"$t:field_options.directus_settings.public_note_placeholder",iconRight:"info"},width:"half",group:"theming_group"},{field:"theming_divider",interface:"presentation-divider",options:{icon:"palette",title:"$t:fields.directus_settings.theming"},special:["alias","no-data"],width:"full",group:"theming_group"},{field:"default_appearance",interface:"select-dropdown",width:"half",options:{choices:[{value:"auto",text:"$t:appearance_auto"},{value:"light",text:"$t:appearance_light"},{value:"dark",text:"$t:appearance_dark"}]},group:"theming_group"},{field:"default_theme_light",width:"full",interface:"system-theme",options:{appearance:"light"},group:"theming_group"},{field:"theme_light_overrides",width:"full",interface:"system-theme-overrides",options:{appearance:"light"},group:"theming_group",special:["cast-json"]},{field:"default_theme_dark",width:"full",interface:"system-theme",options:{appearance:"dark"},group:"theming_group"},{field:"theme_dark_overrides",width:"full",interface:"system-theme-overrides",options:{appearance:"dark"},group:"theming_group",special:["cast-json"]},{field:"custom_css",interface:"input-code",options:{language:"css",lineNumber:!0,template:"#app, #main-content, body {\n  --v-button-background-color: #6644FF !important;\n  --v-button-background-color-hover: #5E41EC !important;\n}\n"},width:"full",group:"theming_group"},{field:"modules_divider",interface:"presentation-divider",options:{icon:"menu_open",title:"$t:modules"},special:["alias","no-data"],width:"full"},{field:"module_bar",interface:"system-modules",special:["cast-json"]},{field:"security_divider",interface:"presentation-divider",options:{icon:"shield",title:"$t:security"},special:["alias","no-data"],width:"full"},{field:"auth_password_policy",interface:"select-dropdown",options:{choices:[{value:null,text:"$t:field_options.directus_settings.auth_password_policy.none_text"},{value:"/^.{8,}$/",text:"$t:field_options.directus_settings.auth_password_policy.weak_text"},{value:"/(?=^.{8,}$)(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*()_+}{';'?>.<,])(?!.*\\s).*$/",text:"$t:field_options.directus_settings.auth_password_policy.strong_text"}],allowOther:!0},width:"half"},{field:"auth_login_attempts",interface:"input",options:{iconRight:"lock",placeholder:"$t:unlimited"},width:"half"},{field:"public_registration_divider",interface:"presentation-divider",options:{icon:"person_add",title:"$t:fields.directus_settings.public_registration"},special:["alias","no-data"],width:"full"},{field:"public_registration",interface:"boolean",note:"$t:fields.directus_settings.public_registration_note",width:"half",options:{label:"$t:enabled"},special:["cast-boolean"]},{field:"public_registration_role",interface:"select-dropdown-m2o",note:"$t:fields.directus_settings.public_registration_role_note",options:{template:"{{ name }}"},special:["m2o"],width:"half",display:"related-values",display_options:{template:"{{ name }}"}},{field:"public_registration_verify_email",interface:"boolean",note:"$t:fields.directus_settings.public_registration_verify_email_note",width:"half",options:{label:"$t:enabled"},special:["cast-boolean"]},{field:"public_registration_email_filter",interface:"system-filter",note:"$t:fields.directus_settings.public_registration_email_filter_note",options:{collectionName:"directus_users",collectionField:"email",fieldName:"email"},special:["cast-json"],width:"half"},{field:"files_divider",interface:"presentation-divider",options:{icon:"folder",title:"$t:fields.directus_settings.files_and_thumbnails"},special:["alias","no-data"],width:"full"},{field:"storage_asset_transform",interface:"select-dropdown",options:{choices:[{value:"all",text:"$t:fields.directus_settings.transformations_all"},{value:"none",text:"$t:fields.directus_settings.transformations_none"},{value:"presets",text:"$t:fields.directus_settings.transformations_presets"}]},width:"half"},{field:"storage_default_folder",interface:"system-folder",width:"half",note:"$t:interfaces.system-folder.field_hint"},{field:"storage_asset_presets",interface:"list",options:{fields:[{field:"key",name:"$t:key",type:"string",schema:{is_nullable:!1},meta:{interface:"input",options:{slug:!0,onlyOnCreate:!1},width:"full",required:!0}},{field:"fit",name:"$t:field_options.directus_settings.storage_asset_presets.fit_label",type:"string",schema:{is_nullable:!1},meta:{interface:"select-dropdown",options:{choices:[{value:"contain",text:"$t:field_options.directus_settings.storage_asset_presets.fit.contain_text"},{value:"cover",text:"$t:field_options.directus_settings.storage_asset_presets.fit.cover_text"},{value:"inside",text:"$t:field_options.directus_settings.storage_asset_presets.fit.fit_text"},{value:"outside",text:"$t:field_options.directus_settings.storage_asset_presets.fit.outside_text"}]},width:"half"}},{field:"width",name:"$t:width",type:"integer",schema:{is_nullable:!1},meta:{interface:"input",width:"half"}},{field:"height",name:"$t:height",type:"integer",schema:{is_nullable:!1},meta:{interface:"input",width:"half"}},{field:"quality",type:"integer",name:"$t:quality",schema:{default_value:80,is_nullable:!1},meta:{interface:"slider",options:{max:100,min:0,step:1},width:"half"}},{field:"withoutEnlargement",name:"$t:field_options.directus_settings.storage_asset_presets.upscaling",type:"boolean",schema:{default_value:!1},meta:{interface:"boolean",width:"half",options:{label:"$t:no_upscale"}}},{field:"format",name:"$t:format",type:"string",schema:{is_nullable:!1,default_value:""},meta:{interface:"select-dropdown",options:{allowNone:!0,choices:[{value:"auto",text:"Auto"},{value:"jpeg",text:"JPEG"},{value:"png",text:"PNG"},{value:"webp",text:"WebP"},{value:"tiff",text:"Tiff"},{value:"avif",text:"AVIF"}]},width:"half"}},{field:"transforms",name:"$t:field_options.directus_settings.additional_transforms",type:"json",schema:{is_nullable:!1,default_value:[]},meta:{note:"$t:field_options.directus_settings.transforms_note",interface:"json",options:{template:'[\n  ["blur", 45],\n  ["grayscale"],\n  ["extend", { "right": 500, "background": "rgb(255, 0, 0)" }]\n]\n',placeholder:'[\n  ["blur", 45],\n  ["grayscale"],\n  ["extend", { "right": 500, "background": "rgb(255, 0, 0)" }]\n]\n'},width:"full"}}],template:"{{key}}"},special:["cast-json"],width:"full"},{field:"reporting_divider",interface:"presentation-divider",options:{icon:"feedback",title:"$t:fields.directus_settings.reporting"},special:["alias","no-data"],width:"full"},{field:"report_feature_url",interface:"input",options:{iconRight:"link",placeholder:"https://example.com/feature"},width:"half"},{field:"report_bug_url",interface:"input",options:{iconRight:"link",placeholder:"https://example.com/bug"},width:"half"},{field:"report_error_url",interface:"system-display-template",options:{placeholder:"https://example.com/error",fields:[{name:"Error",field:"error",key:"error",path:"error",children:[{name:"Name",field:"name",key:"error.name",path:"error.name"},{name:"Message",field:"message",key:"error.message",path:"error.message"}]},{name:"Navigator",field:"navigator",key:"navigator",path:"navigator",children:[{name:"Language",field:"language",key:"navigator.language",path:"navigator.language"},{name:"User Agent",field:"userAgent",key:"navigator.userAgent",path:"navigator.userAgent"}]},{name:"Route",field:"route",key:"route",path:"route",children:[{name:"Full Path",field:"fullPath",key:"route.fullPath",path:"route.fullPath"},{name:"Hash",field:"hash",key:"route.hash",path:"route.hash"},{name:"Name",field:"name",key:"route.name",path:"route.name"},{name:"Path",field:"path",key:"route.path",path:"route.path"},{name:"Query",field:"query",key:"route.query",path:"route.query"}]},{name:"User",field:"user",key:"user",path:"user",children:[{name:"ID",field:"id",key:"user.id",path:"user.id"},{name:"First Name",field:"first_name",key:"user.first_name",path:"user.first_name"},{name:"Last Name",field:"last_name",key:"user.last_name",path:"user.last_name"},{name:"Status",field:"status",key:"user.status",path:"user.status"},{name:"Title",field:"title",key:"user.title",path:"user.title"},{name:"Description",field:"description",key:"user.description",path:"user.description"},{name:"Location",field:"location",key:"user.location",path:"user.location"}]},{name:"Role",field:"role",key:"role",path:"role",children:[{name:"ID",field:"id",key:"role.id",path:"role.id"},{name:"Name",field:"name",key:"role.name",path:"role.name"}]}]},width:"full"},{field:"map_divider",interface:"presentation-divider",options:{icon:"map",title:"$t:fields.directus_settings.mapping"},special:["alias","no-data"],width:"full"},{field:"mapbox_key",interface:"input",options:{icon:"key",title:"$t:field_options.directus_settings.mapbox_key",placeholder:"$t:field_options.directus_settings.mapbox_placeholder",iconLeft:"vpn_key",font:"monospace"},width:"full"},{field:"basemaps",interface:"list",special:["cast-json"],options:{template:"{{name}}",fields:[{field:"name",name:"$t:name",schema:{is_nullable:!1},meta:{interface:"text-input",required:!0,options:{placeholder:"$t:field_options.directus_settings.basemaps_name_placeholder"}}},{field:"type",name:"$t:type",meta:{interface:"select-dropdown",options:{choices:[{value:"raster",text:"$t:field_options.directus_settings.basemaps_raster"},{value:"tile",text:"$t:field_options.directus_settings.basemaps_tile"},{value:"style",text:"$t:field_options.directus_settings.basemaps_style"}]}}},{field:"url",name:"$t:url",schema:{is_nullable:!1},meta:{interface:"text-input",options:{placeholder:"http://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png"}}},{field:"tileSize",name:"$t:tile_size",type:"integer",schema:{is_nullable:!0},meta:{interface:"input",options:{placeholder:"512"},conditions:[{name:"typeNeqRaster",rule:{type:{_neq:"raster"}},hidden:!0}]}},{field:"attribution",name:"$t:fields.directus_settings.attribution",type:"string",schema:{is_nullable:!0},meta:{interface:"input",options:{placeholder:"$t:fields.directus_settings.attribution_placeholder"}}}]}},{field:"image_editor",interface:"presentation-divider",options:{icon:"image",title:"$t:fields.directus_settings.image_editor"},special:["alias","no-data"],width:"full"},{field:"custom_aspect_ratios",interface:"list",special:["cast-json"],options:{template:"{{text}}",fields:[{field:"text",name:"$t:text",type:"string",meta:{interface:"text-input",width:"half",required:!0,options:{placeholder:"$t:text"}}},{field:"value",name:"$t:value",type:"float",meta:{interface:"input",width:"half",required:!0,options:{placeholder:"$t:value"}}}]}}]},Vt=[];function qt(e){let{fields:t,table:s}=e;t.forEach(((e,t)=>{Vt.push({system:!0,...Ht,...e,collection:s,sort:t+1})}))}qt({table:"directus_access",fields:[{field:"id",special:["uuid"],hidden:!0,width:"half"},{field:"role",hidden:!0,width:"half",special:["m2o"]},{field:"user",hidden:!0,width:"half",special:["m2o"]},{field:"policy",hidden:!0,width:"half",special:["m2o"]},{field:"sort",hidden:!0,width:"half"}]}),qt({table:"directus_activity",fields:[{field:"id",width:"half"},{field:"item",width:"half"},{field:"action",display:"labels",display_options:{choices:[{text:"$t:field_options.directus_activity.create",value:"create",foreground:"var(--theme--primary)",background:"var(--theme--primary-subdued)"},{text:"$t:field_options.directus_activity.update",value:"update",foreground:"var(--blue)",background:"var(--blue-25)"},{text:"$t:field_options.directus_activity.delete",value:"delete",foreground:"var(--theme--danger)",background:"var(--danger-25)"},{text:"$t:field_options.directus_activity.login",value:"login",foreground:"var(--purple)",background:"var(--purple-25)"}]},width:"half"},{field:"collection",display:"collection",display_options:{icon:!0},width:"half"},{field:"timestamp",display:"datetime",special:["date-created","cast-timestamp"],options:{relative:!0},width:"half"},{field:"user",display:"user",width:"half"},{field:"user_agent",display:"formatted-value",display_options:{font:"monospace"},width:"half"},{field:"origin",display:"formatted-value",display_options:{font:"monospace"},width:"half"},{field:"ip",display:"formatted-value",display_options:{font:"monospace"},width:"half"},{field:"revisions",interface:"list-o2m",special:["o2m"],options:{fields:["collection","item"]},width:"half"}]}),qt({table:"directus_collections",fields:[{field:"collection_divider",special:["alias","no-data"],interface:"presentation-divider",options:{icon:"box",title:"$t:field_options.directus_collections.collection_setup"},width:"full"},{field:"collection",interface:"input",options:{font:"monospace"},readonly:!0,width:"half"},{field:"note",interface:"input",options:{placeholder:"$t:field_options.directus_collections.note_placeholder"},width:"half"},{field:"icon",interface:"select-icon",options:null,width:"half"},{field:"color",interface:"select-color",options:{placeholder:"$t:interfaces.select-color.placeholder"},width:"half"},{field:"display_template",interface:"system-display-template",options:{collectionField:"collection"},width:"full"},{field:"hidden",special:["cast-boolean"],interface:"boolean",options:{label:"$t:field_options.directus_collections.hidden_label"},width:"half"},{field:"singleton",special:["cast-boolean"],interface:"boolean",options:{label:"$t:singleton_label"},width:"half"},{field:"translations",special:["cast-json"],interface:"list",options:{template:"{{ translation }} ({{ language }})",fields:[{field:"language",name:"$t:language",type:"string",schema:{default_value:"en-US"},meta:{interface:"system-language",width:"half",required:!0}},{field:"translation",name:"$t:field_options.directus_collections.collection_name",type:"string",meta:{interface:"input",width:"half",required:!0,options:{placeholder:"$t:field_options.directus_collections.translation_placeholder"}}},{field:"singular",name:"$t:field_options.directus_collections.singular_unit",type:"string",meta:{interface:"input",width:"half",options:{placeholder:"$t:field_options.directus_collections.translation_placeholder"}}},{field:"plural",name:"$t:field_options.directus_collections.plural_unit",type:"string",meta:{interface:"input",width:"half",options:{placeholder:"$t:field_options.directus_collections.translation_placeholder"}}}]},width:"full"},{field:"preview_divider",special:["alias","no-data"],interface:"presentation-divider",options:{icon:"preview",title:"$t:field_options.directus_collections.preview_divider"},width:"full"},{field:"preview_url",interface:"system-display-template",options:{collectionField:"collection",injectVersionField:!0},width:"full"},{field:"content_versioning_divider",special:["alias","no-data"],interface:"presentation-divider",options:{icon:"published_with_changes",title:"$t:field_options.directus_collections.content_versioning_divider"},width:"full"},{field:"versioning",interface:"boolean",special:["cast-boolean"],options:{label:"$t:field_options.directus_collections.enable_versioning"},width:"half"},{field:"archive_divider",special:["alias","no-data"],interface:"presentation-divider",options:{icon:"archive",title:"$t:field_options.directus_collections.archive_divider"},width:"full"},{field:"archive_field",interface:"system-field",options:{collectionField:"collection",allowNone:!0,placeholder:"$t:field_options.directus_collections.archive_field_placeholder"},width:"half"},{field:"archive_app_filter",interface:"boolean",special:["cast-boolean"],options:{label:"$t:field_options.directus_collections.archive_app_filter"},width:"half"},{field:"archive_value",interface:"input",options:{font:"monospace",iconRight:"archive",placeholder:"$t:field_options.directus_collections.archive_value"},width:"half"},{field:"unarchive_value",interface:"input",options:{font:"monospace",iconRight:"unarchive",placeholder:"$t:field_options.directus_collections.unarchive_value"},width:"half"},{field:"sort_divider",special:["alias","no-data"],interface:"presentation-divider",options:{icon:"sort",title:"$t:field_options.directus_collections.sort_divider"},width:"full"},{field:"sort_field",interface:"system-field",options:{collectionField:"collection",placeholder:"$t:field_options.directus_collections.sort_field",typeAllowList:["float","decimal","integer"],allowNone:!0,allowPrimaryKey:!1,allowForeignKeys:!1},width:"half"},{field:"accountability_divider",special:["alias","no-data"],interface:"presentation-divider",options:{icon:"admin_panel_settings",title:"$t:field_options.directus_collections.accountability_divider"},width:"full"},{field:"accountability",interface:"select-dropdown",options:{choices:[{text:"$t:field_options.directus_collections.track_activity_revisions",value:"all"},{text:"$t:field_options.directus_collections.only_track_activity",value:"activity"},{text:"$t:field_options.directus_collections.do_not_track_anything",value:null}]},width:"half"},{field:"duplication_divider",special:["alias","no-data"],interface:"presentation-divider",options:{icon:"content_copy",title:"$t:field_options.directus_collections.duplication_divider"}},{field:"item_duplication_fields",special:["cast-json"],interface:"system-field-tree",options:{collectionField:"collection"}},{field:"sort",hidden:!0},{field:"group",hidden:!0},{field:"collapse",hidden:!0}]}),qt({table:"directus_comments",fields:[{field:"id",special:["uuid"],readonly:!0,hidden:!0},{field:"collection"},{field:"item"},{field:"comment"},{field:"date_created",special:["date-created","cast-timestamp"]},{field:"date_updated",special:["date-updated","cast-timestamp"]},{field:"user_created",special:["user-created"]},{field:"user_updated",special:["user-updated"]}]}),qt({table:"directus_dashboards",fields:[{field:"id",special:["uuid"]},{field:"name"},{field:"icon"},{field:"panels",special:["o2m"]},{field:"date_created",special:["date-created","cast-timestamp"]},{field:"user_created",special:["user-created"]},{field:"note"},{field:"color"}]}),qt({table:"directus_extensions",fields:[{collection:"directus_extensions",field:"id",special:["uuid"]},{collection:"directus_extensions",field:"folder"},{collection:"directus_extensions",field:"source"},{collection:"directus_extensions",field:"bundle"},{collection:"directus_extensions",field:"enabled",special:["cast-boolean"]}]}),qt({table:"directus_fields",fields:[{collection:"directus_fields",field:"id",width:"half"},{collection:"directus_fields",field:"collection",width:"half"},{collection:"directus_fields",field:"field",width:"half"},{collection:"directus_fields",field:"special",hidden:!0,special:["cast-csv"],width:"half"},{collection:"directus_fields",field:"interface",width:"half"},{collection:"directus_fields",field:"options",hidden:!0,special:["cast-json"],width:"half"},{collection:"directus_fields",field:"display",width:"half"},{collection:"directus_fields",field:"display_options",hidden:!0,special:["cast-json"],width:"half"},{collection:"directus_fields",field:"readonly",hidden:!0,special:["cast-boolean"],width:"half"},{collection:"directus_fields",field:"hidden",hidden:!0,special:["cast-boolean"],width:"half"},{collection:"directus_fields",field:"required",hidden:!0,special:["cast-boolean"],width:"half"},{collection:"directus_fields",field:"sort",width:"half"},{collection:"directus_fields",field:"width",width:"half"},{collection:"directus_fields",field:"group",width:"half"},{collection:"directus_fields",field:"translations",hidden:!0,special:["cast-json"],width:"half"},{collection:"directus_fields",field:"note",width:"half"},{collection:"directus_fields",field:"conditions",hidden:!0,special:["cast-json"]},{collection:"directus_fields",field:"validation",hidden:!0,special:["cast-json"]},{collection:"directus_fields",field:"validation_message",hidden:!0}]}),qt({table:"directus_files",fields:[{field:"id",hidden:!0,interface:"input",special:["uuid"]},{field:"title",interface:"input",options:{iconRight:"title",placeholder:"$t:field_options.directus_files.title"},width:"full"},{field:"description",interface:"input-multiline",width:"full",options:{placeholder:"$t:field_options.directus_files.description"}},{field:"tags",interface:"tags",options:{iconRight:"local_offer"},special:["cast-json"],width:"full",display:"labels",display_options:{choices:null,format:!1}},{field:"location",interface:"input",options:{iconRight:"place",placeholder:"$t:field_options.directus_files.location"},width:"half"},{field:"storage",interface:"input",options:{iconRight:"storage"},width:"half",readonly:!0},{field:"focal_point_divider",interface:"presentation-divider",options:{icon:"image_search",title:"$t:field_options.directus_files.focal_point_divider"},special:["alias","no-data"],width:"full"},{field:"focal_point_x",width:"half"},{field:"focal_point_y",width:"half"},{field:"storage_divider",interface:"presentation-divider",options:{icon:"insert_drive_file",title:"$t:field_options.directus_files.storage_divider"},special:["alias","no-data"],width:"full"},{field:"filename_disk",interface:"input",options:{iconRight:"publish",placeholder:"$t:field_options.directus_files.filename_disk"},readonly:!0,width:"half"},{field:"filename_download",interface:"input",options:{iconRight:"get_app",placeholder:"$t:field_options.directus_files.filename_download"},width:"half"},{field:"metadata",hidden:!0,special:["cast-json"]},{field:"type",display:"mime-type",readonly:!0},{field:"filesize",display:"filesize",readonly:!0},{field:"created_on",interface:"datetime",display:"datetime",width:"half",special:["date-created"],readonly:!0},{field:"modified_by",interface:"select-dropdown-m2o",special:["user-updated"],width:"half",display:"user",readonly:!0,options:{template:"{{avatar.$thumbnail}} {{first_name}} {{last_name}}"}},{field:"modified_on",interface:"datetime",special:["date-updated"],width:"half",display:"datetime",readonly:!0},{field:"embed",width:"half",hidden:!0},{field:"uploaded_by",display:"user",width:"half",hidden:!0,special:["user-created"]},{field:"uploaded_on",display:"datetime",width:"half",hidden:!0},{field:"folder",width:"half",readonly:!0,special:["m2o"],display:"related-values",display_options:{template:"{{ name }}"}},{field:"width",width:"half",readonly:!0},{field:"height",width:"half",readonly:!0},{field:"charset",width:"half",readonly:!0},{field:"duration",width:"half",readonly:!0},{field:"tus_id",width:"half",hidden:!0},{field:"tus_data",width:"half",hidden:!0,special:["cast-json"]}]}),qt({table:"directus_flows",fields:[{field:"id",special:["uuid"]},{field:"name"},{field:"icon"},{field:"color"},{field:"description"},{field:"status"},{field:"trigger"},{field:"accountability"},{field:"options",special:["cast-json"]},{field:"operation"},{field:"operations",special:["o2m"]},{field:"date_created",special:["date-created"]},{field:"user_created",special:["user-created"]}]}),qt({table:"directus_folders",fields:[{field:"id",interface:"input",special:["uuid"],width:"half"},{field:"parent",width:"half"},{field:"name",width:"full"}]}),qt({table:"directus_migrations",fields:[{collection:"directus_migrations",field:"version"},{collection:"directus_migrations",field:"name"},{collection:"directus_migrations",field:"timestamp"}]}),qt({table:"directus_notifications",fields:[{field:"id"},{field:"timestamp",special:["date-created","cast-timestamp"]},{field:"status"},{field:"recipient"},{field:"sender"},{field:"subject"},{field:"message"},{field:"collection"},{field:"item"}]}),qt({table:"directus_operations",fields:[{field:"id",special:["uuid"]},{field:"name"},{field:"key"},{field:"type"},{field:"position_x"},{field:"position_y"},{field:"options",special:["cast-json"]},{field:"resolve"},{field:"reject"},{field:"flow"},{field:"date_created",special:["date-created"]},{field:"user_created",special:["user-created"]}]}),qt({table:"directus_panels",fields:[{field:"id",special:["uuid"]},{field:"name"},{field:"icon"},{field:"color"},{field:"note"},{field:"type"},{field:"show_header",special:["cast-boolean"]},{field:"position_x"},{field:"position_y"},{field:"width"},{field:"height"},{field:"options",special:["cast-json"]},{field:"date_created",special:["date-created","cast-timestamp"]},{field:"user_created",special:["user-created"]},{field:"dashboard"}]}),qt({table:"directus_permissions",fields:[{field:"permissions",hidden:!0,special:["cast-json"],width:"half"},{field:"presets",hidden:!0,special:["cast-json"],width:"half"},{field:"policy",hidden:!0,interface:"select-dropdown-m2o",width:"half",special:["m2o"]},{field:"collection",width:"half"},{field:"id",width:"half"},{field:"fields",width:"half",special:["cast-csv"]},{field:"action",width:"half"},{field:"validation",width:"half",special:["cast-json"]}]}),qt({table:"directus_policies",fields:[{field:"id",hidden:!0,special:["uuid"]},{field:"name",required:!0,width:"half",display:"formatted-value",display_options:{translate:!0}},{field:"icon",interface:"select-icon",display:"icon",width:"half"},{field:"description",interface:"input",options:{placeholder:"$t:field_options.directus_policies.description"},width:"full",display:"formatted-value",display_options:{translate:!0}},{field:"permissions",interface:"system-permissions",special:["o2m"]},{field:"app_access",interface:"boolean",special:["cast-boolean"],width:"half"},{field:"admin_access",interface:"boolean",special:["cast-boolean"],width:"half"},{field:"ip_access",interface:"tags",options:{placeholder:"$t:field_options.directus_policies.ip_access"},special:["cast-csv"],width:"full"},{field:"enforce_tfa",note:"$t:field_options.directus_policies.enforce_tfa",interface:"boolean",special:["cast-boolean"],width:"half"},{field:"assigned_to_divider",interface:"presentation-divider",options:{title:"$t:field_options.directus_policies.assigned_to"},special:["alias","no-data"],width:"full"},{field:"users",interface:"list-m2m",options:{template:"{{ user.first_name }} {{ user.last_name }}",junctionFilter:{user:{_nnull:!0}}},special:["m2m"]},{field:"roles",interface:"list-m2m",options:{template:"{{ role.name }}",junctionFilter:{role:{_nnull:!0}}},special:["m2m"]}]}),qt({table:"directus_presets",fields:[{field:"filter",hidden:!0,special:["cast-json"]},{field:"layout_query",hidden:!0,special:["cast-json"]},{field:"layout_options",hidden:!0,special:["cast-json"]},{field:"role",width:"half",special:["m2o"],display:"related-values",display_options:{template:"{{ name }}"}},{field:"user",width:"half",special:["m2o"],display:"related-values",display_options:{template:"{{ email }}"}},{field:"id",width:"half"},{field:"bookmark",width:"half"},{field:"icon",width:"half",display:"icon"},{field:"color",width:"half",display:"color"},{field:"search",width:"half"},{field:"collection",width:"half"},{field:"layout",width:"half"},{field:"refresh_interval"}]}),qt({table:"directus_relations",fields:[{field:"id",width:"half"},{field:"many_collection",width:"half"},{field:"many_field",width:"half"},{field:"one_collection",width:"half"},{field:"one_field",width:"half"},{field:"one_collection_field",width:"half"},{field:"one_allowed_collections",special:["cast-csv"],width:"half"},{field:"junction_field",width:"half"},{field:"sort_field",width:"half"},{field:"one_deselect_action",width:"half"}]}),qt({table:"directus_revisions",fields:[{field:"id",width:"half"},{field:"activity",width:"half"},{field:"collection",width:"half"},{field:"item",width:"half"},{field:"data",hidden:!0,special:["cast-json"]},{field:"delta",hidden:!0,special:["cast-json"]},{field:"parent",width:"half"},{field:"version",width:"half"}]}),qt({table:"directus_roles",fields:[{field:"id",hidden:!0,interface:"input",special:["uuid"]},{field:"name",required:!0,interface:"input",options:{placeholder:"$t:field_options.directus_roles.name"},width:"half",display:"formatted-value",display_options:{translate:!0}},{field:"icon",interface:"select-icon",display:"icon",width:"half"},{field:"description",interface:"input",options:{placeholder:"$t:field_options.directus_roles.description"},width:"full",display:"formatted-value",display_options:{translate:!0}},{field:"parent",interface:"select-dropdown-m2o",note:"$t:field_options.directus_roles.parent_note",options:{template:"{{ name }}",filter:{id:{_neq:"{{ id }}"}}},special:["m2o"],width:"half",display:"related-values",display_options:{template:"{{ name }}"}},{field:"children",hidden:!0,interface:"list-o2m-tree-view",note:"$t:field_options.directus_roles.children_note",special:["o2m"],options:{displayTemplate:"{{ name }}",enableCreate:!1,fields:["name"],filter:{id:{_neq:"{{ id }}"}}},display:"related-values",display_options:{template:"{{ name }}"},width:"full"},{field:"policies",interface:"list-m2m",options:{layout:"list"},display:"related-values",special:["m2m"],width:"full"},{field:"users_group",interface:"group-raw",special:["alias","no-data","group"]},{field:"users_divider",interface:"presentation-divider",options:{icon:"people_alt",title:"$t:users"},special:["alias","no-data"],width:"full",group:"users_group"},{field:"users",interface:"list-o2m",special:["o2m"],options:{fields:["first_name","last_name"]},width:"full",group:"users_group"}]}),qt({table:"directus_sessions",fields:[{field:"token",width:"half"},{field:"user",width:"half"},{field:"expires",width:"half"},{field:"ip",width:"half"},{field:"user_agent",width:"half"},{field:"origin",width:"half"},{field:"share",width:"half"},{field:"next_token",width:"half"}]}),qt(Kt),qt({table:"directus_shares",fields:[{field:"id",special:["uuid"],readonly:!0,hidden:!0},{field:"name"},{field:"collection",width:"half",hidden:!0},{field:"item",width:"half",hidden:!0},{field:"role",interface:"select-dropdown-m2o",width:"half",options:{template:"{{name}}"}},{field:"password",special:["hash","conceal"],interface:"input-hash",options:{iconRight:"lock",masked:!0},width:"half",note:"$t:shared_leave_blank_for_passwordless_access"},{field:"date_start",width:"half",note:"$t:shared_leave_blank_for_unlimited"},{field:"date_end",width:"half",note:"$t:shared_leave_blank_for_unlimited"},{field:"max_uses",width:"half",note:"$t:shared_leave_blank_for_unlimited"},{field:"times_used",width:"half",readonly:!0},{field:"date_created",special:["date-created","cast-timestamp"],width:"half",readonly:!0,conditions:[{name:"notCreatedYet",rule:{id:{_null:!0}},hidden:!0}]},{field:"user_created",special:["user-created"],interface:"select-dropdown-m2o",width:"half",display:"user",options:{template:"{{avatar.$thumbnail}} {{first_name}} {{last_name}}"},readonly:!0,conditions:[{name:"notCreatedYet",rule:{id:{_null:!0}},hidden:!0}]}]}),qt({table:"directus_translations",fields:[{field:"id",hidden:!0,sort:1,special:["uuid"]},{field:"key",width:"half",sort:2,required:!0,interface:"input",options:{font:"monospace",placeholder:"$t:translation_key_placeholder"}},{field:"language",interface:"system-language",width:"half",sort:3,required:!0},{field:"value",interface:"input-multiline",sort:4,required:!0,options:{placeholder:"$t:enter_a_value"}}]}),qt({table:"directus_users",fields:[{field:"first_name",interface:"input",options:{iconRight:"account_circle"},width:"half"},{field:"last_name",interface:"input",options:{iconRight:"account_circle"},width:"half"},{field:"email",interface:"input",options:{iconRight:"email"},width:"half"},{field:"password",special:["hash","conceal"],interface:"input-hash",options:{iconRight:"lock",masked:!0},width:"half"},{field:"avatar",interface:"file",width:"full",display:"image"},{field:"location",interface:"input",options:{iconRight:"place"},width:"half"},{field:"title",interface:"input",options:{iconRight:"work"},width:"half"},{field:"description",interface:"input-multiline",width:"full"},{field:"tags",interface:"tags",special:["cast-json"],width:"full",options:{iconRight:"local_offer"},display:"labels",display_options:{choices:null,format:!1}},{field:"preferences_divider",interface:"presentation-divider",options:{icon:"face",title:"$t:fields.directus_users.user_preferences"},special:["alias","no-data"],width:"full"},{field:"language",interface:"system-language",width:"half",options:{includeProjectDefault:!0}},{field:"tfa_secret",interface:"system-mfa-setup",special:["conceal"],width:"half"},{field:"email_notifications",interface:"boolean",width:"half",special:["cast-boolean"]},{field:"theming_divider",interface:"presentation-divider",options:{icon:"palette",title:"$t:theme"},special:["alias","no-data"],width:"full"},{field:"appearance",interface:"select-dropdown",options:{choices:[{value:null,text:"$t:default_sync_with_project"},{value:"auto",text:"$t:appearance_auto"},{value:"light",text:"$t:appearance_light"},{value:"dark",text:"$t:appearance_dark"}]},width:"half"},{field:"theme_light",width:"full",interface:"system-theme",options:{appearance:"light",includeNull:!0}},{field:"theme_light_overrides",width:"full",interface:"system-theme-overrides",options:{appearance:"light"},special:["cast-json"]},{field:"theme_dark",width:"full",interface:"system-theme",options:{appearance:"dark",includeNull:!0}},{field:"theme_dark_overrides",width:"full",interface:"system-theme-overrides",options:{appearance:"dark"},special:["cast-json"]},{field:"admin_divider",interface:"presentation-divider",options:{icon:"verified_user",title:"$t:fields.directus_users.admin_options",color:"var(--theme--danger)"},special:["alias","no-data"],width:"full"},{field:"status",interface:"select-dropdown",options:{choices:[{text:"$t:fields.directus_users.status_draft",value:"draft"},{text:"$t:fields.directus_users.status_invited",value:"invited"},{text:"$t:fields.directus_users.status_unverified",value:"unverified"},{text:"$t:fields.directus_users.status_active",value:"active"},{text:"$t:fields.directus_users.status_suspended",value:"suspended"},{text:"$t:fields.directus_users.status_archived",value:"archived"}]},width:"half"},{field:"role",interface:"select-dropdown-m2o",options:{template:"{{ name }}"},special:["m2o"],width:"half",display:"related-values",display_options:{template:"{{ name }}"}},{field:"policies",interface:"list-m2m",options:{layout:"list"},display:"related-values",special:["m2m"],width:"full"},{field:"token",interface:"system-token",special:["conceal"],width:"full"},{field:"id",special:["uuid"],interface:"input",options:{iconRight:"vpn_key"},width:"full"},{field:"last_page",width:"half"},{field:"last_access",width:"half",display:"datetime",readonly:!0,display_options:{relative:!0}},{field:"provider",width:"half",interface:"select-dropdown",options:{choices:[{text:"$t:default_provider",value:"default"}]}},{field:"external_identifier",width:"half",options:{iconRight:"account_circle"},interface:"input"},{field:"auth_data",hidden:!0}]}),qt({table:"directus_versions",fields:[{field:"id",special:["uuid"],readonly:!0,hidden:!0},{field:"key"},{field:"name"},{field:"collection"},{field:"item"},{field:"hash",readonly:!0,hidden:!0},{field:"date_created",special:["date-created","cast-timestamp"]},{field:"date_updated",special:["date-updated","cast-timestamp"]},{field:"user_created",special:["user-created"]},{field:"user_updated",special:["user-updated"]},{field:"delta",special:["cast-json"]}]}),qt({table:"directus_webhooks",fields:[{field:"id",hidden:!0},{field:"name",interface:"input",options:{iconRight:"title"},width:"full"},{field:"method",interface:"select-dropdown",display:"labels",display_options:{choices:[{value:"POST",foreground:"var(--theme--primary)",background:"var(--theme--primary-subdued)"},{value:"GET",foreground:"var(--theme--secondary)",background:"var(--secondary-25)"}],format:!1},options:{choices:["GET","POST"]},width:"half"},{field:"url",interface:"input",options:{iconRight:"link"},width:"half"},{field:"status",interface:"select-dropdown",display:"labels",display_options:{showAsDot:!0,choices:[{text:"$t:field_options.directus_webhooks.status_options_active",value:"active",foreground:"var(--theme--primary-background)",background:"var(--theme--primary)"},{text:"$t:field_options.directus_webhooks.status_options_inactive",value:"inactive",foreground:"var(--theme--foreground)",background:"var(--background-normal-alt)"}]},options:{choices:[{text:"$t:field_options.directus_webhooks.status_options_active",value:"active"},{text:"$t:field_options.directus_webhooks.status_options_inactive",value:"inactive"}]},width:"half"},{field:"data",interface:"boolean",options:{label:"$t:fields.directus_webhooks.data_label"},special:["cast-boolean"],width:"half",display:"boolean"},{field:"headers",special:["cast-json"],interface:"list",options:{template:"{{ header }}: {{ value }}",addLabel:"$t:field_options.directus_webhooks.headers.add",fields:[{field:"header",name:"$t:field_options.directus_webhooks.headers.header",type:"string",meta:{interface:"input",width:"half"}},{field:"value",name:"$t:field_options.directus_webhooks.headers.value",type:"string",meta:{interface:"input",width:"half"}}]},width:"full"},{field:"triggers_divider",interface:"presentation-divider",options:{icon:"api",title:"$t:fields.directus_webhooks.triggers"},special:["alias","no-data"],width:"full"},{field:"actions",interface:"select-multiple-checkbox",options:{choices:[{text:"$t:create",value:"create"},{text:"$t:update",value:"update"},{text:"$t:delete_label",value:"delete"}]},special:["cast-csv"],width:"full",display:"labels",display_options:{choices:[{text:"$t:create",value:"create",foreground:"var(--theme--primary)",background:"var(--theme--primary-subdued)"},{text:"$t:update",value:"update",foreground:"var(--blue)",background:"var(--blue-25)"},{text:"$t:delete_label",value:"delete",foreground:"var(--theme--danger)",background:"var(--danger-25)"},{text:"$t:login",value:"login",foreground:"var(--purple)",background:"var(--purple-25)"}]}},{field:"collections",interface:"system-collections",special:["cast-csv"],width:"full",display:"labels",display_options:{choices:null,format:!1}},{field:"was_active_before_deprecation",hidden:!0},{field:"migrated_flow",hidden:!0}]});var Wt,zt,Yt={policy:null,permissions:{},validation:null,presets:null,fields:["*"],system:!0};function Jt(e,t){if("__proto__"!==e)return t}function Qt(e){return"string"==typeof e?(t=e,String(t).includes("__proto__")?JSON.parse(t,Jt):JSON.parse(t)):e;var t}[...[{collection:"directus_collections",action:"read"},{collection:"directus_fields",action:"read"},{collection:"directus_relations",action:"read"},{collection:"directus_translations",action:"read"}].map((e=>({...Yt,...e}))),{collection:"directus_activity",action:"read",permissions:{user:{_eq:"$CURRENT_USER"}}},{collection:"directus_comments",action:"read",permissions:{user_created:{_eq:"$CURRENT_USER"}}},{collection:"directus_comments",action:"create",validation:{comment:{_nnull:!0}}},{collection:"directus_comments",action:"update",permissions:{user_created:{_eq:"$CURRENT_USER"}},fields:["comment"]},{collection:"directus_comments",action:"delete",permissions:{user_created:{_eq:"$CURRENT_USER"}}},{collection:"directus_presets",action:"read",permissions:{_or:[{user:{_eq:"$CURRENT_USER"}},{_and:[{user:{_null:!0}},{role:{_eq:"$CURRENT_ROLE"}}]},{_and:[{user:{_null:!0}},{role:{_null:!0}}]}]}},{collection:"directus_presets",action:"create",validation:{user:{_eq:"$CURRENT_USER"}}},{collection:"directus_presets",action:"update",permissions:{user:{_eq:"$CURRENT_USER"}},validation:{user:{_eq:"$CURRENT_USER"}}},{collection:"directus_presets",action:"delete",permissions:{user:{_eq:"$CURRENT_USER"}}},{collection:"directus_roles",action:"read",permissions:{id:{_in:"$CURRENT_ROLES"}}},{collection:"directus_settings",action:"read"},{collection:"directus_translations",action:"read"},{collection:"directus_notifications",action:"read",permissions:{recipient:{_eq:"$CURRENT_USER"}}},{collection:"directus_notifications",action:"update",permissions:{recipient:{_eq:"$CURRENT_USER"}},fields:["status"]},{collection:"directus_shares",action:"read",permissions:{user_created:{_eq:"$CURRENT_USER"}}},{collection:"directus_users",action:"read",permissions:{id:{_eq:"$CURRENT_USER"}},fields:["id","first_name","last_name","last_page","email","password","location","title","description","tags","preferences_divider","avatar","language","appearance","theme_light","theme_dark","tfa_secret","status","role"]}].map((e=>({...Yt,...e}))),Gt.extend({type:"string",base:Gt.string(),messages:{"string.contains":"{{#label}} must contain [{{#substring}}]","string.icontains":"{{#label}} must contain case insensitive [{{#substring}}]","string.ncontains":"{{#label}} can't contain [{{#substring}}]"},rules:{contains:{args:[{name:"substring",ref:!0,assert:e=>"string"==typeof e,message:"must be a string"}],method(e){return this.$_addRule({name:"contains",args:{substring:e}})},validate:(e,t,{substring:s})=>!1===e.includes(s)?t.error("string.contains",{substring:s}):e},icontains:{args:[{name:"substring",ref:!0,assert:e=>"string"==typeof e,message:"must be a string"}],method(e){return this.$_addRule({name:"icontains",args:{substring:e}})},validate:(e,t,{substring:s})=>!1===e.toLowerCase().includes(s.toLowerCase())?t.error("string.icontains",{substring:s}):e},ncontains:{args:[{name:"substring",ref:!0,assert:e=>"string"==typeof e,message:"must be a string"}],method(e){return this.$_addRule({name:"ncontains",args:{substring:e}})},validate:(e,t,{substring:s})=>!0===e.includes(s)?t.error("string.ncontains",{substring:s}):e}}}),function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const s of e)t[s]=s;return t},e.getValidEnumValues=t=>{const s=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),i={};for(const e of s)i[e]=t[e];return e.objectValues(i)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.push(s);return t},e.find=(e,t)=>{for(const s of e)if(t(s))return s},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(Wt||(Wt={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(zt||(zt={}));const es=Wt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ts=e=>{switch(typeof e){case"undefined":return es.undefined;case"string":return es.string;case"number":return isNaN(e)?es.nan:es.number;case"boolean":return es.boolean;case"function":return es.function;case"bigint":return es.bigint;case"symbol":return es.symbol;case"object":return Array.isArray(e)?es.array:null===e?es.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?es.promise:"undefined"!=typeof Map&&e instanceof Map?es.map:"undefined"!=typeof Set&&e instanceof Set?es.set:"undefined"!=typeof Date&&e instanceof Date?es.date:es.object;default:return es.unknown}},ss=Wt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class is extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},s={_errors:[]},i=e=>{for(const r of e.issues)if("invalid_union"===r.code)r.unionErrors.map(i);else if("invalid_return_type"===r.code)i(r.returnTypeError);else if("invalid_arguments"===r.code)i(r.argumentsError);else if(0===r.path.length)s._errors.push(t(r));else{let e=s,i=0;for(;i<r.path.length;){const s=r.path[i];i===r.path.length-1?(e[s]=e[s]||{_errors:[]},e[s]._errors.push(t(r))):e[s]=e[s]||{_errors:[]},e=e[s],i++}}};return i(this),s}static assert(e){if(!(e instanceof is))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Wt.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},s=[];for(const i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):s.push(e(i));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}}is.create=e=>new is(e);const rs=(e,t)=>{let s;switch(e.code){case ss.invalid_type:s=e.received===es.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case ss.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(e.expected,Wt.jsonStringifyReplacer)}`;break;case ss.unrecognized_keys:s=`Unrecognized key(s) in object: ${Wt.joinValues(e.keys,", ")}`;break;case ss.invalid_union:s="Invalid input";break;case ss.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${Wt.joinValues(e.options)}`;break;case ss.invalid_enum_value:s=`Invalid enum value. Expected ${Wt.joinValues(e.options)}, received '${e.received}'`;break;case ss.invalid_arguments:s="Invalid function arguments";break;case ss.invalid_return_type:s="Invalid function return type";break;case ss.invalid_date:s="Invalid date";break;case ss.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(s=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(s=`${s} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?s=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?s=`Invalid input: must end with "${e.validation.endsWith}"`:Wt.assertNever(e.validation):s="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case ss.too_small:s="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case ss.too_big:s="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case ss.custom:s="Invalid input";break;case ss.invalid_intersection_types:s="Intersection results could not be merged";break;case ss.not_multiple_of:s=`Number must be a multiple of ${e.multipleOf}`;break;case ss.not_finite:s="Number must be finite";break;default:s=t.defaultError,Wt.assertNever(e)}return{message:s}};let ns=rs;function as(){return ns}const os=e=>{const{data:t,path:s,errorMaps:i,issueData:r}=e,n=[...s,...r.path||[]],a={...r,path:n};if(void 0!==r.message)return{...r,path:n,message:r.message};let o="";const l=i.filter((e=>!!e)).slice().reverse();for(const e of l)o=e(a,{data:t,defaultError:o}).message;return{...r,path:n,message:o}};function ls(e,t){const s=as(),i=os({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,s,s===rs?void 0:rs].filter((e=>!!e))});e.common.issues.push(i)}class cs{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const s=[];for(const i of t){if("aborted"===i.status)return ds;"dirty"===i.status&&e.dirty(),s.push(i.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){const s=[];for(const e of t){const t=await e.key,i=await e.value;s.push({key:t,value:i})}return cs.mergeObjectSync(e,s)}static mergeObjectSync(e,t){const s={};for(const i of t){const{key:t,value:r}=i;if("aborted"===t.status)return ds;if("aborted"===r.status)return ds;"dirty"===t.status&&e.dirty(),"dirty"===r.status&&e.dirty(),"__proto__"===t.value||void 0===r.value&&!i.alwaysSet||(s[t.value]=r.value)}return{status:e.value,value:s}}}const ds=Object.freeze({status:"aborted"}),us=e=>({status:"dirty",value:e}),fs=e=>({status:"valid",value:e}),ps=e=>"aborted"===e.status,hs=e=>"dirty"===e.status,ms=e=>"valid"===e.status,_s=e=>"undefined"!=typeof Promise&&e instanceof Promise;function gs(e,t,s,i){if("a"===s&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?i:"a"===s?i.call(e):i?i.value:t.get(e)}function ys(e,t,s,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,s):r?r.value=s:t.set(e,s),s}var vs,bs,ws;"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(vs||(vs={}));class As{constructor(e,t,s,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Es=(e,t)=>{if(ms(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new is(e.common.issues);return this._error=t,this._error}}};function Rs(e){if(!e)return{};const{errorMap:t,invalid_type_error:s,required_error:i,description:r}=e;if(t&&(s||i))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:r};return{errorMap:(t,r)=>{var n,a;const{message:o}=e;return"invalid_enum_value"===t.code?{message:null!=o?o:r.defaultError}:void 0===r.data?{message:null!==(n=null!=o?o:i)&&void 0!==n?n:r.defaultError}:"invalid_type"!==t.code?{message:r.defaultError}:{message:null!==(a=null!=o?o:s)&&void 0!==a?a:r.defaultError}},description:r}}class Ss{get description(){return this._def.description}_getType(e){return ts(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:ts(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new cs,ctx:{common:e.parent.common,data:e.data,parsedType:ts(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(_s(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){var s;const i={common:{issues:[],async:null!==(s=null==t?void 0:t.async)&&void 0!==s&&s,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ts(e)},r=this._parseSync({data:e,path:i.path,parent:i});return Es(i,r)}"~validate"(e){var t,s;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ts(e)};if(!this["~standard"].async)try{const t=this._parseSync({data:e,path:[],parent:i});return ms(t)?{value:t.value}:{issues:i.common.issues}}catch(e){(null===(s=null===(t=null==e?void 0:e.message)||void 0===t?void 0:t.toLowerCase())||void 0===s?void 0:s.includes("encountered"))&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then((e=>ms(e)?{value:e.value}:{issues:i.common.issues}))}async parseAsync(e,t){const s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){const s={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ts(e)},i=this._parse({data:e,path:s.path,parent:s}),r=await(_s(i)?i:Promise.resolve(i));return Es(s,r)}refine(e,t){const s=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,i)=>{const r=e(t),n=()=>i.addIssue({code:ss.custom,...s(t)});return"undefined"!=typeof Promise&&r instanceof Promise?r.then((e=>!!e||(n(),!1))):!!r||(n(),!1)}))}refinement(e,t){return this._refinement(((s,i)=>!!e(s)||(i.addIssue("function"==typeof t?t(s,i):t),!1)))}_refinement(e){return new Oi({schema:this,typeName:Pi.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return $i.create(this,this._def)}nullable(){return xi.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return oi.create(this)}promise(){return Si.create(this,this._def)}or(e){return di.create([this,e],this._def)}and(e){return hi.create(this,e,this._def)}transform(e){return new Oi({...Rs(this._def),schema:this,typeName:Pi.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new Ni({...Rs(this._def),innerType:this,defaultValue:t,typeName:Pi.ZodDefault})}brand(){return new Ci({typeName:Pi.ZodBranded,type:this,...Rs(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new Ii({...Rs(this._def),innerType:this,catchValue:t,typeName:Pi.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return ji.create(this,e)}readonly(){return Li.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Os=/^c[^\s-]{8,}$/i,$s=/^[0-9a-z]+$/,xs=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Ns=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Is=/^[a-z0-9_-]{21}$/i,ks=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Ts=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Cs=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let js;const Ls=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ds=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Ms=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Ps=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Bs=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Us=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Fs="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Gs=new RegExp(`^${Fs}$`);function Zs(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function Xs(e){let t=`${Fs}T${Zs(e)}`;const s=[];return s.push(e.local?"Z?":"Z"),e.offset&&s.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${s.join("|")})`,new RegExp(`^${t}$`)}function Hs(e,t){return!("v4"!==t&&t||!Ls.test(e))||!("v6"!==t&&t||!Ms.test(e))}function Ks(e,t){if(!ks.test(e))return!1;try{const[s]=e.split("."),i=s.replace(/-/g,"+").replace(/_/g,"/").padEnd(s.length+(4-s.length%4)%4,"="),r=JSON.parse(atob(i));return"object"==typeof r&&null!==r&&(!(!r.typ||!r.alg)&&(!t||r.alg===t))}catch(e){return!1}}function Vs(e,t){return!("v4"!==t&&t||!Ds.test(e))||!("v6"!==t&&t||!Ps.test(e))}class qs extends Ss{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==es.string){const t=this._getOrReturnCtx(e);return ls(t,{code:ss.invalid_type,expected:es.string,received:t.parsedType}),ds}const t=new cs;let s;for(const i of this._def.checks)if("min"===i.kind)e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),ls(s,{code:ss.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("max"===i.kind)e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),ls(s,{code:ss.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("length"===i.kind){const r=e.data.length>i.value,n=e.data.length<i.value;(r||n)&&(s=this._getOrReturnCtx(e,s),r?ls(s,{code:ss.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):n&&ls(s,{code:ss.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),t.dirty())}else if("email"===i.kind)Cs.test(e.data)||(s=this._getOrReturnCtx(e,s),ls(s,{validation:"email",code:ss.invalid_string,message:i.message}),t.dirty());else if("emoji"===i.kind)js||(js=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),js.test(e.data)||(s=this._getOrReturnCtx(e,s),ls(s,{validation:"emoji",code:ss.invalid_string,message:i.message}),t.dirty());else if("uuid"===i.kind)Ns.test(e.data)||(s=this._getOrReturnCtx(e,s),ls(s,{validation:"uuid",code:ss.invalid_string,message:i.message}),t.dirty());else if("nanoid"===i.kind)Is.test(e.data)||(s=this._getOrReturnCtx(e,s),ls(s,{validation:"nanoid",code:ss.invalid_string,message:i.message}),t.dirty());else if("cuid"===i.kind)Os.test(e.data)||(s=this._getOrReturnCtx(e,s),ls(s,{validation:"cuid",code:ss.invalid_string,message:i.message}),t.dirty());else if("cuid2"===i.kind)$s.test(e.data)||(s=this._getOrReturnCtx(e,s),ls(s,{validation:"cuid2",code:ss.invalid_string,message:i.message}),t.dirty());else if("ulid"===i.kind)xs.test(e.data)||(s=this._getOrReturnCtx(e,s),ls(s,{validation:"ulid",code:ss.invalid_string,message:i.message}),t.dirty());else if("url"===i.kind)try{new URL(e.data)}catch(r){s=this._getOrReturnCtx(e,s),ls(s,{validation:"url",code:ss.invalid_string,message:i.message}),t.dirty()}else if("regex"===i.kind){i.regex.lastIndex=0;i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),ls(s,{validation:"regex",code:ss.invalid_string,message:i.message}),t.dirty())}else if("trim"===i.kind)e.data=e.data.trim();else if("includes"===i.kind)e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),ls(s,{code:ss.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),t.dirty());else if("toLowerCase"===i.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===i.kind)e.data=e.data.toUpperCase();else if("startsWith"===i.kind)e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),ls(s,{code:ss.invalid_string,validation:{startsWith:i.value},message:i.message}),t.dirty());else if("endsWith"===i.kind)e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),ls(s,{code:ss.invalid_string,validation:{endsWith:i.value},message:i.message}),t.dirty());else if("datetime"===i.kind){Xs(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ls(s,{code:ss.invalid_string,validation:"datetime",message:i.message}),t.dirty())}else if("date"===i.kind){Gs.test(e.data)||(s=this._getOrReturnCtx(e,s),ls(s,{code:ss.invalid_string,validation:"date",message:i.message}),t.dirty())}else if("time"===i.kind){new RegExp(`^${Zs(i)}$`).test(e.data)||(s=this._getOrReturnCtx(e,s),ls(s,{code:ss.invalid_string,validation:"time",message:i.message}),t.dirty())}else"duration"===i.kind?Ts.test(e.data)||(s=this._getOrReturnCtx(e,s),ls(s,{validation:"duration",code:ss.invalid_string,message:i.message}),t.dirty()):"ip"===i.kind?Hs(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ls(s,{validation:"ip",code:ss.invalid_string,message:i.message}),t.dirty()):"jwt"===i.kind?Ks(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),ls(s,{validation:"jwt",code:ss.invalid_string,message:i.message}),t.dirty()):"cidr"===i.kind?Vs(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ls(s,{validation:"cidr",code:ss.invalid_string,message:i.message}),t.dirty()):"base64"===i.kind?Bs.test(e.data)||(s=this._getOrReturnCtx(e,s),ls(s,{validation:"base64",code:ss.invalid_string,message:i.message}),t.dirty()):"base64url"===i.kind?Us.test(e.data)||(s=this._getOrReturnCtx(e,s),ls(s,{validation:"base64url",code:ss.invalid_string,message:i.message}),t.dirty()):Wt.assertNever(i);return{status:t.value,value:e.data}}_regex(e,t,s){return this.refinement((t=>e.test(t)),{validation:t,code:ss.invalid_string,...vs.errToObj(s)})}_addCheck(e){return new qs({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...vs.errToObj(e)})}url(e){return this._addCheck({kind:"url",...vs.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...vs.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...vs.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...vs.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...vs.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...vs.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...vs.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...vs.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...vs.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...vs.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...vs.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...vs.errToObj(e)})}datetime(e){var t,s;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(s=null==e?void 0:e.local)&&void 0!==s&&s,...vs.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...vs.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...vs.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...vs.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...vs.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...vs.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...vs.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...vs.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...vs.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...vs.errToObj(t)})}nonempty(e){return this.min(1,vs.errToObj(e))}trim(){return new qs({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new qs({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new qs({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isCIDR(){return!!this._def.checks.find((e=>"cidr"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get isBase64url(){return!!this._def.checks.find((e=>"base64url"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function Ws(e,t){const s=(e.toString().split(".")[1]||"").length,i=(t.toString().split(".")[1]||"").length,r=s>i?s:i;return parseInt(e.toFixed(r).replace(".",""))%parseInt(t.toFixed(r).replace(".",""))/Math.pow(10,r)}qs.create=e=>{var t;return new qs({checks:[],typeName:Pi.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...Rs(e)})};class zs extends Ss{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==es.number){const t=this._getOrReturnCtx(e);return ls(t,{code:ss.invalid_type,expected:es.number,received:t.parsedType}),ds}let t;const s=new cs;for(const i of this._def.checks)if("int"===i.kind)Wt.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),ls(t,{code:ss.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty());else if("min"===i.kind){(i.inclusive?e.data<i.value:e.data<=i.value)&&(t=this._getOrReturnCtx(e,t),ls(t,{code:ss.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty())}else if("max"===i.kind){(i.inclusive?e.data>i.value:e.data>=i.value)&&(t=this._getOrReturnCtx(e,t),ls(t,{code:ss.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty())}else"multipleOf"===i.kind?0!==Ws(e.data,i.value)&&(t=this._getOrReturnCtx(e,t),ls(t,{code:ss.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):"finite"===i.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),ls(t,{code:ss.not_finite,message:i.message}),s.dirty()):Wt.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,vs.toString(t))}gt(e,t){return this.setLimit("min",e,!1,vs.toString(t))}lte(e,t){return this.setLimit("max",e,!0,vs.toString(t))}lt(e,t){return this.setLimit("max",e,!1,vs.toString(t))}setLimit(e,t,s,i){return new zs({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:vs.toString(i)}]})}_addCheck(e){return new zs({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:vs.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:vs.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:vs.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:vs.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:vs.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:vs.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:vs.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:vs.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:vs.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&Wt.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const s of this._def.checks){if("finite"===s.kind||"int"===s.kind||"multipleOf"===s.kind)return!0;"min"===s.kind?(null===t||s.value>t)&&(t=s.value):"max"===s.kind&&(null===e||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}}zs.create=e=>new zs({checks:[],typeName:Pi.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...Rs(e)});class Ys extends Ss{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch(t){return this._getInvalidInput(e)}if(this._getType(e)!==es.bigint)return this._getInvalidInput(e);let t;const s=new cs;for(const i of this._def.checks)if("min"===i.kind){(i.inclusive?e.data<i.value:e.data<=i.value)&&(t=this._getOrReturnCtx(e,t),ls(t,{code:ss.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty())}else if("max"===i.kind){(i.inclusive?e.data>i.value:e.data>=i.value)&&(t=this._getOrReturnCtx(e,t),ls(t,{code:ss.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty())}else"multipleOf"===i.kind?e.data%i.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),ls(t,{code:ss.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Wt.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return ls(t,{code:ss.invalid_type,expected:es.bigint,received:t.parsedType}),ds}gte(e,t){return this.setLimit("min",e,!0,vs.toString(t))}gt(e,t){return this.setLimit("min",e,!1,vs.toString(t))}lte(e,t){return this.setLimit("max",e,!0,vs.toString(t))}lt(e,t){return this.setLimit("max",e,!1,vs.toString(t))}setLimit(e,t,s,i){return new Ys({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:vs.toString(i)}]})}_addCheck(e){return new Ys({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:vs.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:vs.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:vs.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:vs.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:vs.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}Ys.create=e=>{var t;return new Ys({checks:[],typeName:Pi.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...Rs(e)})};class Js extends Ss{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==es.boolean){const t=this._getOrReturnCtx(e);return ls(t,{code:ss.invalid_type,expected:es.boolean,received:t.parsedType}),ds}return fs(e.data)}}Js.create=e=>new Js({typeName:Pi.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...Rs(e)});class Qs extends Ss{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==es.date){const t=this._getOrReturnCtx(e);return ls(t,{code:ss.invalid_type,expected:es.date,received:t.parsedType}),ds}if(isNaN(e.data.getTime())){return ls(this._getOrReturnCtx(e),{code:ss.invalid_date}),ds}const t=new cs;let s;for(const i of this._def.checks)"min"===i.kind?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),ls(s,{code:ss.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),t.dirty()):"max"===i.kind?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),ls(s,{code:ss.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),t.dirty()):Wt.assertNever(i);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Qs({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:vs.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:vs.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}Qs.create=e=>new Qs({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:Pi.ZodDate,...Rs(e)});class ei extends Ss{_parse(e){if(this._getType(e)!==es.symbol){const t=this._getOrReturnCtx(e);return ls(t,{code:ss.invalid_type,expected:es.symbol,received:t.parsedType}),ds}return fs(e.data)}}ei.create=e=>new ei({typeName:Pi.ZodSymbol,...Rs(e)});class ti extends Ss{_parse(e){if(this._getType(e)!==es.undefined){const t=this._getOrReturnCtx(e);return ls(t,{code:ss.invalid_type,expected:es.undefined,received:t.parsedType}),ds}return fs(e.data)}}ti.create=e=>new ti({typeName:Pi.ZodUndefined,...Rs(e)});class si extends Ss{_parse(e){if(this._getType(e)!==es.null){const t=this._getOrReturnCtx(e);return ls(t,{code:ss.invalid_type,expected:es.null,received:t.parsedType}),ds}return fs(e.data)}}si.create=e=>new si({typeName:Pi.ZodNull,...Rs(e)});class ii extends Ss{constructor(){super(...arguments),this._any=!0}_parse(e){return fs(e.data)}}ii.create=e=>new ii({typeName:Pi.ZodAny,...Rs(e)});class ri extends Ss{constructor(){super(...arguments),this._unknown=!0}_parse(e){return fs(e.data)}}ri.create=e=>new ri({typeName:Pi.ZodUnknown,...Rs(e)});class ni extends Ss{_parse(e){const t=this._getOrReturnCtx(e);return ls(t,{code:ss.invalid_type,expected:es.never,received:t.parsedType}),ds}}ni.create=e=>new ni({typeName:Pi.ZodNever,...Rs(e)});class ai extends Ss{_parse(e){if(this._getType(e)!==es.undefined){const t=this._getOrReturnCtx(e);return ls(t,{code:ss.invalid_type,expected:es.void,received:t.parsedType}),ds}return fs(e.data)}}ai.create=e=>new ai({typeName:Pi.ZodVoid,...Rs(e)});class oi extends Ss{_parse(e){const{ctx:t,status:s}=this._processInputParams(e),i=this._def;if(t.parsedType!==es.array)return ls(t,{code:ss.invalid_type,expected:es.array,received:t.parsedType}),ds;if(null!==i.exactLength){const e=t.data.length>i.exactLength.value,r=t.data.length<i.exactLength.value;(e||r)&&(ls(t,{code:e?ss.too_big:ss.too_small,minimum:r?i.exactLength.value:void 0,maximum:e?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),s.dirty())}if(null!==i.minLength&&t.data.length<i.minLength.value&&(ls(t,{code:ss.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),s.dirty()),null!==i.maxLength&&t.data.length>i.maxLength.value&&(ls(t,{code:ss.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map(((e,s)=>i.type._parseAsync(new As(t,e,t.path,s))))).then((e=>cs.mergeArray(s,e)));const r=[...t.data].map(((e,s)=>i.type._parseSync(new As(t,e,t.path,s))));return cs.mergeArray(s,r)}get element(){return this._def.type}min(e,t){return new oi({...this._def,minLength:{value:e,message:vs.toString(t)}})}max(e,t){return new oi({...this._def,maxLength:{value:e,message:vs.toString(t)}})}length(e,t){return new oi({...this._def,exactLength:{value:e,message:vs.toString(t)}})}nonempty(e){return this.min(1,e)}}function li(e){if(e instanceof ci){const t={};for(const s in e.shape){const i=e.shape[s];t[s]=$i.create(li(i))}return new ci({...e._def,shape:()=>t})}return e instanceof oi?new oi({...e._def,type:li(e.element)}):e instanceof $i?$i.create(li(e.unwrap())):e instanceof xi?xi.create(li(e.unwrap())):e instanceof mi?mi.create(e.items.map((e=>li(e)))):e}oi.create=(e,t)=>new oi({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Pi.ZodArray,...Rs(t)});class ci extends Ss{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=Wt.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==es.object){const t=this._getOrReturnCtx(e);return ls(t,{code:ss.invalid_type,expected:es.object,received:t.parsedType}),ds}const{status:t,ctx:s}=this._processInputParams(e),{shape:i,keys:r}=this._getCached(),n=[];if(!(this._def.catchall instanceof ni&&"strip"===this._def.unknownKeys))for(const e in s.data)r.includes(e)||n.push(e);const a=[];for(const e of r){const t=i[e],r=s.data[e];a.push({key:{status:"valid",value:e},value:t._parse(new As(s,r,s.path,e)),alwaysSet:e in s.data})}if(this._def.catchall instanceof ni){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of n)a.push({key:{status:"valid",value:e},value:{status:"valid",value:s.data[e]}});else if("strict"===e)n.length>0&&(ls(s,{code:ss.unrecognized_keys,keys:n}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of n){const i=s.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new As(s,i,s.path,t)),alwaysSet:t in s.data})}}return s.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of a){const s=await t.key,i=await t.value;e.push({key:s,value:i,alwaysSet:t.alwaysSet})}return e})).then((e=>cs.mergeObjectSync(t,e))):cs.mergeObjectSync(t,a)}get shape(){return this._def.shape()}strict(e){return vs.errToObj,new ci({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,s)=>{var i,r,n,a;const o=null!==(n=null===(r=(i=this._def).errorMap)||void 0===r?void 0:r.call(i,t,s).message)&&void 0!==n?n:s.defaultError;return"unrecognized_keys"===t.code?{message:null!==(a=vs.errToObj(e).message)&&void 0!==a?a:o}:{message:o}}}:{}})}strip(){return new ci({...this._def,unknownKeys:"strip"})}passthrough(){return new ci({...this._def,unknownKeys:"passthrough"})}extend(e){return new ci({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ci({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Pi.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ci({...this._def,catchall:e})}pick(e){const t={};return Wt.objectKeys(e).forEach((s=>{e[s]&&this.shape[s]&&(t[s]=this.shape[s])})),new ci({...this._def,shape:()=>t})}omit(e){const t={};return Wt.objectKeys(this.shape).forEach((s=>{e[s]||(t[s]=this.shape[s])})),new ci({...this._def,shape:()=>t})}deepPartial(){return li(this)}partial(e){const t={};return Wt.objectKeys(this.shape).forEach((s=>{const i=this.shape[s];e&&!e[s]?t[s]=i:t[s]=i.optional()})),new ci({...this._def,shape:()=>t})}required(e){const t={};return Wt.objectKeys(this.shape).forEach((s=>{if(e&&!e[s])t[s]=this.shape[s];else{let e=this.shape[s];for(;e instanceof $i;)e=e._def.innerType;t[s]=e}})),new ci({...this._def,shape:()=>t})}keyof(){return Ai(Wt.objectKeys(this.shape))}}ci.create=(e,t)=>new ci({shape:()=>e,unknownKeys:"strip",catchall:ni.create(),typeName:Pi.ZodObject,...Rs(t)}),ci.strictCreate=(e,t)=>new ci({shape:()=>e,unknownKeys:"strict",catchall:ni.create(),typeName:Pi.ZodObject,...Rs(t)}),ci.lazycreate=(e,t)=>new ci({shape:e,unknownKeys:"strip",catchall:ni.create(),typeName:Pi.ZodObject,...Rs(t)});class di extends Ss{_parse(e){const{ctx:t}=this._processInputParams(e),s=this._def.options;if(t.common.async)return Promise.all(s.map((async e=>{const s={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:s}),ctx:s}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const s of e)if("dirty"===s.result.status)return t.common.issues.push(...s.ctx.common.issues),s.result;const s=e.map((e=>new is(e.ctx.common.issues)));return ls(t,{code:ss.invalid_union,unionErrors:s}),ds}));{let e;const i=[];for(const r of s){const s={...t,common:{...t.common,issues:[]},parent:null},n=r._parseSync({data:t.data,path:t.path,parent:s});if("valid"===n.status)return n;"dirty"!==n.status||e||(e={result:n,ctx:s}),s.common.issues.length&&i.push(s.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const r=i.map((e=>new is(e)));return ls(t,{code:ss.invalid_union,unionErrors:r}),ds}}get options(){return this._def.options}}di.create=(e,t)=>new di({options:e,typeName:Pi.ZodUnion,...Rs(t)});const ui=e=>e instanceof bi?ui(e.schema):e instanceof Oi?ui(e.innerType()):e instanceof wi?[e.value]:e instanceof Ei?e.options:e instanceof Ri?Wt.objectValues(e.enum):e instanceof Ni?ui(e._def.innerType):e instanceof ti?[void 0]:e instanceof si?[null]:e instanceof $i?[void 0,...ui(e.unwrap())]:e instanceof xi?[null,...ui(e.unwrap())]:e instanceof Ci||e instanceof Li?ui(e.unwrap()):e instanceof Ii?ui(e._def.innerType):[];class fi extends Ss{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==es.object)return ls(t,{code:ss.invalid_type,expected:es.object,received:t.parsedType}),ds;const s=this.discriminator,i=t.data[s],r=this.optionsMap.get(i);return r?t.common.async?r._parseAsync({data:t.data,path:t.path,parent:t}):r._parseSync({data:t.data,path:t.path,parent:t}):(ls(t,{code:ss.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),ds)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,s){const i=new Map;for(const s of t){const t=ui(s.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const r of t){if(i.has(r))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(r)}`);i.set(r,s)}}return new fi({typeName:Pi.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...Rs(s)})}}function pi(e,t){const s=ts(e),i=ts(t);if(e===t)return{valid:!0,data:e};if(s===es.object&&i===es.object){const s=Wt.objectKeys(t),i=Wt.objectKeys(e).filter((e=>-1!==s.indexOf(e))),r={...e,...t};for(const s of i){const i=pi(e[s],t[s]);if(!i.valid)return{valid:!1};r[s]=i.data}return{valid:!0,data:r}}if(s===es.array&&i===es.array){if(e.length!==t.length)return{valid:!1};const s=[];for(let i=0;i<e.length;i++){const r=pi(e[i],t[i]);if(!r.valid)return{valid:!1};s.push(r.data)}return{valid:!0,data:s}}return s===es.date&&i===es.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class hi extends Ss{_parse(e){const{status:t,ctx:s}=this._processInputParams(e),i=(e,i)=>{if(ps(e)||ps(i))return ds;const r=pi(e.value,i.value);return r.valid?((hs(e)||hs(i))&&t.dirty(),{status:t.value,value:r.data}):(ls(s,{code:ss.invalid_intersection_types}),ds)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then((([e,t])=>i(e,t))):i(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}hi.create=(e,t,s)=>new hi({left:e,right:t,typeName:Pi.ZodIntersection,...Rs(s)});class mi extends Ss{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==es.array)return ls(s,{code:ss.invalid_type,expected:es.array,received:s.parsedType}),ds;if(s.data.length<this._def.items.length)return ls(s,{code:ss.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ds;!this._def.rest&&s.data.length>this._def.items.length&&(ls(s,{code:ss.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...s.data].map(((e,t)=>{const i=this._def.items[t]||this._def.rest;return i?i._parse(new As(s,e,s.path,t)):null})).filter((e=>!!e));return s.common.async?Promise.all(i).then((e=>cs.mergeArray(t,e))):cs.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new mi({...this._def,rest:e})}}mi.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new mi({items:e,typeName:Pi.ZodTuple,rest:null,...Rs(t)})};class _i extends Ss{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==es.object)return ls(s,{code:ss.invalid_type,expected:es.object,received:s.parsedType}),ds;const i=[],r=this._def.keyType,n=this._def.valueType;for(const e in s.data)i.push({key:r._parse(new As(s,e,s.path,e)),value:n._parse(new As(s,s.data[e],s.path,e)),alwaysSet:e in s.data});return s.common.async?cs.mergeObjectAsync(t,i):cs.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,s){return new _i(t instanceof Ss?{keyType:e,valueType:t,typeName:Pi.ZodRecord,...Rs(s)}:{keyType:qs.create(),valueType:e,typeName:Pi.ZodRecord,...Rs(t)})}}class gi extends Ss{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==es.map)return ls(s,{code:ss.invalid_type,expected:es.map,received:s.parsedType}),ds;const i=this._def.keyType,r=this._def.valueType,n=[...s.data.entries()].map((([e,t],n)=>({key:i._parse(new As(s,e,s.path,[n,"key"])),value:r._parse(new As(s,t,s.path,[n,"value"]))})));if(s.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const s of n){const i=await s.key,r=await s.value;if("aborted"===i.status||"aborted"===r.status)return ds;"dirty"!==i.status&&"dirty"!==r.status||t.dirty(),e.set(i.value,r.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const s of n){const i=s.key,r=s.value;if("aborted"===i.status||"aborted"===r.status)return ds;"dirty"!==i.status&&"dirty"!==r.status||t.dirty(),e.set(i.value,r.value)}return{status:t.value,value:e}}}}gi.create=(e,t,s)=>new gi({valueType:t,keyType:e,typeName:Pi.ZodMap,...Rs(s)});class yi extends Ss{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==es.set)return ls(s,{code:ss.invalid_type,expected:es.set,received:s.parsedType}),ds;const i=this._def;null!==i.minSize&&s.data.size<i.minSize.value&&(ls(s,{code:ss.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),null!==i.maxSize&&s.data.size>i.maxSize.value&&(ls(s,{code:ss.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const r=this._def.valueType;function n(e){const s=new Set;for(const i of e){if("aborted"===i.status)return ds;"dirty"===i.status&&t.dirty(),s.add(i.value)}return{status:t.value,value:s}}const a=[...s.data.values()].map(((e,t)=>r._parse(new As(s,e,s.path,t))));return s.common.async?Promise.all(a).then((e=>n(e))):n(a)}min(e,t){return new yi({...this._def,minSize:{value:e,message:vs.toString(t)}})}max(e,t){return new yi({...this._def,maxSize:{value:e,message:vs.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}yi.create=(e,t)=>new yi({valueType:e,minSize:null,maxSize:null,typeName:Pi.ZodSet,...Rs(t)});class vi extends Ss{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==es.function)return ls(t,{code:ss.invalid_type,expected:es.function,received:t.parsedType}),ds;function s(e,s){return os({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,as(),rs].filter((e=>!!e)),issueData:{code:ss.invalid_arguments,argumentsError:s}})}function i(e,s){return os({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,as(),rs].filter((e=>!!e)),issueData:{code:ss.invalid_return_type,returnTypeError:s}})}const r={errorMap:t.common.contextualErrorMap},n=t.data;if(this._def.returns instanceof Si){const e=this;return fs((async function(...t){const a=new is([]),o=await e._def.args.parseAsync(t,r).catch((e=>{throw a.addIssue(s(t,e)),a})),l=await Reflect.apply(n,this,o),c=await e._def.returns._def.type.parseAsync(l,r).catch((e=>{throw a.addIssue(i(l,e)),a}));return c}))}{const e=this;return fs((function(...t){const a=e._def.args.safeParse(t,r);if(!a.success)throw new is([s(t,a.error)]);const o=Reflect.apply(n,this,a.data),l=e._def.returns.safeParse(o,r);if(!l.success)throw new is([i(o,l.error)]);return l.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new vi({...this._def,args:mi.create(e).rest(ri.create())})}returns(e){return new vi({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,s){return new vi({args:e||mi.create([]).rest(ri.create()),returns:t||ri.create(),typeName:Pi.ZodFunction,...Rs(s)})}}class bi extends Ss{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}bi.create=(e,t)=>new bi({getter:e,typeName:Pi.ZodLazy,...Rs(t)});class wi extends Ss{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return ls(t,{received:t.data,code:ss.invalid_literal,expected:this._def.value}),ds}return{status:"valid",value:e.data}}get value(){return this._def.value}}function Ai(e,t){return new Ei({values:e,typeName:Pi.ZodEnum,...Rs(t)})}wi.create=(e,t)=>new wi({value:e,typeName:Pi.ZodLiteral,...Rs(t)});class Ei extends Ss{constructor(){super(...arguments),bs.set(this,void 0)}_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),s=this._def.values;return ls(t,{expected:Wt.joinValues(s),received:t.parsedType,code:ss.invalid_type}),ds}if(gs(this,bs,"f")||ys(this,bs,new Set(this._def.values),"f"),!gs(this,bs,"f").has(e.data)){const t=this._getOrReturnCtx(e),s=this._def.values;return ls(t,{received:t.data,code:ss.invalid_enum_value,options:s}),ds}return fs(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Ei.create(e,{...this._def,...t})}exclude(e,t=this._def){return Ei.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}bs=new WeakMap,Ei.create=Ai;class Ri extends Ss{constructor(){super(...arguments),ws.set(this,void 0)}_parse(e){const t=Wt.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==es.string&&s.parsedType!==es.number){const e=Wt.objectValues(t);return ls(s,{expected:Wt.joinValues(e),received:s.parsedType,code:ss.invalid_type}),ds}if(gs(this,ws,"f")||ys(this,ws,new Set(Wt.getValidEnumValues(this._def.values)),"f"),!gs(this,ws,"f").has(e.data)){const e=Wt.objectValues(t);return ls(s,{received:s.data,code:ss.invalid_enum_value,options:e}),ds}return fs(e.data)}get enum(){return this._def.values}}ws=new WeakMap,Ri.create=(e,t)=>new Ri({values:e,typeName:Pi.ZodNativeEnum,...Rs(t)});class Si extends Ss{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==es.promise&&!1===t.common.async)return ls(t,{code:ss.invalid_type,expected:es.promise,received:t.parsedType}),ds;const s=t.parsedType===es.promise?t.data:Promise.resolve(t.data);return fs(s.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}Si.create=(e,t)=>new Si({type:e,typeName:Pi.ZodPromise,...Rs(t)});class Oi extends Ss{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Pi.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:s}=this._processInputParams(e),i=this._def.effect||null,r={addIssue:e=>{ls(s,e),e.fatal?t.abort():t.dirty()},get path(){return s.path}};if(r.addIssue=r.addIssue.bind(r),"preprocess"===i.type){const e=i.transform(s.data,r);if(s.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===t.value)return ds;const i=await this._def.schema._parseAsync({data:e,path:s.path,parent:s});return"aborted"===i.status?ds:"dirty"===i.status||"dirty"===t.value?us(i.value):i}));{if("aborted"===t.value)return ds;const i=this._def.schema._parseSync({data:e,path:s.path,parent:s});return"aborted"===i.status?ds:"dirty"===i.status||"dirty"===t.value?us(i.value):i}}if("refinement"===i.type){const e=e=>{const t=i.refinement(e,r);if(s.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===s.common.async){const i=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return"aborted"===i.status?ds:("dirty"===i.status&&t.dirty(),e(i.value),{status:t.value,value:i.value})}return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then((s=>"aborted"===s.status?ds:("dirty"===s.status&&t.dirty(),e(s.value).then((()=>({status:t.value,value:s.value}))))))}if("transform"===i.type){if(!1===s.common.async){const e=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!ms(e))return e;const n=i.transform(e.value,r);if(n instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:n}}return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then((e=>ms(e)?Promise.resolve(i.transform(e.value,r)).then((e=>({status:t.value,value:e}))):e))}Wt.assertNever(i)}}Oi.create=(e,t,s)=>new Oi({schema:e,typeName:Pi.ZodEffects,effect:t,...Rs(s)}),Oi.createWithPreprocess=(e,t,s)=>new Oi({schema:t,effect:{type:"preprocess",transform:e},typeName:Pi.ZodEffects,...Rs(s)});class $i extends Ss{_parse(e){return this._getType(e)===es.undefined?fs(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}$i.create=(e,t)=>new $i({innerType:e,typeName:Pi.ZodOptional,...Rs(t)});class xi extends Ss{_parse(e){return this._getType(e)===es.null?fs(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}xi.create=(e,t)=>new xi({innerType:e,typeName:Pi.ZodNullable,...Rs(t)});class Ni extends Ss{_parse(e){const{ctx:t}=this._processInputParams(e);let s=t.data;return t.parsedType===es.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Ni.create=(e,t)=>new Ni({innerType:e,typeName:Pi.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...Rs(t)});class Ii extends Ss{_parse(e){const{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return _s(i)?i.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new is(s.common.issues)},input:s.data})}))):{status:"valid",value:"valid"===i.status?i.value:this._def.catchValue({get error(){return new is(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}Ii.create=(e,t)=>new Ii({innerType:e,typeName:Pi.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...Rs(t)});class ki extends Ss{_parse(e){if(this._getType(e)!==es.nan){const t=this._getOrReturnCtx(e);return ls(t,{code:ss.invalid_type,expected:es.nan,received:t.parsedType}),ds}return{status:"valid",value:e.data}}}ki.create=e=>new ki({typeName:Pi.ZodNaN,...Rs(e)});const Ti=Symbol("zod_brand");class Ci extends Ss{_parse(e){const{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}}class ji extends Ss{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return"aborted"===e.status?ds:"dirty"===e.status?(t.dirty(),us(e.value)):this._def.out._parseAsync({data:e.value,path:s.path,parent:s})})()}{const e=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return"aborted"===e.status?ds:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:s.path,parent:s})}}static create(e,t){return new ji({in:e,out:t,typeName:Pi.ZodPipeline})}}class Li extends Ss{_parse(e){const t=this._def.innerType._parse(e),s=e=>(ms(e)&&(e.value=Object.freeze(e.value)),e);return _s(t)?t.then((e=>s(e))):s(t)}unwrap(){return this._def.innerType}}function Di(e,t={},s){return e?ii.create().superRefine(((i,r)=>{var n,a;if(!e(i)){const e="function"==typeof t?t(i):"string"==typeof t?{message:t}:t,o=null===(a=null!==(n=e.fatal)&&void 0!==n?n:s)||void 0===a||a,l="string"==typeof e?{message:e}:e;r.addIssue({code:"custom",...l,fatal:o})}})):ii.create()}Li.create=(e,t)=>new Li({innerType:e,typeName:Pi.ZodReadonly,...Rs(t)});const Mi={object:ci.lazycreate};var Pi;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(Pi||(Pi={}));const Bi=qs.create,Ui=zs.create,Fi=ki.create,Gi=Ys.create,Zi=Js.create,Xi=Qs.create,Hi=ei.create,Ki=ti.create,Vi=si.create,qi=ii.create,Wi=ri.create,zi=ni.create,Yi=ai.create,Ji=oi.create,Qi=ci.create,er=ci.strictCreate,tr=di.create,sr=fi.create,ir=hi.create,rr=mi.create,nr=_i.create,ar=gi.create,or=yi.create,lr=vi.create,cr=bi.create,dr=wi.create,ur=Ei.create,fr=Ri.create,pr=Si.create,hr=Oi.create,mr=$i.create,_r=xi.create,gr=Oi.createWithPreprocess,yr=ji.create,vr={string:e=>qs.create({...e,coerce:!0}),number:e=>zs.create({...e,coerce:!0}),boolean:e=>Js.create({...e,coerce:!0}),bigint:e=>Ys.create({...e,coerce:!0}),date:e=>Qs.create({...e,coerce:!0})},br=ds;var wr=Object.freeze({__proto__:null,defaultErrorMap:rs,setErrorMap:function(e){ns=e},getErrorMap:as,makeIssue:os,EMPTY_PATH:[],addIssueToContext:ls,ParseStatus:cs,INVALID:ds,DIRTY:us,OK:fs,isAborted:ps,isDirty:hs,isValid:ms,isAsync:_s,get util(){return Wt},get objectUtil(){return zt},ZodParsedType:es,getParsedType:ts,ZodType:Ss,datetimeRegex:Xs,ZodString:qs,ZodNumber:zs,ZodBigInt:Ys,ZodBoolean:Js,ZodDate:Qs,ZodSymbol:ei,ZodUndefined:ti,ZodNull:si,ZodAny:ii,ZodUnknown:ri,ZodNever:ni,ZodVoid:ai,ZodArray:oi,ZodObject:ci,ZodUnion:di,ZodDiscriminatedUnion:fi,ZodIntersection:hi,ZodTuple:mi,ZodRecord:_i,ZodMap:gi,ZodSet:yi,ZodFunction:vi,ZodLazy:bi,ZodLiteral:wi,ZodEnum:Ei,ZodNativeEnum:Ri,ZodPromise:Si,ZodEffects:Oi,ZodTransformer:Oi,ZodOptional:$i,ZodNullable:xi,ZodDefault:Ni,ZodCatch:Ii,ZodNaN:ki,BRAND:Ti,ZodBranded:Ci,ZodPipeline:ji,ZodReadonly:Li,custom:Di,Schema:Ss,ZodSchema:Ss,late:Mi,get ZodFirstPartyTypeKind(){return Pi},coerce:vr,any:qi,array:Ji,bigint:Gi,boolean:Zi,date:Xi,discriminatedUnion:sr,effect:hr,enum:ur,function:lr,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>Di((t=>t instanceof e),t),intersection:ir,lazy:cr,literal:dr,map:ar,nan:Fi,nativeEnum:fr,never:zi,null:Vi,nullable:_r,number:Ui,object:Qi,oboolean:()=>Zi().optional(),onumber:()=>Ui().optional(),optional:mr,ostring:()=>Bi().optional(),pipeline:yr,preprocess:gr,promise:pr,record:nr,set:or,strictObject:er,string:Bi,symbol:Hi,transformer:hr,tuple:rr,undefined:Ki,union:tr,unknown:Wi,void:Yi,NEVER:br,ZodIssueCode:ss,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:is}),Ar=["interface","display","layout","module","panel","theme"],Er=["hook","endpoint"],Rr=["operation"],Sr="directus:extension",Or=wr.object({app:wr.string(),api:wr.string()}),$r=wr.object({request:wr.optional(wr.object({urls:wr.array(wr.string()),methods:wr.array(wr.union([wr.literal("GET"),wr.literal("POST"),wr.literal("PATCH"),wr.literal("PUT"),wr.literal("DELETE")]))})),log:wr.optional(wr.object({})),sleep:wr.optional(wr.object({}))}),xr=wr.optional(wr.object({enabled:wr.boolean(),requestedScopes:$r})),Nr=wr.union([wr.object({type:wr.enum(Er),name:wr.string(),source:wr.string()}),wr.object({type:wr.enum(Ar),name:wr.string(),source:wr.string()}),wr.object({type:wr.enum(Rr),name:wr.string(),source:Or})]),Ir=wr.object({host:wr.string(),hidden:wr.boolean().optional()}),kr=wr.object({type:wr.enum(Ar),path:wr.string(),source:wr.string()}),Tr=wr.object({type:wr.enum(Er),path:wr.string(),source:wr.string(),sandbox:xr}),Cr=wr.object({type:wr.enum(Rr),path:Or,source:Or,sandbox:xr}),jr=wr.object({type:wr.literal("bundle"),partial:wr.boolean().optional(),path:Or,entries:wr.array(Nr)});wr.array(Nr);var Lr=Ir.and(wr.union([kr,Tr,Cr,jr]));wr.object({name:wr.string(),version:wr.string(),type:wr.union([wr.literal("module"),wr.literal("commonjs")]).optional(),description:wr.string().optional(),icon:wr.string().optional(),dependencies:wr.record(wr.string()).optional(),devDependencies:wr.record(wr.string()).optional(),[Sr]:Lr});const Dr=require("tencentcloud-sdk-nodejs").ocr.v20181119.Client;var Mr={id:"extract-text-from-image",name:"Extract Text from Image",description:"Extracts text from image using Tencent OCR API and updates file description in Directus.",handler:async({field:e,api:t},{data:s,env:i,database:r,getSchema:n,services:a})=>{const o=e??Qt(s.$trigger)?.key;if(!o)throw new Error("Key is empty");const l=await n({database:r}),{AssetsService:c}=a,d=new c({schema:l}),u=await d.getAsset(o,{transformationParams:{},acceptFormat:null});if(!u)throw new Error("Asset not found");if(-1===u.file.type.indexOf("image"))throw new Error("This operation only works for images");const f=await(async e=>new Promise(((t,s)=>{const i=Array();e.on("data",(e=>i.push(e))),e.on("end",(()=>t(Buffer.concat(i)))),e.on("error",(e=>s(`error converting stream - ${e}`)))})))(u.stream),p={credential:{secretId:i.TENCENT_CLOUD_SECRET_ID,secretKey:i.TENCENT_CLOUD_SECRET_KEY},region:"ap-guangzhou",profile:{httpProfile:{endpoint:"ocr.tencentcloudapi.com"}}},h=new Dr(p),m={ImageBase64:f.toString("base64")};try{const e=await h.GeneralBasicOCR(m),t=e.TextDetections?.map((e=>e.DetectedText)).join("\n");return{success:!0,ocrResult:t}}catch(e){throw console.error("Error during OCR:",e),new Error("Failed to perform OCR: "+e.message)}}};const Pr=[{name:"tcocr",config:Mr},{name:"operation-test",config:{id:"custom",handler:({text:e})=>{console.log(e)}}}];exports.endpoints=[],exports.hooks=[],exports.operations=Pr;
