{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createBlock as _createBlock, mergeProps as _mergeProps } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_a_input = _resolveComponent(\"a-input\");\n  const _component_a_form_item = _resolveComponent(\"a-form-item\");\n  const _component_a_radio = _resolveComponent(\"a-radio\");\n  const _component_a_radio_group = _resolveComponent(\"a-radio-group\");\n  const _component_a_button = _resolveComponent(\"a-button\");\n  const _component_a_form = _resolveComponent(\"a-form\");\n  const _component_a_drawer = _resolveComponent(\"a-drawer\");\n  return _openBlock(), _createBlock(_component_a_drawer, {\n    open: $props.showDrawer,\n    class: \"custom-class\",\n    \"root-class-name\": \"root-class-name\",\n    \"root-style\": {\n      color: 'blue'\n    },\n    style: {\n      \"color\": \"red\"\n    },\n    title: \"产品添加\",\n    placement: \"right\",\n    onAfterOpenChange: $setup.afterOpenChange,\n    onClose: $setup.closeDrawer\n  }, {\n    default: _withCtx(() => [_createVNode(_component_a_form, _mergeProps({\n      model: $setup.formState\n    }, _ctx.layout, {\n      \"validate-messages\": _ctx.validateMessages,\n      wrapperCol: {\n        span: 16\n      },\n      \"label-col\": {\n        span: 6\n      },\n      ref: \"formRef\",\n      onFinish: $setup.onFinish\n    }), {\n      default: _withCtx(() => [_createVNode(_component_a_form_item, {\n        name: \"name\",\n        label: \"产品名称\",\n        rules: [{\n          required: true,\n          message: '请输入产品名称！'\n        }]\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_input, {\n          value: $setup.formState.name,\n          \"onUpdate:value\": _cache[0] || (_cache[0] = $event => $setup.formState.name = $event)\n        }, null, 8 /* PROPS */, [\"value\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_a_form_item, {\n        name: \"price\",\n        label: \"价格\",\n        rules: [{\n          required: true,\n          message: '请输入价格！'\n        }]\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_input, {\n          value: $setup.formState.price,\n          \"onUpdate:value\": _cache[1] || (_cache[1] = $event => $setup.formState.price = $event)\n        }, null, 8 /* PROPS */, [\"value\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_a_form_item, {\n        name: \"categories\",\n        label: \"类别\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_radio_group, {\n          value: $setup.formState.categories,\n          \"onUpdate:value\": _cache[2] || (_cache[2] = $event => $setup.formState.categories = $event),\n          name: \"radioGroup\"\n        }, {\n          default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.categoriesList, (item, index) => {\n            return _openBlock(), _createBlock(_component_a_radio, {\n              key: index,\n              value: item.id\n            }, {\n              default: _withCtx(() => [_createTextVNode(_toDisplayString(item.name), 1 /* TEXT */)]),\n              _: 2 /* DYNAMIC */\n            }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"value\"]);\n          }), 128 /* KEYED_FRAGMENT */))]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"value\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_a_form_item, {\n        wrapperCol: {\n          offset: 8,\n          span: 16\n        }\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_button, {\n          class: \"add\",\n          \"html-type\": \"submit\"\n        }, {\n          default: _withCtx(() => _cache[3] || (_cache[3] = [_createTextVNode(\"添加\")])),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_a_button, {\n          class: \"clear\",\n          \"html-type\": \"reset\",\n          onClick: $setup.onClear\n        }, {\n          default: _withCtx(() => _cache[4] || (_cache[4] = [_createTextVNode(\"清空\")])),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 16 /* FULL_PROPS */, [\"model\", \"validate-messages\", \"onFinish\"])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"open\", \"onAfterOpenChange\"]);\n}","map":{"version":3,"names":["_createBlock","_component_a_drawer","open","$props","showDrawer","class","color","style","title","placement","onAfterOpenChange","$setup","afterOpenChange","onClose","closeDrawer","default","_withCtx","_createVNode","_component_a_form","_mergeProps","model","formState","_ctx","layout","validateMessages","wrapperCol","span","ref","onFinish","_component_a_form_item","name","label","rules","required","message","_component_a_input","value","_cache","$event","_","price","_component_a_radio_group","categories","_createElementBlock","_Fragment","_renderList","categoriesList","item","index","_component_a_radio","key","id","_createTextVNode","_toDisplayString","offset","_component_a_button","onClick","onClear"],"sources":["E:\\permisson\\demo\\src\\components\\product\\addProduct.vue"],"sourcesContent":["<template>\r\n  <a-drawer :open=\"showDrawer\" class=\"custom-class\" root-class-name=\"root-class-name\" :root-style=\"{ color: 'blue' }\"\r\n    style=\"color: red\" title=\"产品添加\" placement=\"right\" @after-open-change=\"afterOpenChange\" @close=\"closeDrawer\">\r\n    <a-form :model=\"formState\" v-bind=\"layout\" :validate-messages=\"validateMessages\" :wrapperCol=\"{ span: 16 }\"\r\n      :label-col=\"{ span: 6 }\" ref=\"formRef\" @finish=\"onFinish\">\r\n      <a-form-item name=\"name\" label=\"产品名称\" :rules=\"[{ required: true, message: '请输入产品名称！' }]\">\r\n        <a-input v-model:value=\"formState.name\" />\r\n      </a-form-item>\r\n      <a-form-item name=\"price\" label=\"价格\" :rules=\"[{ required: true, message: '请输入价格！' }]\">\r\n        <a-input v-model:value=\"formState.price\" />\r\n      </a-form-item>\r\n      <a-form-item name=\"categories\" label=\"类别\">\r\n        <a-radio-group v-model:value=\"formState.categories\" name=\"radioGroup\">\r\n          <a-radio v-for=\"(item, index) in categoriesList\" :key=\"index\" :value=\"item.id\">{{ item.name }}</a-radio>\r\n        </a-radio-group>\r\n      </a-form-item>\r\n      <a-form-item :wrapperCol=\"{ offset: 8, span: 16 }\">\r\n        <a-button class=\"add\" html-type=\"submit\">添加</a-button>\r\n        <a-button class=\"clear\" html-type=\"reset\" @click=\"onClear\">清空</a-button>\r\n      </a-form-item>\r\n    </a-form>\r\n  </a-drawer>\r\n</template>\r\n<script setup>\r\nimport { reactive, ref, toRefs, inject, watch } from 'vue';\r\nimport { message } from 'ant-design-vue';\r\nimport { $categorieslist, $addProduct, $getProduct } from '../../api/proinfo.js'\r\nconst formRef = ref();\r\nlet loadData = inject('loadData')\r\nlet id = inject('id')\r\nlet dataSource = reactive({\r\n  formState: {\r\n    name: '',\r\n    price: '',\r\n    categories:''\r\n  },\r\n  categoriesList: []\r\n})\r\nlet { showDrawer, no } = defineProps([\"showDrawer\", \"no\"])\r\nconsole.log(showDrawer);\r\nlet { formState, categoriesList } = toRefs(dataSource);\r\nlet emit = defineEmits(['sync-drawer'])\r\nwatch(() => id.value, (nval) => {\r\n  $getProduct(nval).then(r => {\r\n    dataSource.formState.name = r.name || '';\r\n    dataSource.formState.price = r.price || '';\r\n    dataSource.formState.categories = r.categories || '';\r\n    console.log(dataSource.formState);\r\n  });\r\n});\r\nlet afterOpenChange = (val) => {\r\n  if (!val) {\r\n    emit('sync-drawer', val)\r\n  }\r\n}\r\nconst closeDrawer = () => {\r\n  emit('sync-drawer', false);\r\n};\r\nlet onFinish = () => {\r\n  const newProduct = {\r\n    name: dataSource.formState.name,\r\n    price: dataSource.formState.price,\r\n    categories: {\r\n      create: [\r\n        { categories_id: dataSource.formState.categories }, // 关联类别的 ID // 如果有多个类别\r\n      ]\r\n    }\r\n  };\r\n  $addProduct(newProduct)\r\n    .then(response => {\r\n      message.success(\"产品添加成功1\");\r\n      formRef.value.resetFields();\r\n      console.log(response);\r\n      loadData()\r\n    })\r\n    .catch(error => {\r\n      message.error(\"产品添加失败1\");\r\n    });\r\n\r\n}\r\n\r\nlet loadCate = () => {\r\n  $categorieslist().then(r => {\r\n    dataSource.categoriesList = r.map(item => ({ id: item.id, name: item.name }));\r\n    console.log(dataSource.categoriesList);\r\n\r\n  })\r\n}\r\nlet onClear = () => {\r\n  formRef.value.resetFields();\r\n}\r\nloadCate()\r\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}