{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, createElementVNode as _createElementVNode, mergeProps as _mergeProps, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"search\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_a_input_search = _resolveComponent(\"a-input-search\");\n  const _component_a_button = _resolveComponent(\"a-button\");\n  const _component_a_table = _resolveComponent(\"a-table\");\n  const _component_a_input = _resolveComponent(\"a-input\");\n  const _component_a_form_item = _resolveComponent(\"a-form-item\");\n  const _component_a_form = _resolveComponent(\"a-form\");\n  const _component_a_drawer = _resolveComponent(\"a-drawer\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_a_input_search, {\n    class: \"searchText\",\n    value: $setup.searchKeyword,\n    \"onUpdate:value\": _cache[0] || (_cache[0] = $event => $setup.searchKeyword = $event),\n    placeholder: \"请输入产品名称\",\n    \"enter-button\": \"查询\",\n    size: \"default\",\n    onSearch: $setup.onSearch\n  }, null, 8 /* PROPS */, [\"value\", \"onSearch\"]), _createVNode(_component_a_button, {\n    type: \"primary\",\n    class: \"add\",\n    onClick: $setup.showDrawer\n  }, {\n    default: _withCtx(() => _cache[3] || (_cache[3] = [_createTextVNode(\"添加\")])),\n    _: 1 /* STABLE */\n  })]), _createVNode(_component_a_table, {\n    dataSource: $setup.tableDatas,\n    columns: $setup.tableColumns\n  }, null, 8 /* PROPS */, [\"dataSource\", \"columns\"]), _createVNode(_component_a_drawer, {\n    open: $setup.open,\n    \"onUpdate:open\": _cache[2] || (_cache[2] = $event => $setup.open = $event),\n    class: \"custom-class\",\n    \"root-class-name\": \"root-class-name\",\n    \"root-style\": {\n      color: 'blue'\n    },\n    style: {\n      \"color\": \"red\"\n    },\n    title: \"Basic Drawer\",\n    placement: \"right\",\n    onAfterOpenChange: $setup.afterOpenChange\n  }, {\n    default: _withCtx(() => [_createVNode(_component_a_form, _mergeProps({\n      model: $setup.formState\n    }, _ctx.layout, {\n      name: \"nest-messages\",\n      \"validate-messages\": _ctx.validateMessages,\n      wrapperCol: {\n        span: 16\n      },\n      onFinish: $setup.onFinish\n    }), {\n      default: _withCtx(() => [_createVNode(_component_a_form_item, {\n        name: \"name\",\n        label: \"Name\",\n        rules: [{\n          required: true\n        }]\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_input, {\n          value: $setup.formState.name,\n          \"onUpdate:value\": _cache[1] || (_cache[1] = $event => $setup.formState.name = $event)\n        }, null, 8 /* PROPS */, [\"value\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_a_form_item, {\n        wrapperCol: {\n          offset: 8,\n          span: 16\n        }\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_button, {\n          type: \"primary\",\n          \"html-type\": \"submit\"\n        }, {\n          default: _withCtx(() => _cache[4] || (_cache[4] = [_createTextVNode(\"Submit\")])),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 16 /* FULL_PROPS */, [\"model\", \"validate-messages\", \"onFinish\"])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"open\"])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createElementBlock","_Fragment","_createElementVNode","_hoisted_1","_createVNode","_component_a_input_search","value","$setup","searchKeyword","_cache","$event","placeholder","size","onSearch","_component_a_button","type","onClick","showDrawer","default","_withCtx","_createTextVNode","_","_component_a_table","dataSource","tableDatas","columns","tableColumns","_component_a_drawer","open","color","style","title","placement","onAfterOpenChange","afterOpenChange","_component_a_form","_mergeProps","model","formState","_ctx","layout","name","validateMessages","wrapperCol","span","onFinish","_component_a_form_item","label","rules","required","_component_a_input","offset"],"sources":["E:\\permisson\\demo\\src\\views\\products\\productsinfo.vue"],"sourcesContent":["<template>\r\n  <div class=\"search\">\r\n    <a-input-search\r\n    class=\"searchText\"\r\n      v-model:value=\"searchKeyword\"\r\n      placeholder=\"请输入产品名称\"\r\n      enter-button=\"查询\"\r\n      size=\"default\"\r\n      @search=\"onSearch\"\r\n    />\r\n    <a-button type=\"primary\" class=\"add\" @click=\"showDrawer\">添加</a-button>\r\n  </div>\r\n  <a-table :dataSource=\"tableDatas\" :columns=\"tableColumns\" />\r\n  <a-drawer\r\n    v-model:open=\"open\"\r\n    class=\"custom-class\"\r\n    root-class-name=\"root-class-name\"\r\n    :root-style=\"{ color: 'blue' }\"\r\n    style=\"color: red\"\r\n    title=\"Basic Drawer\"\r\n    placement=\"right\"\r\n    @after-open-change=\"afterOpenChange\"\r\n  >\r\n  <a-form\r\n    :model=\"formState\"\r\n    v-bind=\"layout\"\r\n    name=\"nest-messages\"\r\n    :validate-messages=\"validateMessages\"\r\n    :wrapperCol=\"{span:16}\"\r\n    @finish=\"onFinish\"\r\n  >\r\n    <a-form-item name=\"name\" label=\"Name\" :rules=\"[{ required: true }]\">\r\n      <a-input v-model:value=\"formState.name\" />\r\n    </a-form-item>\r\n    <a-form-item :wrapperCol=\"{offset:8,span:16}\">\r\n      <a-button type=\"primary\" html-type=\"submit\">Submit</a-button>\r\n    </a-form-item>\r\n  </a-form>\r\n  </a-drawer>\r\n</template>\r\n\r\n<script setup>\r\n// import addProduct from '../../components/product/addProduct.vue'\r\nimport { reactive, toRefs, ref } from 'vue';\r\nimport { createDirectus, rest, readItems } from '@directus/sdk';\r\nconst searchKeyword = ref('');\r\nconst open = ref(false);\r\nconst afterOpenChange = bool => {\r\n  console.log('open', bool);\r\n};\r\nconst showDrawer = () => {\r\n  open.value = true;\r\n};\r\n// 数据源\r\nlet dataSource = reactive({\r\n  tableDatas: [],  // 确保 dataSource.tableDatas 一开始是空数组\r\n  tableColumns: [\r\n      {\r\n          title: '产品id',\r\n          dataIndex: 'id',\r\n          key: 'id',\r\n      },\r\n      {\r\n          title: '产品名称',\r\n          dataIndex: 'name',\r\n          key: 'name',\r\n      },\r\n      {\r\n          title: '价格',\r\n          dataIndex: 'price',\r\n          key: 'price',\r\n      },\r\n      {\r\n          title: '类别',\r\n          dataIndex: 'sort',\r\n          key: 'sort',\r\n      }\r\n  ],\r\n  formState:{\r\n    name:'',\r\n    pricet:'',\r\n    sort:''\r\n  }\r\n});\r\n// 使用 `toRefs` 解构 `reactive` 数据，方便在模板中直接使用\r\nlet { tableDatas, tableColumns,formState} = toRefs(dataSource);\r\nlet onFinish=()=>{\r\n  \r\n}\r\nconst client = createDirectus('http://localhost:8055').with(rest());\r\nlet loadData=async(searchKeyword='')=>{\r\ntry {\r\n  const filter = searchKeyword\r\n      ? {\r\n          filter: {\r\n            name: {\r\n              _contains: searchKeyword, // 直接查询包含关键字的产品\r\n            },\r\n          },\r\n        }\r\n      : {};\r\n\r\n    const result = await client.request(readItems('products', {\r\n      fields: ['*'],\r\n      ...filter, // 传入过滤条件\r\n    }));\r\n\r\n  // 将返回的数据赋值给 tableDatas\r\n  tableDatas.value = result\r\n} catch (error) {\r\n  console.error('Failed to fetch items:', error);\r\n}\r\n};\r\nloadData()\r\nlet onSearch=(value)=>{\r\n  searchKeyword.value = value;\r\n  loadData(value);  // 传递搜索内容\r\n}\r\n</script>\r\n<style scoped lang=\"scss\">\r\n.search{\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 10px;\r\n  .searchText{\r\n    width: 300px;\r\n  }\r\n  .add{\r\n    background: red;\r\n    border: none;\r\n  }\r\n}\r\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAAQ;;;;;;;;;uBADrBC,mBAAA,CAAAC,SAAA,SACEC,mBAAA,CAUM,OAVNC,UAUM,GATJC,YAAA,CAOEC,yBAAA;IANFN,KAAK,EAAC,YAAY;IACRO,KAAK,EAAEC,MAAA,CAAAC,aAAa;IAJlC,kBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAIqBH,MAAA,CAAAC,aAAa,GAAAE,MAAA;IAC5BC,WAAW,EAAC,SAAS;IACrB,cAAY,EAAC,IAAI;IACjBC,IAAI,EAAC,SAAS;IACbC,QAAM,EAAEN,MAAA,CAAAM;kDAEXT,YAAA,CAAsEU,mBAAA;IAA5DC,IAAI,EAAC,SAAS;IAAChB,KAAK,EAAC,KAAK;IAAEiB,OAAK,EAAET,MAAA,CAAAU;;IAVjDC,OAAA,EAAAC,QAAA,CAU6D,MAAEV,MAAA,QAAAA,MAAA,OAV/DW,gBAAA,CAU6D,IAAE,E;IAV/DC,CAAA;QAYEjB,YAAA,CAA4DkB,kBAAA;IAAlDC,UAAU,EAAEhB,MAAA,CAAAiB,UAAU;IAAGC,OAAO,EAAElB,MAAA,CAAAmB;sDAC5CtB,YAAA,CAyBWuB,mBAAA;IAxBDC,IAAI,EAAErB,MAAA,CAAAqB,IAAI;IAdtB,iBAAAnB,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAckBH,MAAA,CAAAqB,IAAI,GAAAlB,MAAA;IAClBX,KAAK,EAAC,cAAc;IACpB,iBAAe,EAAC,iBAAiB;IAChC,YAAU,EAAE;MAAA8B,KAAA;IAAA,CAAiB;IAC9BC,KAAkB,EAAlB;MAAA;IAAA,CAAkB;IAClBC,KAAK,EAAC,cAAc;IACpBC,SAAS,EAAC,OAAO;IAChBC,iBAAiB,EAAE1B,MAAA,CAAA2B;;IArBxBhB,OAAA,EAAAC,QAAA,CAuBE,MAcS,CAdTf,YAAA,CAcS+B,iBAAA,EAdTC,WAAA,CAcS;MAbNC,KAAK,EAAE9B,MAAA,CAAA+B;IAAS,GACTC,IAAA,CAAAC,MAAM;MACdC,IAAI,EAAC,eAAe;MACnB,mBAAiB,EAAEF,IAAA,CAAAG,gBAAgB;MACnCC,UAAU,EAAE;QAAAC,IAAA;MAAA,CAAS;MACrBC,QAAM,EAAEtC,MAAA,CAAAsC;;MA7Bb3B,OAAA,EAAAC,QAAA,CA+BI,MAEc,CAFdf,YAAA,CAEc0C,sBAAA;QAFDL,IAAI,EAAC,MAAM;QAACM,KAAK,EAAC,MAAM;QAAEC,KAAK,EAAE;UAAAC,QAAA;QAAA;;QA/BlD/B,OAAA,EAAAC,QAAA,CAgCM,MAA0C,CAA1Cf,YAAA,CAA0C8C,kBAAA;UAAzB5C,KAAK,EAAEC,MAAA,CAAA+B,SAAS,CAACG,IAAI;UAhC5C,kBAAAhC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAgC8BH,MAAA,CAAA+B,SAAS,CAACG,IAAI,GAAA/B,MAAA;;QAhC5CW,CAAA;UAkCIjB,YAAA,CAEc0C,sBAAA;QAFAH,UAAU,EAAE;UAAAQ,MAAA;UAAAP,IAAA;QAAA;MAAkB;QAlChD1B,OAAA,EAAAC,QAAA,CAmCM,MAA6D,CAA7Df,YAAA,CAA6DU,mBAAA;UAAnDC,IAAI,EAAC,SAAS;UAAC,WAAS,EAAC;;UAnCzCG,OAAA,EAAAC,QAAA,CAmCkD,MAAMV,MAAA,QAAAA,MAAA,OAnCxDW,gBAAA,CAmCkD,QAAM,E;UAnCxDC,CAAA;;QAAAA,CAAA;;MAAAA,CAAA;;IAAAA,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}