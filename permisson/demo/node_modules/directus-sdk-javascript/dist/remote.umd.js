!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("axios"),require("qs")):"function"==typeof define&&define.amd?define(["exports","axios","qs"],e):e(t.remote={},t.axios,t.qs)}(this,function(t,e,o){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,o=o&&o.hasOwnProperty("default")?o.default:o;var r=function(t){var e=t.accessToken,o=t.url,r=t.headers,i=t.accessTokenType,n=t.version,s=t.maxFileSize;if(this.accessTokenType=i||"header",this.accessToken=e,this.headers=r||{},this.version=n||"1.1",this.maxFileSize=s,!o)throw new Error("No Directus URL provided");var a=o.replace("/api/1.1","");this.base=a.replace(/\/+$/,""),this.api=this.base+"/api/",this.url=this.api+this.version+"/"},i={_requestHeaders:{configurable:!0}};function n(t){throw new Error("Missing parameter ["+t+"]")}i._requestHeaders.get=function(){var t=Object.assign({},this.headers);return this.accessToken&&"header"===this.accessTokenType&&(t.Authorization="Bearer "+this.accessToken),t},r.prototype._onCaughtError=function(t,e,o){return o.response&&o.response.data?e(o.response.data):e(o)},r.prototype._get=function(t,r,i){var n=this;void 0===r&&(r={}),void 0===i&&(i=!1);var s=this._requestHeaders,a=i?this.api:this.url;return this.setAccessTokenParam(r),new Promise(function(i,u){e.get(a+t,{params:r,headers:s,paramsSerializer:function(t){return o.stringify(t,{arrayFormat:"brackets",encode:!1})}}).then(function(t){return i(t.data)}).catch(function(t){return n._onCaughtError(i,u,t)})})},r.prototype._post=function(t,o,r,i){var n=this;void 0===o&&(o={}),void 0===r&&(r={}),void 0===i&&(i=!1);var s=this._requestHeaders,a=i?this.api:this.url;return this.setAccessTokenParam(r),new Promise(function(i,u){e.post(a+t,o,{headers:s,params:r,maxContentLength:n.maxFileSize}).then(function(t){return i(t.data)}).catch(function(t){return n._onCaughtError(i,u,t)})})},r.prototype._put=function(t,o,r,i){var n=this;void 0===o&&(o={}),void 0===r&&(r={}),void 0===i&&(i=!1);var s=this._requestHeaders,a=i?this.api:this.url;return this.setAccessTokenParam(r),new Promise(function(i,u){e.put(a+t,o,{headers:s,params:r,maxContentLength:n.maxFileSize}).then(function(t){return i(t.data)}).catch(function(t){return n._onCaughtError(i,u,t)})})},r.prototype._delete=function(t,o,r,i){var n=this;void 0===o&&(o={}),void 0===r&&(r={}),void 0===i&&(i=!1);var s=this._requestHeaders,a=i?this.api:this.url;return this.setAccessTokenParam(r),new Promise(function(i,u){e.delete(a+t,{headers:s,data:o,params:r}).then(function(t){return i(t.data)}).catch(function(t){return n._onCaughtError(i,u,t)})})},r.prototype.authenticate=function(t,e){var o=this;return void 0===t&&(t=n("email")),void 0===e&&(e=n("password")),new Promise(function(r,i){o._post("auth/request-token",{email:t,password:e}).then(function(t){return t.success?(o.accessToken=t.data.token,r(t)):i(t)}).catch(function(t){return i(t)})})},r.prototype.deauthenticate=function(){this.accessToken=null},r.prototype.createItem=function(t,e,o){return void 0===t&&(t=n("table")),void 0===e&&(e={}),void 0===o&&(o={}),this._post("tables/"+t+"/rows",e,o)},r.prototype.getItems=function(t,e){return void 0===t&&(t=n("table")),void 0===e&&(e={}),this._get("tables/"+t+"/rows",e)},r.prototype.getItem=function(t,e,o){return void 0===t&&(t=n("table")),void 0===e&&(e=n("id")),void 0===o&&(o={}),this._get("tables/"+t+"/rows/"+e,o)},r.prototype.updateItem=function(t,e,o,r){return void 0===t&&(t=n("table")),void 0===e&&(e=n("id")),void 0===o&&(o=n("data")),void 0===r&&(r={}),this._put("tables/"+t+"/rows/"+e,o,r)},r.prototype.deleteItem=function(t,e,o){return void 0===t&&(t=n("table")),void 0===e&&(e=n("id")),void 0===o&&(o={}),this._delete("tables/"+t+"/rows/"+e,{},o)},r.prototype.createBulk=function(t,e){if(void 0===t&&(t=n("table")),void 0===e&&(e=n("data")),!1===Array.isArray(e))throw new TypeError("Parameter data should be an array of objects");return this._post("tables/"+t+"/rows/bulk",{rows:e})},r.prototype.updateBulk=function(t,e){if(void 0===t&&(t=n("table")),void 0===e&&(e=n("data")),!1===Array.isArray(e))throw new TypeError("Parameter data should be an array of objects");return this._put("tables/"+t+"/rows/bulk",{rows:e})},r.prototype.deleteBulk=function(t,e){if(void 0===t&&(t=n("table")),void 0===e&&(e=n("data")),!1===Array.isArray(e))throw new TypeError("Parameter data should be an array of objects");return this._delete("tables/"+t+"/rows/bulk",{rows:e})},r.prototype.createFile=function(t){return void 0===t&&(t={}),this._post("files",t)},r.prototype.getFiles=function(t){return void 0===t&&(t={}),this._get("files",t)},r.prototype.getFile=function(t){return void 0===t&&(t=n("id")),this._get("files/"+t)},r.prototype.updateFile=function(t,e){return void 0===t&&(t=n("id")),void 0===e&&(e=n("data")),this._put("files/"+t,e)},r.prototype.deleteFile=function(t){return void 0===t&&(t=n("id")),this._delete("files/"+t)},r.prototype.createTable=function(t){return void 0===t&&(t=n("name")),this._post("tables",{name:t})},r.prototype.getTables=function(t){return void 0===t&&(t={}),this._get("tables",t)},r.prototype.getTable=function(t,e){return void 0===t&&(t=n("table")),void 0===e&&(e={}),this._get("tables/"+t,e)},r.prototype.createColumn=function(t,e){return void 0===t&&(t=n("table")),void 0===e&&(e={}),this._post("tables/"+t+"/columns",e)},r.prototype.getColumns=function(t,e){return void 0===t&&(t=n("table")),void 0===e&&(e={}),this._get("tables/"+t+"/columns",e)},r.prototype.getColumn=function(t,e){return void 0===t&&(t=n("table")),void 0===e&&(e=n("column")),this._get("tables/"+t+"/columns/"+e)},r.prototype.updateColumn=function(t,e,o){return void 0===t&&(t=n("table")),void 0===e&&(e=n("column")),void 0===o&&(o={}),this._put("tables/"+t+"/columns/"+e,o)},r.prototype.deleteColumn=function(t,e){return void 0===t&&(t=n("table")),void 0===e&&(e=n("column")),this._delete("tables/"+t+"/columns/"+e)},r.prototype.createGroup=function(t){return void 0===t&&(t=n("name")),this._post("groups",{name:t})},r.prototype.getGroups=function(){return this._get("groups")},r.prototype.getGroup=function(t){return void 0===t&&(t=n("id")),this._get("groups/"+t)},r.prototype.createPrivileges=function(t,e){return void 0===t&&(t=n("id")),void 0===e&&(e={}),this._post("privileges/"+t,e)},r.prototype.getPrivileges=function(t){return void 0===t&&(t=n("id")),this._get("privileges/"+t)},r.prototype.getTablePrivileges=function(t,e){return void 0===t&&(t=n("id")),void 0===e&&(e=n("table")),this._get("privileges/"+t+"/"+e)},r.prototype.updatePrivileges=function(t,e){return void 0===t&&(t=n("id")),void 0===e&&(e=n("table")),this._get("privileges/"+t+"/"+e)},r.prototype.getPreferences=function(t){return void 0===t&&(t=n("table")),this._get("tables/"+t+"/preferences")},r.prototype.updatePreference=function(t,e){return void 0===t&&(t=n("table")),void 0===e&&(e={}),this._update("tables/"+t+"/preferences",e)},r.prototype.getMessages=function(t){return void 0===t&&(t={}),this._get("messages/rows",t)},r.prototype.getMessage=function(t){return void 0===t&&(t=n("id")),this._get("messages/rows/"+t)},r.prototype.sendMessage=function(t){return void 0===t&&(t=n("data")),this._post("messages/rows/",t)},r.prototype.getActivity=function(t){return void 0===t&&(t={}),this._get("activity",t)},r.prototype.getBookmarks=function(){return this._get("bookmarks")},r.prototype.getUserBookmarks=function(){return this._get("bookmarks/self")},r.prototype.getBookmark=function(t){return void 0===t&&(t=n("id")),this._get("bookmarks/"+t)},r.prototype.createBookmark=function(t){return void 0===t&&(t=n("data")),this._post("bookmarks",t)},r.prototype.deleteBookmark=function(t){return void 0===t&&(t=n("id")),this._delete("bookmarks/"+t)},r.prototype.getSettings=function(){return this._get("settings")},r.prototype.getSettingsByCollection=function(t){return void 0===t&&(t=n("name")),this._get("settings/"+t)},r.prototype.updateSettings=function(t,e){return void 0===t&&(t=n("name")),void 0===e&&(e={}),this._put("settings/"+t,e)},r.prototype.getUsers=function(t){return void 0===t&&(t={}),this._get("users",t)},r.prototype.getUser=function(t){return void 0===t&&(t=n("id")),this._get("users/"+t)},r.prototype.getMe=function(){return this._get("users/me")},r.prototype.createUser=function(t){return void 0===t&&(t=n("user")),this._post("users",t)},r.prototype.updateUser=function(t,e){return void 0===t&&(t=n("id")),void 0===e&&(e=n("data")),this._put("users/"+t,e)},r.prototype.updateMe=function(t){return void 0===t&&(t=n("data")),this._put("users/me",t)},r.prototype.updatePassword=function(t){return void 0===t&&(t=n("password")),this._put("users/me",{password:t})},r.prototype.getApi=function(t,e){return void 0===t&&(t=n("api_endpoint")),void 0===e&&(e={}),this._get(t,e,!0)},r.prototype.postApi=function(t,e,o){return void 0===t&&(t=n("api_endpoint")),void 0===e&&(e=n("data")),void 0===o&&(o={}),this._post(t,e,o,!0)},r.prototype.putApi=function(t,e){return void 0===t&&(t=n("api_endpoint")),void 0===e&&(e=n("data")),this._put(t,e,!0)},r.prototype.deleteApi=function(t,e){return void 0===t&&(t=n("api_endpoint")),void 0===e&&(e=n("data")),this._delete(t,e,!0)},r.prototype.getHash=function(t,e){return void 0===t&&(t=n("string")),void 0===e&&(e={}),this._post("hash",e)},r.prototype.getRandom=function(t){return void 0===t&&(t={}),this._post("random",{},t)},r.prototype.setAccessTokenParam=function(t){this.accessToken&&"parameter"===this.accessTokenType&&(t.access_token=this.accessToken)},Object.defineProperties(r.prototype,i);var s={RemoteInstance:r},a=s.RemoteInstance;t.default=s,t.RemoteInstance=a,Object.defineProperty(t,"__esModule",{value:!0})});
